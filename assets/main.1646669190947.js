var qe=Object.defineProperty;var Ve=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Te=(e,s,l)=>s in e?qe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l,v=(e,s)=>{for(var l in s||(s={}))Pe.call(s,l)&&Te(e,l,s[l]);if(Ve)for(var l of Ve(s))Oe.call(s,l)&&Te(e,l,s[l]);return e};import{d as E,z as T,o as g,a as $,b as S,V as k,Z as C,a5 as te,F as H,O as F,P as y,W as p,U as R,aA as oe,aE as de,a0 as q,k as Y,aF as fe,ac as P,ar as Ne,T as B,_ as X,K as ee,h as Z,n as ne,J as ae,j as ie,H as Re,a6 as Ue,ad as Ce,l as me,Q as ye,R as be,X as We,ai as je,ay as Ge,az as Qe}from"./vue.1646669190947.js";import{u as O,_ as x,L as N,P as Be,b as we,E as Xe,S as K,r as Ye,o as Ee,T as _e}from"./index.1646669190947.js";import{l as Je}from"./logo-mini.1646669190947.js";import{S as Ke}from"./sortable.esm.1646669190947.js";import Ze from"./parent.1646669190947.js";const et=E({name:"layoutLogo",setup(){const e=O(),s=T(()=>e.state.themeConfig.themeConfig),l=T(()=>{let{isCollapse:f,layout:_}=e.state.themeConfig.themeConfig;return!f||_==="classic"||document.body.clientWidth<1e3});return{logoMini:Je,setShowLogo:l,getThemeConfig:s,onThemeConfigChange:()=>{if(e.state.themeConfig.themeConfig.layout==="transverse")return!1;e.state.themeConfig.themeConfig.isCollapse=!e.state.themeConfig.themeConfig.isCollapse}}}}),tt=["src"],st=["src"];function nt(e,s,l,c,f,_){return e.setShowLogo?(g(),$("div",{key:0,class:"layout-logo",onClick:s[0]||(s[0]=(...r)=>e.onThemeConfigChange&&e.onThemeConfigChange(...r))},[S("img",{src:e.logoMini,class:"layout-logo-medium-img"},null,8,tt),S("span",null,k(e.getThemeConfig.globalTitle),1)])):(g(),$("div",{key:1,class:"layout-logo-size",onClick:s[1]||(s[1]=(...r)=>e.onThemeConfigChange&&e.onThemeConfigChange(...r))},[S("img",{src:e.logoMini,class:"layout-logo-size-img"},null,8,st)]))}var at=x(et,[["render",nt],["__scopeId","data-v-9ae9470c"]]);const ot=E({name:"navMenuSubItem",props:{chil:{type:Array,default:()=>[]}},setup(e){return{chils:T(()=>e.chil)}}}),it=["href"];function lt(e,s,l,c,f,_){const r=C("SvgIcon"),o=C("sub-item",!0),t=C("el-sub-menu"),w=C("el-menu-item");return g(!0),$(H,null,te(e.chils,u=>(g(),$(H,null,[u.children&&u.children.length>0?(g(),F(t,{index:u.path,key:u.path},{title:y(()=>[p(r,{name:u.meta.icon},null,8,["name"]),S("span",null,k(e.$t(u.meta.title)),1)]),default:y(()=>[p(o,{chil:u.children},null,8,["chil"])]),_:2},1032,["index"])):(g(),F(w,{index:u.path,key:u.path},{default:y(()=>[!u.meta.isLink||u.meta.isLink&&u.meta.isIframe?(g(),$(H,{key:0},[p(r,{name:u.meta.icon},null,8,["name"]),S("span",null,k(e.$t(u.meta.title)),1)],64)):(g(),$("a",{key:1,href:u.meta.isLink,target:"_blank",rel:"opener",class:"w100"},[p(r,{name:u.meta.icon},null,8,["name"]),R(" "+k(e.$t(u.meta.title)),1)],8,it))]),_:2},1032,["index"]))],64))),256)}var rt=x(ot,[["render",lt]]);const ut=E({name:"layoutBreadcrumb",setup(){const e=O(),s=oe(),l=de(),c=q({breadcrumbList:[],routeSplit:[],routeSplitFirst:"",routeSplitIndex:1}),f=T(()=>e.state.themeConfig.themeConfig),_=T(()=>{u(s.path);const{layout:m,isBreadcrumb:i}=e.state.themeConfig.themeConfig;return m==="classic"||m==="transverse"?"none":i?"":"none"}),r=m=>{const{redirect:i,path:b}=m;i?l.push(i):l.push(b)},o=()=>{e.state.themeConfig.themeConfig.isCollapse=!e.state.themeConfig.themeConfig.isCollapse,t()},t=()=>{N.remove("themeConfig"),N.set("themeConfig",f.value)},w=m=>{m.map(i=>{c.routeSplit.map((b,L,D)=>{c.routeSplitFirst===i.path&&(c.routeSplitFirst+=`/${D[c.routeSplitIndex]}`,c.breadcrumbList.push(i),c.routeSplitIndex++,i.children&&w(i.children))})})},u=m=>{if(!e.state.themeConfig.themeConfig.isBreadcrumb)return!1;c.breadcrumbList=[e.state.routesList.routesList[0]],c.routeSplit=m.split("/"),c.routeSplit.shift(),c.routeSplitFirst=`/${c.routeSplit[0]}`,c.routeSplitIndex=1,w(e.state.routesList.routesList)};return Y(()=>{u(s.path)}),fe(m=>{u(m.path)}),v({onThemeConfigChange:o,isShowBreadcrumb:_,getThemeConfig:f,onBreadcrumbClick:r},P(c))}}),ct={key:0,class:"layout-navbars-breadcrumb-span"},mt=["onClick"];function dt(e,s,l,c,f,_){const r=C("SvgIcon"),o=C("el-breadcrumb-item"),t=C("el-breadcrumb");return g(),$("div",{class:"layout-navbars-breadcrumb",style:ee({display:e.isShowBreadcrumb})},[p(r,{class:"layout-navbars-breadcrumb-icon",name:e.getThemeConfig.isCollapse?"ele-Expand":"ele-Fold",size:16,onClick:e.onThemeConfigChange},null,8,["name","onClick"]),p(t,{class:"layout-navbars-breadcrumb-hide"},{default:y(()=>[p(Ne,{name:"breadcrumb",mode:"out-in"},{default:y(()=>[(g(!0),$(H,null,te(e.breadcrumbList,(w,u)=>(g(),F(o,{key:w.meta.title},{default:y(()=>[u===e.breadcrumbList.length-1?(g(),$("span",ct,[e.getThemeConfig.isBreadcrumbIcon?(g(),F(r,{key:0,name:w.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):B("",!0),R(k(e.$t(w.meta.title)),1)])):(g(),$("a",{key:1,onClick:X(m=>e.onBreadcrumbClick(w),["prevent"])},[e.getThemeConfig.isBreadcrumbIcon?(g(),F(r,{key:0,name:w.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):B("",!0),R(k(e.$t(w.meta.title)),1)],8,mt))]),_:2},1024))),128))]),_:1})]),_:1})],4)}var ft=x(ut,[["render",dt],["__scopeId","data-v-48ce30c8"]]);const Fe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],U=(()=>{const e=Fe[0],s={};for(const l of Fe)if((l==null?void 0:l[1])in document){for(const[f,_]of l.entries())s[e[f]]=_;return s}return!1})(),Ie={change:U.fullscreenchange,error:U.fullscreenerror};let A={request(e=document.documentElement,s){return new Promise((l,c)=>{const f=()=>{A.off("change",f),l()};A.on("change",f);const _=e[U.requestFullscreen](s);_ instanceof Promise&&_.then(f).catch(c)})},exit(){return new Promise((e,s)=>{if(!A.isFullscreen){e();return}const l=()=>{A.off("change",l),e()};A.on("change",l);const c=document[U.exitFullscreen]();c instanceof Promise&&c.then(l).catch(s)})},toggle(e,s){return A.isFullscreen?A.exit():A.request(e,s)},onchange(e){A.on("change",e)},onerror(e){A.on("error",e)},on(e,s){const l=Ie[e];l&&document.addEventListener(l,s,!1)},off(e,s){const l=Ie[e];l&&document.removeEventListener(l,s,!1)},raw:U};Object.defineProperties(A,{isFullscreen:{get:()=>Boolean(document[U.fullscreenElement])},element:{enumerable:!0,get:()=>{var e;return(e=document[U.fullscreenElement])!=null?e:void 0}},isEnabled:{enumerable:!0,get:()=>Boolean(document[U.fullscreenEnabled])}});U||(A={isEnabled:!1});var ce=A;const ht=E({name:"layoutBreadcrumbUserNews",setup(){const e=q({newsList:[{label:"\u5173\u4E8E\u7248\u672C\u53D1\u5E03\u7684\u901A\u77E5",value:"vue-next-admin\uFF0C\u57FA\u4E8E vue3 + CompositionAPI + typescript + vite + element plus\uFF0C\u6B63\u5F0F\u53D1\u5E03\u65F6\u95F4\uFF1A2021\u5E7402\u670828\u65E5\uFF01",time:"2020-12-08"},{label:"\u5173\u4E8E\u5B66\u4E60\u4EA4\u6D41\u7684\u901A\u77E5",value:"QQ\u7FA4\u53F7\u7801 665452019\uFF0C\u6B22\u8FCE\u5C0F\u4F19\u4F34\u5165\u7FA4\u5B66\u4E60\u4EA4\u6D41\u63A2\u8BA8\uFF01",time:"2020-12-08"}]});return v({onAllReadClick:()=>{e.newsList=[]},onGoToGiteeClick:()=>{window.open("https://gitee.com/lyt-top/vue-next-admin")}},P(e))}}),pt={class:"layout-navbars-breadcrumb-user-news"},gt={class:"head-box"},_t={class:"head-box-title"},wt={class:"content-box"},Ct={class:"content-box-msg"},yt={class:"content-box-time"};function bt(e,s,l,c,f,_){const r=C("el-empty");return g(),$("div",pt,[S("div",gt,[S("div",_t,k(e.$t("message.user.newTitle")),1),e.newsList.length>0?(g(),$("div",{key:0,class:"head-box-btn",onClick:s[0]||(s[0]=(...o)=>e.onAllReadClick&&e.onAllReadClick(...o))},k(e.$t("message.user.newBtn")),1)):B("",!0)]),S("div",wt,[e.newsList.length>0?(g(!0),$(H,{key:0},te(e.newsList,(o,t)=>(g(),$("div",{class:"content-box-item",key:t},[S("div",null,k(o.label),1),S("div",Ct,k(o.value),1),S("div",yt,k(o.time),1)]))),128)):(g(),F(r,{key:1,description:e.$t("message.user.newDesc")},null,8,["description"]))]),e.newsList.length>0?(g(),$("div",{key:0,class:"foot-box",onClick:s[1]||(s[1]=(...o)=>e.onGoToGiteeClick&&e.onGoToGiteeClick(...o))},k(e.$t("message.user.newGo")),1)):B("",!0)])}var St=x(ht,[["render",bt],["__scopeId","data-v-304c88e6"]]);const $t=E({name:"layoutBreadcrumbSearch",setup(){const e=Z(),{t:s}=Be(),l=O(),c=de(),f=q({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),_=()=>{f.menuQuery="",f.isShowSearch=!0,w(),ne(()=>{e.value.focus()})},r=()=>{f.isShowSearch=!1},o=(i,b)=>{let L=i?f.tagsViewList.filter(t(i)):f.tagsViewList;b(L)},t=i=>b=>b.path.toLowerCase().indexOf(i.toLowerCase())>-1||b.meta.title.toLowerCase().indexOf(i.toLowerCase())>-1||s(b.meta.title).indexOf(i.toLowerCase())>-1,w=()=>{if(f.tagsViewList.length>0)return!1;l.state.tagsViewRoutes.tagsViewRoutes.map(i=>{i.meta.isHide||f.tagsViewList.push(v({},i))})};return v({layoutMenuAutocompleteRef:e,openSearch:_,closeSearch:r,menuSearch:o,onHandleSelect:i=>{let{path:b,redirect:L}=i;i.meta.isLink&&!i.meta.isIframe?window.open(i.meta.isLink):L?c.push(L):c.push(b),r()},onSearchBlur:()=>{r()}},P(f))}}),Lt={class:"layout-search-dialog"};function vt(e,s,l,c,f,_){const r=C("ele-Search"),o=C("el-icon"),t=C("SvgIcon"),w=C("el-autocomplete"),u=C("el-dialog");return g(),$("div",Lt,[p(u,{modelValue:e.isShowSearch,"onUpdate:modelValue":s[1]||(s[1]=m=>e.isShowSearch=m),width:"300px","destroy-on-close":"",modal:!1,fullscreen:"","show-close":!1},{default:y(()=>[p(w,{modelValue:e.menuQuery,"onUpdate:modelValue":s[0]||(s[0]=m=>e.menuQuery=m),"fetch-suggestions":e.menuSearch,placeholder:e.$t("message.user.searchPlaceholder"),ref:"layoutMenuAutocompleteRef",onSelect:e.onHandleSelect,onBlur:e.onSearchBlur},{prefix:y(()=>[p(o,{class:"el-input__icon"},{default:y(()=>[p(r)]),_:1})]),default:y(({item:m})=>[S("div",null,[p(t,{name:m.meta.icon,class:"mr5"},null,8,["name"]),R(" "+k(e.$t(m.meta.title)),1)])]),_:1},8,["modelValue","fetch-suggestions","placeholder","onSelect","onBlur"])]),_:1},8,["modelValue"])])}var kt=x($t,[["render",vt],["__scopeId","data-v-f0704f82"]]);const Vt=E({name:"layoutBreadcrumbUser",components:{UserNews:St,Search:kt},setup(){const{t:e}=Be(),{proxy:s}=ie(),l=de(),c=O(),f=Z(),_=q({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large"}),r=T(()=>c.state.userInfos.userInfos),o=T(()=>c.state.themeConfig.themeConfig),t=T(()=>{let I="";const{layout:j,isClassicSplitMenu:G}=o.value;return["defaults","columns"].includes(j)||j==="classic"&&!G?I="1":I="",I}),w=()=>{if(!ce.isEnabled)return we.warning("\u6682\u4E0D\u4E0D\u652F\u6301\u5168\u5C4F"),!1;ce.toggle(),ce.on("change",()=>{ce.isFullscreen?_.isScreenfull=!0:_.isScreenfull=!1})},u=()=>{s.mittBus.emit("openSetingsDrawer")},m=I=>{I==="logOut"?Xe({closeOnClickModal:!1,closeOnPressEscape:!1,title:e("message.user.logOutTitle"),message:e("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:e("message.user.logOutConfirm"),cancelButtonText:e("message.user.logOutCancel"),buttonSize:"default",beforeClose:(j,G,se)=>{j==="confirm"?(G.confirmButtonLoading=!0,G.confirmButtonText=e("message.user.logOutExit"),setTimeout(()=>{se(),setTimeout(()=>{G.confirmButtonLoading=!1},300)},700)):se()}}).then(async()=>{K.clear(),await Ye(),we.success(e("message.user.logOutSuccess")),setTimeout(()=>{window.location.href=""},500)}).catch(()=>{}):I==="wareHouse"?window.open("https://gitee.com/lyt-top/vue-next-admin"):l.push(I)},i=()=>{f.value.openSearch()},b=I=>{N.remove("themeConfig"),o.value.globalComponentSize=I,N.set("themeConfig",o.value),M(),window.location.reload()},L=I=>{N.remove("themeConfig"),o.value.globalI18n=I,N.set("themeConfig",o.value),s.$i18n.locale=I,W(),Ee.useTitle()},D=I=>{s.mittBus.emit("getI18nConfig",s.$i18n.messages[I])},W=()=>{switch(N.get("themeConfig").globalI18n){case"zh-cn":_.disabledI18n="zh-cn",D("zh-cn");break;case"en":_.disabledI18n="en",D("en");break;case"zh-tw":_.disabledI18n="zh-tw",D("zh-tw");break}},M=()=>{switch(N.get("themeConfig").globalComponentSize){case"large":_.disabledSize="large";break;case"default":_.disabledSize="default";break;case"small":_.disabledSize="small";break}};return Y(()=>{N.get("themeConfig")&&(W(),M())}),v({getUserInfos:r,onLayoutSetingClick:u,onHandleCommandClick:m,onScreenfullClick:w,onSearchClick:i,onComponentSizeChange:b,onLanguageChange:L,searchRef:f,layoutUserFlexNum:t},P(_))}}),Tt={class:"layout-navbars-breadcrumb-user-icon"},Ft=["title"],It={class:"layout-navbars-breadcrumb-user-icon"},Rt=["title"],Bt=R("\u7B80\u4F53\u4E2D\u6587"),Et=R("English"),xt=R("\u7E41\u9AD4\u4E2D\u6587"),At=["title"],Dt={class:"layout-navbars-breadcrumb-user-icon"},Mt=["title"],zt={class:"layout-navbars-breadcrumb-user-link"},Ht=["src"];function qt(e,s,l,c,f,_){const r=C("el-dropdown-item"),o=C("el-dropdown-menu"),t=C("el-dropdown"),w=C("ele-Search"),u=C("el-icon"),m=C("ele-Bell"),i=C("el-badge"),b=C("UserNews"),L=C("el-popover"),D=C("ele-ArrowDown"),W=C("Search");return g(),$("div",{class:"layout-navbars-breadcrumb-user",style:ee({flex:e.layoutUserFlexNum})},[p(t,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:e.onComponentSizeChange},{dropdown:y(()=>[p(o,null,{default:y(()=>[p(r,{command:"large",disabled:e.disabledSize==="large"},{default:y(()=>[R(k(e.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),p(r,{command:"default",disabled:e.disabledSize==="default"},{default:y(()=>[R(k(e.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),p(r,{command:"small",disabled:e.disabledSize==="small"},{default:y(()=>[R(k(e.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:y(()=>[S("div",Tt,[S("i",{class:"iconfont icon-ziti",title:e.$t("message.user.title0")},null,8,Ft)])]),_:1},8,["onCommand"]),p(t,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:e.onLanguageChange},{dropdown:y(()=>[p(o,null,{default:y(()=>[p(r,{command:"zh-cn",disabled:e.disabledI18n==="zh-cn"},{default:y(()=>[Bt]),_:1},8,["disabled"]),p(r,{command:"en",disabled:e.disabledI18n==="en"},{default:y(()=>[Et]),_:1},8,["disabled"]),p(r,{command:"zh-tw",disabled:e.disabledI18n==="zh-tw"},{default:y(()=>[xt]),_:1},8,["disabled"])]),_:1})]),default:y(()=>[S("div",It,[S("i",{class:ae(["iconfont",e.disabledI18n==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:e.$t("message.user.title1")},null,10,Rt)])]),_:1},8,["onCommand"]),S("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:s[0]||(s[0]=(...M)=>e.onSearchClick&&e.onSearchClick(...M))},[p(u,{title:e.$t("message.user.title2")},{default:y(()=>[p(w)]),_:1},8,["title"])]),S("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:s[1]||(s[1]=(...M)=>e.onLayoutSetingClick&&e.onLayoutSetingClick(...M))},[S("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,At)]),S("div",Dt,[p(L,{placement:"bottom",trigger:"click",width:300},{reference:y(()=>[p(i,{"is-dot":!0},{default:y(()=>[p(u,{title:e.$t("message.user.title4")},{default:y(()=>[p(m)]),_:1},8,["title"])]),_:1})]),default:y(()=>[p(b)]),_:1})]),S("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:s[2]||(s[2]=(...M)=>e.onScreenfullClick&&e.onScreenfullClick(...M))},[S("i",{class:ae(["iconfont",e.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:e.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,Mt)]),p(t,{"show-timeout":70,"hide-timeout":50,onCommand:e.onHandleCommandClick},{dropdown:y(()=>[p(o,null,{default:y(()=>[p(r,{command:"logOut"},{default:y(()=>[R(k(e.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:y(()=>[S("span",zt,[S("img",{src:e.getUserInfos.photo,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,Ht),R(" "+k(e.getUserInfos.userName===""?"common":e.getUserInfos.userName)+" ",1),p(u,{class:"el-icon--right"},{default:y(()=>[p(D)]),_:1})])]),_:1},8,["onCommand"]),p(W,{ref:"searchRef"},null,512)],4)}var Pt=x(Vt,[["render",qt],["__scopeId","data-v-fef4021e"]]);const Ot=E({name:"navMenuHorizontal",components:{SubItem:rt},props:{menuList:{type:Array,default:()=>[]}},setup(e){const{proxy:s}=ie(),l=oe(),c=O(),f=q({defaultActive:null}),_=T(()=>e.menuList),r=m=>{const i=m.wheelDelta||-m.deltaY*40;s.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft=s.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft+i/4},o=()=>{ne(()=>{let m=document.querySelector(".el-menu.el-menu--horizontal li.is-active");if(!m)return!1;s.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft=m.offsetLeft})},t=m=>m.filter(i=>!i.meta.isHide).map(i=>(i=Object.assign({},i),i.children&&(i.children=t(i.children)),i)),w=m=>{const i=m.split("/");let b={};return t(c.state.routesList.routesList).map((L,D)=>{L.path===`/${i[1]}`&&(L.k=D,b.item=[v({},L)],b.children=[v({},L)],L.children&&(b.children=L.children))}),b},u=m=>{const{path:i,meta:b}=m;if(c.state.themeConfig.themeConfig.layout==="classic")f.defaultActive=`/${i.split("/")[1]}`;else{const L=b.isDynamic?b.isDynamicPath.split("/"):i.split("/");L.length>=4&&b.isHide?f.defaultActive=L.splice(0,3).join("/"):f.defaultActive=i}};return Re(()=>{u(l)}),Y(()=>{o()}),fe(m=>{u(m);let{layout:i,isClassicSplitMenu:b}=c.state.themeConfig.themeConfig;i==="classic"&&b&&s.mittBus.emit("setSendClassicChildren",w(m.path))}),v({menuLists:_,onElMenuHorizontalScroll:r},P(f))}}),Nt={class:"el-menu-horizontal-warp"};function Ut(e,s,l,c,f,_){const r=C("SvgIcon"),o=C("SubItem"),t=C("el-sub-menu"),w=C("el-menu-item"),u=C("el-menu"),m=C("el-scrollbar");return g(),$("div",Nt,[p(m,{onWheel:X(e.onElMenuHorizontalScroll,["prevent"]),ref:"elMenuHorizontalScrollRef"},{default:y(()=>[p(u,{router:"","default-active":e.defaultActive,"background-color":"transparent",mode:"horizontal"},{default:y(()=>[(g(!0),$(H,null,te(e.menuLists,i=>(g(),$(H,null,[i.children&&i.children.length>0?(g(),F(t,{index:i.path,key:i.path},{title:y(()=>[p(r,{name:i.meta.icon},null,8,["name"]),S("span",null,k(e.$t(i.meta.title)),1)]),default:y(()=>[p(o,{chil:i.children},null,8,["chil"])]),_:2},1032,["index"])):(g(),F(w,{index:i.path,key:i.path},Ue({_:2},[!i.meta.isLink||i.meta.isLink&&i.meta.isIframe?{name:"title",fn:y(()=>[p(r,{name:i.meta.icon},null,8,["name"]),R(" "+k(e.$t(i.meta.title)),1)])}:{name:"title",fn:y(()=>[S("a",{href:i.meta.isLink,target:"_blank",rel:"opener",class:"w100"},[p(r,{name:i.meta.icon},null,8,["name"]),R(" "+k(e.$t(i.meta.title)),1)],8,["href"])])}]),1032,["index"]))],64))),256))]),_:1},8,["default-active"])]),_:1},8,["onWheel"])])}var Wt=x(Ot,[["render",Ut],["__scopeId","data-v-304d29d2"]]);const jt=E({name:"layoutBreadcrumbIndex",components:{Breadcrumb:ft,User:Pt,Logo:at,Horizontal:Wt},setup(){const{proxy:e}=ie(),s=O(),l=oe(),c=q({menuList:[]}),f=T(()=>{let{isShowLogo:u,layout:m}=s.state.themeConfig.themeConfig;return u&&m==="classic"||u&&m==="transverse"}),_=T(()=>{let{layout:u,isClassicSplitMenu:m}=s.state.themeConfig.themeConfig;return u==="transverse"||m&&u==="classic"}),r=()=>{let{layout:u,isClassicSplitMenu:m}=s.state.themeConfig.themeConfig;if(u==="classic"&&m){c.menuList=o(t(s.state.routesList.routesList));const i=w(l.path);e.mittBus.emit("setSendClassicChildren",i)}else c.menuList=t(s.state.routesList.routesList)},o=u=>(u.map(m=>{m.children&&delete m.children}),u),t=u=>u.filter(m=>!m.meta.isHide).map(m=>(m=Object.assign({},m),m.children&&(m.children=t(m.children)),m)),w=u=>{const m=u.split("/");let i={};return t(s.state.routesList.routesList).map((b,L)=>{b.path===`/${m[1]}`&&(b.k=L,i.item=[v({},b)],i.children=[v({},b)],b.children&&(i.children=b.children))}),i};return Y(()=>{r(),e.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{r()})}),Ce(()=>{e.mittBus.off("getBreadcrumbIndexSetFilterRoutes")}),v({setIsShowLogo:f,isLayoutTransverse:_},P(c))}}),Gt={class:"layout-navbars-breadcrumb-index"};function Qt(e,s,l,c,f,_){const r=C("Logo"),o=C("Breadcrumb"),t=C("Horizontal"),w=C("User");return g(),$("div",Gt,[e.setIsShowLogo?(g(),F(r,{key:0})):B("",!0),p(o),e.isLayoutTransverse?(g(),F(t,{key:1,menuList:e.menuList},null,8,["menuList"])):B("",!0),p(w)])}var Xt=x(jt,[["render",Qt],["__scopeId","data-v-72150eeb"]]);const Yt=E({name:"layoutTagsViewContextmenu",props:{dropdown:{type:Object,default:()=>({x:0,y:0})}},setup(e,{emit:s}){const l=q({isShow:!1,dropdownList:[{contextMenuClickId:0,txt:"message.tagsView.refresh",affix:!1,icon:"ele-RefreshRight"},{contextMenuClickId:1,txt:"message.tagsView.close",affix:!1,icon:"ele-Close"},{contextMenuClickId:2,txt:"message.tagsView.closeOther",affix:!1,icon:"ele-CircleClose"},{contextMenuClickId:3,txt:"message.tagsView.closeAll",affix:!1,icon:"ele-FolderDelete"},{contextMenuClickId:4,txt:"message.tagsView.fullscreen",affix:!1,icon:"iconfont icon-fullscreen"}],item:{},arrowLeft:10}),c=T(()=>e.dropdown.x+117>document.documentElement.clientWidth?{x:document.documentElement.clientWidth-117-5,y:e.dropdown.y}:e.dropdown),f=o=>{s("currentContextmenuClick",Object.assign({},{contextMenuClickId:o},l.item))},_=o=>{l.item=o,o.meta.isAffix?l.dropdownList[1].affix=!0:l.dropdownList[1].affix=!1,r(),setTimeout(()=>{l.isShow=!0},10)},r=()=>{l.isShow=!1};return Y(()=>{document.body.addEventListener("click",r)}),Ce(()=>{document.body.removeEventListener("click",r)}),me(()=>e.dropdown,({x:o})=>{o+117>document.documentElement.clientWidth?l.arrowLeft=117-(document.documentElement.clientWidth-o):l.arrowLeft=10},{deep:!0}),v({dropdowns:c,openContextmenu:_,closeContextmenu:r,onCurrentContextmenuClick:f},P(l))}}),Jt={class:"el-dropdown-menu"},Kt=["onClick"];function Zt(e,s,l,c,f,_){const r=C("SvgIcon");return g(),F(We,{name:"el-zoom-in-center"},{default:y(()=>[ye((g(),$("div",{"aria-hidden":"true",class:"el-dropdown__popper el-popper is-light is-pure custom-contextmenu",role:"tooltip","data-popper-placement":"bottom",style:ee(`top: ${e.dropdowns.y+5}px;left: ${e.dropdowns.x}px;`),key:Math.random()},[S("ul",Jt,[(g(!0),$(H,null,te(e.dropdownList,(o,t)=>(g(),$(H,null,[o.affix?B("",!0):(g(),$("li",{class:"el-dropdown-menu__item","aria-disabled":"false",tabindex:"-1",key:t,onClick:w=>e.onCurrentContextmenuClick(o.contextMenuClickId)},[p(r,{name:o.icon},null,8,["name"]),S("span",null,k(e.$t(o.txt)),1)],8,Kt))],64))),256))]),S("div",{class:"el-popper__arrow",style:ee({left:`${e.arrowLeft}px`})},null,4)],4)),[[be,e.isShow]])]),_:1})}var es=x(Yt,[["render",Zt],["__scopeId","data-v-b2b4434c"]]);const ts=E({name:"layoutTagsView",components:{Contextmenu:es},setup(){const{proxy:e}=ie(),s=Z([]),l=Z(),c=Z(),f=Z(),_=O(),r=oe(),o=de(),t=q({routeActive:"",routePath:r.path,dropdown:{x:"",y:""},tagsRefsIndex:0,tagsViewList:[],sortable:"",tagsViewRoutesList:[]}),w=T(()=>_.state.themeConfig.themeConfig.tagsStyle),u=T(()=>_.state.themeConfig.themeConfig),m=a=>u.value.isShareTagsView?a.path===t.routePath:a.url?a.url===t.routeActive:a.path===t.routeActive,i=a=>{K.set("tagsViewList",a)},b=async()=>{t.routeActive=await Q(r),t.routePath=await r.meta.isDynamic?r.meta.isDynamicPath:r.path,t.tagsViewList=[],t.tagsViewRoutesList=_.state.tagsViewRoutes.tagsViewRoutes,L()},L=async()=>{K.get("tagsViewList")&&u.value.isCacheTagsView?t.tagsViewList=await K.get("tagsViewList"):(await t.tagsViewRoutesList.map(a=>{a.meta.isAffix&&!a.meta.isHide&&(a.url=Q(a),t.tagsViewList.push(v({},a)))}),await M(r.path,r)),Le(u.value.isShareTagsView?t.routePath:t.routeActive)},D=async(a,n)=>{let h=n.meta.isDynamic?n.meta.isDynamicPath:a;if(t.tagsViewList.filter(V=>V.path===h&&_e(n.meta.isDynamic?V.params?V.params:null:V.query?V.query:null,n.meta.isDynamic?n!=null&&n.params?n==null?void 0:n.params:null:n!=null&&n.query?n==null?void 0:n.query:null)).length<=0){let V=t.tagsViewRoutesList.find(z=>z.path===h);if(V.meta.isAffix||V.meta.isLink&&!V.meta.isIframe)return!1;n.meta.isDynamic?V.params=n.params:V.query=n.query,V.url=Q(V),t.tagsViewList.push(v({},V)),i(t.tagsViewList)}},W=(a,n)=>{let h=n.meta.isDynamic?n.meta.isDynamicPath:a;t.tagsViewList.forEach(d=>{d.path===h&&!_e(n.meta.isDynamic?d.params?d.params:null:d.query?d.query:null,n.meta.isDynamic?n!=null&&n.params?n==null?void 0:n.params:null:n!=null&&n.query?n==null?void 0:n.query:null)&&(n.meta.isDynamic?d.params=n.params:d.query=n.query,d.url=Q(d),i(t.tagsViewList))})},M=(a,n)=>{ne(async()=>{let h="";if(n&&n.meta.isDynamic){if(u.value.isShareTagsView?await W(a,n):await D(a,n),t.tagsViewList.some(d=>d.path===n.meta.isDynamicPath))return!1;h=t.tagsViewRoutesList.find(d=>d.path===n.meta.isDynamicPath)}else{if(u.value.isShareTagsView?await W(a,n):await D(a,n),t.tagsViewList.some(d=>d.path===a))return!1;h=t.tagsViewRoutesList.find(d=>d.path===a)}if(h.meta.isLink&&!h.meta.isIframe)return!1;n&&n.meta.isDynamic?h.params=n!=null&&n.params?n==null?void 0:n.params:r.params:h.query=n!=null&&n.query?n==null?void 0:n.query:r.query,h.url=Q(h),await t.tagsViewList.push(v({},h)),await i(t.tagsViewList)})},I=a=>{e.mittBus.emit("onTagsViewRefreshRouterView",a)},j=a=>{t.tagsViewList.map((n,h,d)=>{n.meta.isAffix||(u.value.isShareTagsView?n.path===a:n.url===a)&&(t.tagsViewList.splice(h,1),setTimeout(()=>{(t.tagsViewList.length===h&&u.value.isShareTagsView?t.routePath===a:t.routeActive===a)?d[d.length-1].meta.isDynamic?h!==d.length?o.push({name:d[h].name,params:d[h].params}):o.push({name:d[d.length-1].name,params:d[d.length-1].params}):h!==d.length?o.push({path:d[h].path,query:d[h].query}):o.push({path:d[d.length-1].path,query:d[d.length-1].query}):(t.tagsViewList.length!==h&&u.value.isShareTagsView?t.routePath===a:t.routeActive===a)&&(d[h].meta.isDynamic?o.push({name:d[h].name,params:d[h].params}):o.push({path:d[h].path,query:d[h].query}))},0))}),i(t.tagsViewList)},G=a=>{t.tagsViewList=[],t.tagsViewRoutesList.map(n=>{n.meta.isAffix&&!n.meta.isHide&&t.tagsViewList.push(v({},n))}),M(a,r)},se=()=>{t.tagsViewList=[],t.tagsViewRoutesList.map(a=>{a.meta.isAffix&&!a.meta.isHide&&(t.tagsViewList.push(v({},a)),o.push({path:t.tagsViewList[t.tagsViewList.length-1].path}))}),i(t.tagsViewList)},xe=async a=>{const n=t.tagsViewList.find(h=>u.value.isShareTagsView?h.path===a:h.url===a);n.meta.isDynamic?await o.push({name:n.name,params:n.params}):await o.push({name:n.name,query:n.query}),_.dispatch("tagsViewRoutes/setCurrenFullscreen",!0)},Se=(a,n)=>(K.get("tagsViewList")?K.get("tagsViewList"):t.tagsViewList).find(d=>{if(d.path===a&&_e(d.meta.isDynamic?d.params?d.params:null:d.query?d.query:null,n&&Object.keys(n||{}).length>0?n:null))return d;if(d.path===a&&Object.keys(n||{}).length<=0)return d}),$e=async a=>{const n=a.meta.isDynamic?a.params:a.query;if(!Se(a.path,n))return we({type:"warning",message:"\u8BF7\u6B63\u786E\u8F93\u5165\u8DEF\u5F84\u53CA\u5B8C\u6574\u53C2\u6570\uFF08query\u3001params\uFF09"});const{path:h,name:d,params:V,query:z,meta:le,url:J}=Se(a.path,n);switch(a.contextMenuClickId){case 0:le.isDynamic?await o.push({name:d,params:V}):await o.push({path:h,query:z}),I(r.fullPath);break;case 1:j(u.value.isShareTagsView?h:J);break;case 2:le.isDynamic?await o.push({name:d,params:V}):await o.push({path:h,query:z}),G(h);break;case 3:se();break;case 4:xe(u.value.isShareTagsView?h:J);break}},Ae=(a,n)=>{const{clientX:h,clientY:d}=n;t.dropdown.x=h,t.dropdown.y=d,c.value.openContextmenu(a)},De=(a,n)=>{t.tagsRefsIndex=n,o.push(a)},Q=a=>{let n=a.query&&Object.keys(a.query).length>0?a.query:a.params;if(!n||Object.keys(n).length<=0)return a.path;let h="";for(let d in n)h+=n[d];return`${a.meta.isDynamic?a.meta.isDynamicPath:a.path}-${h}`},Me=()=>{e.$refs.scrollbarRef.update()},ze=a=>{e.$refs.scrollbarRef.$refs.wrap$.scrollLeft+=a.wheelDelta/4},He=()=>{ne(()=>{if(s.value.length<=0)return!1;let a=s.value[t.tagsRefsIndex],n=t.tagsRefsIndex,h=s.value.length,d=s.value[0],V=s.value[s.value.length-1],z=e.$refs.scrollbarRef.$refs.wrap$,le=z.scrollWidth,J=z.offsetWidth,ve=z.scrollLeft,ge=s.value[t.tagsRefsIndex-1],ke=s.value[t.tagsRefsIndex+1],re="",ue="";a===d?z.scrollLeft=0:a===V?z.scrollLeft=le-J:(n===0?re=d.offsetLeft-5:re=(ge==null?void 0:ge.offsetLeft)-5,n===h?ue=V.offsetLeft+V.offsetWidth+5:ue=ke.offsetLeft+ke.offsetWidth+5,ue>ve+J?z.scrollLeft=ue-J:re<ve&&(z.scrollLeft=re)),Me()})},Le=a=>{ne(async()=>{let n=await t.tagsViewList;t.tagsRefsIndex=n.findIndex(h=>u.value.isShareTagsView?h.path===a:h.url===a),He()})},he=async()=>{const a=document.querySelector(".layout-navbars-tagsview-ul");if(!a)return!1;t.sortable.el&&t.sortable.destroy(),t.sortable=Ke.create(a,{animation:300,dataIdAttr:"data-url",disabled:!u.value.isSortableTagsView,onEnd:()=>{const n=[];t.sortable.toArray().map(h=>{t.tagsViewList.map(d=>{d.url===h&&n.push(v({},d))})}),i(n)}})},pe=async()=>{await he(),Ee.isMobile()&&t.sortable.el&&t.sortable.destroy()};return Re(()=>{pe(),window.addEventListener("resize",pe),e.mittBus.on("onCurrentContextmenuClick",a=>{$e(a)}),e.mittBus.on("openOrCloseSortable",()=>{he()}),e.mittBus.on("openShareTagsView",()=>{u.value.isShareTagsView&&(o.push("/home"),t.tagsViewList=[],t.tagsViewRoutesList.map(a=>{a.meta.isAffix&&!a.meta.isHide&&(a.url=Q(a),t.tagsViewList.push(v({},a)))}))})}),Ce(()=>{e.mittBus.off("onCurrentContextmenuClick"),e.mittBus.off("openOrCloseSortable"),e.mittBus.off("openShareTagsView"),window.removeEventListener("resize",pe)}),je(()=>{s.value=[]}),Y(()=>{b(),he()}),fe(async a=>{t.routeActive=Q(a),t.routePath=a.meta.isDynamic?a.meta.isDynamicPath:a.path,await M(a.path,a),Le(u.value.isShareTagsView?t.routePath:t.routeActive)}),me(_.state,a=>{if(a.tagsViewRoutes.tagsViewRoutes.length===t.tagsViewRoutesList.length)return!1;b()}),v({isActive:m,onContextmenu:Ae,onTagsClick:De,tagsRefs:s,contextmenuRef:c,scrollbarRef:l,tagsUlRef:f,onHandleScroll:ze,getThemeConfig:u,setTagsStyle:w,refreshCurrentTagsView:I,closeCurrentTagsView:j,onCurrentContextmenuClick:$e},P(t))}}),ss=["data-url","onContextmenu","onClick"],ns={key:0,class:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont"};function as(e,s,l,c,f,_){const r=C("SvgIcon"),o=C("el-scrollbar"),t=C("Contextmenu");return g(),$("div",{class:ae(["layout-navbars-tagsview",{"layout-navbars-tagsview-shadow":e.getThemeConfig.layout==="classic"}])},[p(o,{ref:"scrollbarRef",onWheel:X(e.onHandleScroll,["prevent"])},{default:y(()=>[S("ul",{class:ae(["layout-navbars-tagsview-ul",e.setTagsStyle]),ref:"tagsUlRef"},[(g(!0),$(H,null,te(e.tagsViewList,(w,u)=>(g(),$("li",{key:u,class:ae(["layout-navbars-tagsview-ul-li",{"is-active":e.isActive(w)}]),"data-url":w.url,onContextmenu:X(m=>e.onContextmenu(w,m),["prevent"]),onClick:m=>e.onTagsClick(w,u),ref_for:!0,ref:m=>{m&&(e.tagsRefs[u]=m)}},[e.isActive(w)?(g(),$("i",ns)):B("",!0),!e.isActive(w)&&e.getThemeConfig.isTagsviewIcon?(g(),F(r,{key:1,name:w.meta.icon,class:"pr5"},null,8,["name"])):B("",!0),S("span",null,k(e.$t(w.meta.title)),1),e.isActive(w)?(g(),$(H,{key:2},[p(r,{name:"ele-RefreshRight",class:"ml5 layout-navbars-tagsview-ul-li-refresh",onClick:s[0]||(s[0]=X(m=>e.refreshCurrentTagsView(e.$route.fullPath),["stop"]))}),w.meta.isAffix?B("",!0):(g(),F(r,{key:0,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-active",onClick:X(m=>e.closeCurrentTagsView(e.getThemeConfig.isShareTagsView?w.path:w.url),["stop"])},null,8,["onClick"]))],64)):B("",!0),w.meta.isAffix?B("",!0):(g(),F(r,{key:3,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-three",onClick:X(m=>e.closeCurrentTagsView(e.getThemeConfig.isShareTagsView?w.path:w.url),["stop"])},null,8,["onClick"]))],42,ss))),128))],2)]),_:1},8,["onWheel"]),p(t,{dropdown:e.dropdown,ref:"contextmenuRef",onCurrentContextmenuClick:e.onCurrentContextmenuClick},null,8,["dropdown","onCurrentContextmenuClick"])],2)}var os=x(ts,[["render",as],["__scopeId","data-v-4fdbdc06"]]);const is=E({name:"layoutNavBars",components:{BreadcrumbIndex:Xt,TagsView:os},setup(){const e=O();return{setShowTagsView:T(()=>{let{layout:l,isTagsview:c}=e.state.themeConfig.themeConfig;return l!=="classic"&&c})}}}),ls={class:"layout-navbars-container"};function rs(e,s,l,c,f,_){const r=C("BreadcrumbIndex"),o=C("TagsView");return g(),$("div",ls,[p(r),e.setShowTagsView?(g(),F(o,{key:0})):B("",!0)])}var us=x(is,[["render",rs],["__scopeId","data-v-d25df07a"]]);const cs=E({name:"layoutHeader",components:{NavBarsIndex:us},setup(){const e=O(),s=T(()=>{let{isTagsview:c,layout:f}=e.state.themeConfig.themeConfig;return c&&f!=="classic"?"84px":"50px"}),l=T(()=>e.state.tagsViewRoutes.isTagsViewCurrenFull);return{setHeaderHeight:s,isTagsViewCurrenFull:l}}});function ms(e,s,l,c,f,_){const r=C("NavBarsIndex"),o=C("el-header");return ye((g(),F(o,{class:"layout-header",height:e.setHeaderHeight},{default:y(()=>[p(r)]),_:1},8,["height"])),[[be,!e.isTagsViewCurrenFull]])}var Vs=x(cs,[["render",ms]]);const ds=E({name:"layoutFooter",setup(){const e=q({isDelayFooter:!0});return fe(()=>{setTimeout(()=>{e.isDelayFooter=!1,setTimeout(()=>{e.isDelayFooter=!0},800)},0)}),v({},P(e))}}),fs=e=>(Ge("data-v-294721da"),e=e(),Qe(),e),hs={class:"layout-footer mt15"},ps=fs(()=>S("div",{class:"layout-footer-warp"},[S("div",null,"vue-next-admin\uFF0CMade by lyt with \u2764\uFE0F"),S("div",{class:"mt5"},"\u6DF1\u5733\u5E02 xxx \u516C\u53F8\u7248\u6743\u6240\u6709")],-1)),gs=[ps];function _s(e,s,l,c,f,_){return ye((g(),$("div",hs,gs,512)),[[be,e.isDelayFooter]])}var ws=x(ds,[["render",_s],["__scopeId","data-v-294721da"]]);const Cs=E({name:"layoutMain",components:{LayoutParentView:Ze,Footer:ws},setup(){const{proxy:e}=ie(),s=oe(),l=O(),c=q({headerHeight:"",currentRouteMeta:{}}),f=T(()=>l.state.themeConfig.themeConfig),_=()=>{const o=c.currentRouteMeta.isLink&&c.currentRouteMeta.isIframe;let{isTagsview:t}=l.state.themeConfig.themeConfig;return t?c.headerHeight=o?"85px":"114px":c.headerHeight="51px"},r=()=>{c.currentRouteMeta=s.meta};return Y(async()=>{await r(),_()}),me(()=>s.path,()=>{c.currentRouteMeta=s.meta;const o=c.currentRouteMeta.isLink&&c.currentRouteMeta.isIframe;c.headerHeight=o?"85px":"114px",e.$refs.layoutScrollbarRef.update()}),me(l.state.themeConfig.themeConfig,o=>{c.currentRouteMeta=s.meta;const t=c.currentRouteMeta.isLink&&c.currentRouteMeta.isIframe;if(c.headerHeight=o.isTagsview?t?"85px":"114px":"51px",o.isFixedHeaderChange!==o.isFixedHeader){if(!e.$refs.layoutScrollbarRef)return!1;e.$refs.layoutScrollbarRef.update()}}),v({getThemeConfig:f},P(c))}});function ys(e,s,l,c,f,_){const r=C("LayoutParentView"),o=C("Footer"),t=C("el-scrollbar"),w=C("el-main");return g(),F(w,{class:"layout-main"},{default:y(()=>[p(t,{class:"layout-scrollbar",ref:"layoutScrollbarRef",style:ee({padding:e.currentRouteMeta.isLink&&e.currentRouteMeta.isIframe?0:"",transition:"padding 0.3s ease-in-out"})},{default:y(()=>[p(r,{style:ee({minHeight:`calc(100vh - ${e.headerHeight})`})},null,8,["style"]),e.getThemeConfig.isFooter?(g(),F(o,{key:0})):B("",!0)]),_:1},8,["style"])]),_:1})}var Ts=x(Cs,[["render",ys]]);export{Vs as H,at as L,Ts as M,rt as S,os as T};
