var Me=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var je=(xt,K,c)=>K in xt?Me(xt,K,{enumerable:!0,configurable:!0,writable:!0,value:c}):xt[K]=c,ke=(xt,K)=>{for(var c in K||(K={}))Le.call(K,c)&&je(xt,c,K[c]);if(Ae)for(var c of Ae(K))Fe.call(K,c)&&je(xt,c,K[c]);return xt};import{d as Ie,h as ve,a0 as Re,z as Ne,k as Be,ad as Ge,ac as He,a as Jt,T as Ue,b as Nt,W as qt,P as Ye,F as be,a5 as ye,K as _e,n as me,Z as ne,o as Qt,V as Pe,J as Te,_ as Xe}from"./vue.1646666697251.js";import{f as kt,_ as Ve,u as We,h as ze,b as ae,E as qe}from"./index.1646666697251.js";import{S as $e}from"./sortable.esm.1646666697251.js";import Ke from"./index.164666669725147.js";import Ze from"./help.1646666697251.js";import Je from"./index.164666669725148.js";import Qe from"./index.164666669725149.js";import"./line.1646666697251.js";import"./node.1646666697251.js";import"./echarts.1646666697251.js";var Ee={};(function(xt){(function(){typeof Math.sgn=="undefined"&&(Math.sgn=function(f){return f==0?0:f>0?1:-1});var K={subtract:function(f,x){return{x:f.x-x.x,y:f.y-x.y}},dotProduct:function(f,x){return f.x*x.x+f.y*x.y},square:function(f){return Math.sqrt(f.x*f.x+f.y*f.y)},scale:function(f,x){return{x:f.x*x,y:f.y*x}}},c=64,V=Math.pow(2,-c-1),nt=function(f,x){for(var N=[],U=W(f,x),Y=x.length-1,n=2*Y-1,o=h(U,n,N,0),t=K.subtract(f,x[0]),g=K.square(t),b=0,I=0;I<o;I++){t=K.subtract(f,y(x,Y,N[I],null,null));var F=K.square(t);F<g&&(g=F,b=N[I])}return t=K.subtract(f,x[Y]),F=K.square(t),F<g&&(g=F,b=1),{location:b,distance:g}},Z=function(f,x){var N=nt(f,x);return{point:y(x,x.length-1,N.location,null,null),location:N.location}},W=function(f,x){for(var N=x.length-1,U=2*N-1,Y=[],n=[],o=[],t=[],g=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],b=0;b<=N;b++)Y[b]=K.subtract(x[b],f);for(var b=0;b<=N-1;b++)n[b]=K.subtract(x[b+1],x[b]),n[b]=K.scale(n[b],3);for(var I=0;I<=N-1;I++)for(var F=0;F<=N;F++)o[I]||(o[I]=[]),o[I][F]=K.dotProduct(n[I],Y[F]);for(b=0;b<=U;b++)t[b]||(t[b]=[]),t[b].y=0,t[b].x=parseFloat(b)/U;for(var X=N,R=N-1,z=0;z<=X+R;z++){var at=Math.max(0,z-R),st=Math.min(z,X);for(b=at;b<=st;b++){var it=z-b;t[b+it].y+=o[it][b]*g[it][b]}}return t},h=function(f,x,N,U){var Y=[],n=[],o,t,g=[],b=[];switch(M(f,x)){case 0:return 0;case 1:{if(U>=c)return N[0]=(f[0].x+f[x].x)/2,1;if(l(f,x))return N[0]=i(f,x),1;break}}y(f,x,.5,Y,n),o=h(Y,x,g,U+1),t=h(n,x,b,U+1);for(var I=0;I<o;I++)N[I]=g[I];for(var I=0;I<t;I++)N[I+o]=b[I];return o+t},M=function(f,x){var N=0,U,Y;U=Y=Math.sgn(f[0].y);for(var n=1;n<=x;n++)U=Math.sgn(f[n].y),U!=Y&&N++,Y=U;return N},l=function(f,x){var N,U,Y,n,o,t,g,b,I,F,X,R,z,at,st,it;t=f[0].y-f[x].y,g=f[x].x-f[0].x,b=f[0].x*f[x].y-f[x].x*f[0].y;var rt,pt;rt=pt=0;for(var dt=1;dt<x;dt++){var lt=t*f[dt].x+g*f[dt].y+b;lt>rt?rt=lt:lt<pt&&(pt=lt)}return X=0,R=1,z=0,at=t,st=g,it=b-rt,I=X*st-at*R,F=1/I,U=(R*it-st*z)*F,at=t,st=g,it=b-pt,I=X*st-at*R,F=1/I,Y=(R*it-st*z)*F,n=Math.min(U,Y),o=Math.max(U,Y),N=o-n,N<V?1:0},i=function(f,x){var N=1,U=0,Y=f[x].x-f[0].x,n=f[x].y-f[0].y,o=f[0].x-0,t=f[0].y-0,g=Y*U-n*N,b=1/g,I=(Y*t-n*o)*b;return 0+N*I},y=function(f,x,N,U,Y){for(var n=[[]],o=0;o<=x;o++)n[0][o]=f[o];for(var t=1;t<=x;t++)for(var o=0;o<=x-t;o++)n[t]||(n[t]=[]),n[t][o]||(n[t][o]={}),n[t][o].x=(1-N)*n[t-1][o].x+N*n[t-1][o+1].x,n[t][o].y=(1-N)*n[t-1][o].y+N*n[t-1][o+1].y;if(U!=null)for(o=0;o<=x;o++)U[o]=n[o][0];if(Y!=null)for(o=0;o<=x;o++)Y[o]=n[x-o][o];return n[x][0]},S={},T=function(f){var x=S[f];if(!x){x=[];var N=function(){return function(F){return Math.pow(F,f)}},U=function(){return function(F){return Math.pow(1-F,f)}},Y=function(F){return function(X){return F}},n=function(){return function(F){return F}},o=function(){return function(F){return 1-F}},t=function(F){return function(X){for(var R=1,z=0;z<F.length;z++)R=R*F[z](X);return R}};x.push(new N);for(var g=1;g<f;g++){for(var b=[new Y(f)],I=0;I<f-g;I++)b.push(new n);for(var I=0;I<g;I++)b.push(new o);x.push(new t(b))}x.push(new U),S[f]=x}return x},D=function(f,x){for(var N=T(f.length-1),U=0,Y=0,n=0;n<f.length;n++)U=U+f[n].x*N[n](x),Y=Y+f[n].y*N[n](x);return{x:U,y:Y}},p=function(f,x){return Math.sqrt(Math.pow(f.x-x.x,2)+Math.pow(f.y-x.y,2))},e=function(f){return f[0].x===f[1].x&&f[0].y===f[1].y},O=function(f,x,N){if(e(f))return{point:f[0],location:x};for(var U=D(f,x),Y=0,n=x,o=N>0?1:-1,t=null;Y<Math.abs(N);)n+=.005*o,t=D(f,n),Y+=p(t,U),U=t;return{point:t,location:n}},L=function(f){var x=new Date().getTime();if(e(f))return 0;for(var N=D(f,0),U=0,Y=0,n=1,o=null;Y<1;)Y+=.005*n,o=D(f,Y),U+=p(o,N),N=o;return console.log("length",new Date().getTime()-x),U},G=function(f,x,N){return O(f,x,N).point},B=function(f,x,N){return O(f,x,N).location},w=function(f,x){var N=D(f,x),U=D(f.slice(0,f.length-1),x),Y=U.y-N.y,n=U.x-N.x;return Y===0?1/0:Math.atan(Y/n)},j=function(f,x,N){var U=O(f,x,N);return U.location>1&&(U.location=1),U.location<0&&(U.location=0),w(f,U.location)},r=function(f,x,N,U){U=U==null?0:U;var Y=O(f,x,U),n=w(f,Y.location),o=Math.atan(-1/n),t=N/2*Math.sin(o),g=N/2*Math.cos(o);return[{x:Y.point.x+g,y:Y.point.y+t},{x:Y.point.x-g,y:Y.point.y-t}]},d=function(f,x,N,U,Y){var n=U-x,o=f-N,t=f*(x-U)+x*(N-f),g=a(Y),b=[n*g[0][0]+o*g[1][0],n*g[0][1]+o*g[1][1],n*g[0][2]+o*g[1][2],n*g[0][3]+o*g[1][3]+t],I=v.apply(null,b),F=[];if(I!=null)for(var X=0;X<3;X++){var R=I[X],z=Math.pow(R,2),at=Math.pow(R,3),st=[g[0][0]*at+g[0][1]*z+g[0][2]*R+g[0][3],g[1][0]*at+g[1][1]*z+g[1][2]*R+g[1][3]],it;N-f!==0?it=(st[0]-f)/(N-f):it=(st[1]-x)/(U-x),R>=0&&R<=1&&it>=0&&it<=1&&F.push(st)}return F},u=function(f,x,N,U,Y){var n=[];return n.push.apply(n,d(f,x,f+N,x,Y)),n.push.apply(n,d(f+N,x,f+N,x+U,Y)),n.push.apply(n,d(f+N,x+U,f,x+U,Y)),n.push.apply(n,d(f,x+U,f,x,Y)),n},C=function(f,x){var N=[];return N.push.apply(N,d(f.x,f.y,f.x+f.w,f.y,x)),N.push.apply(N,d(f.x+f.w,f.y,f.x+f.w,f.y+f.h,x)),N.push.apply(N,d(f.x+f.w,f.y+f.h,f.x,f.y+f.h,x)),N.push.apply(N,d(f.x,f.y+f.h,f.x,f.y,x)),N};function m(f,x){return[-f[0][x]+3*f[1][x]+-3*f[2][x]+f[3][x],3*f[0][x]-6*f[1][x]+3*f[2][x],-3*f[0][x]+3*f[1][x],f[0][x]]}function a(f){return[m(f,"x"),m(f,"y")]}function P(f){return f<0?-1:f>0?1:0}function v(f,x,N,U){var Y=x/f,n=N/f,o=U/f,t=(3*n-Math.pow(Y,2))/9,g=(9*Y*n-27*o-2*Math.pow(Y,3))/54,b=Math.pow(t,3)+Math.pow(g,2),I,F,X=[];if(b>=0)I=P(g+Math.sqrt(b))*Math.pow(Math.abs(g+Math.sqrt(b)),1/3),F=P(g-Math.sqrt(b))*Math.pow(Math.abs(g-Math.sqrt(b)),1/3),X[0]=-Y/3+(I+F),X[1]=-Y/3-(I+F)/2,X[2]=-Y/3-(I+F)/2,Math.abs(Math.sqrt(3)*(I-F)/2)!==0&&(X[1]=-1,X[2]=-1);else{var R=Math.acos(g/Math.sqrt(-Math.pow(t,3)));X[0]=2*Math.sqrt(-t)*Math.cos(R/3)-Y/3,X[1]=2*Math.sqrt(-t)*Math.cos((R+2*Math.PI)/3)-Y/3,X[2]=2*Math.sqrt(-t)*Math.cos((R+4*Math.PI)/3)-Y/3}for(var z=0;z<3;z++)(X[z]<0||X[z]>1)&&(X[z]=-1);return X}var E=this.jsBezier={distanceFromCurve:nt,gradientAtPoint:w,gradientAtPointAlongCurveFrom:j,nearestPointOnCurve:Z,pointOnCurve:D,pointAlongCurveFrom:G,perpendicularToCurveAt:r,locationAlongCurveFrom:B,getLength:L,lineIntersection:d,boxIntersection:u,boundingBoxIntersection:C,version:"0.9.0"};xt.jsBezier=E}).call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.Biltong={version:"0.4.0"};xt.Biltong=c;var V=function(l){return Object.prototype.toString.call(l)==="[object Array]"},nt=function(l,i,y){return l=V(l)?l:[l.x,l.y],i=V(i)?i:[i.x,i.y],y(l,i)},Z=c.gradient=function(l,i){return nt(l,i,function(y,S){return S[0]==y[0]?S[1]>y[1]?1/0:-1/0:S[1]==y[1]?S[0]>y[0]?0:-0:(S[1]-y[1])/(S[0]-y[0])})};c.normal=function(l,i){return-1/Z(l,i)},c.lineLength=function(l,i){return nt(l,i,function(y,S){return Math.sqrt(Math.pow(S[1]-y[1],2)+Math.pow(S[0]-y[0],2))})};var W=c.quadrant=function(l,i){return nt(l,i,function(y,S){return S[0]>y[0]||S[0]==y[0]?S[1]>y[1]?2:1:S[1]>y[1]?3:4})};c.theta=function(l,i){return nt(l,i,function(y,S){var T=Z(y,S),D=Math.atan(T),p=W(y,S);return(p==4||p==3)&&(D+=Math.PI),D<0&&(D+=2*Math.PI),D})},c.intersects=function(l,i){var y=l.x,S=l.x+l.w,T=l.y,D=l.y+l.h,p=i.x,e=i.x+i.w,O=i.y,L=i.y+i.h;return y<=p&&p<=S&&T<=O&&O<=D||y<=e&&e<=S&&T<=O&&O<=D||y<=p&&p<=S&&T<=L&&L<=D||y<=e&&p<=S&&T<=L&&L<=D||p<=y&&y<=e&&O<=T&&T<=L||p<=S&&S<=e&&O<=T&&T<=L||p<=y&&y<=e&&O<=D&&D<=L||p<=S&&y<=e&&O<=D&&D<=L},c.encloses=function(l,i,y){var S=l.x,T=l.x+l.w,D=l.y,p=l.y+l.h,e=i.x,O=i.x+i.w,L=i.y,G=i.y+i.h,B=function(w,j,r,d){return y?w<=j&&r>=d:w<j&&r>d};return B(S,e,T,O)&&B(D,L,p,G)};var h=[null,[1,-1],[1,1],[-1,1],[-1,-1]],M=[null,[-1,-1],[-1,1],[1,1],[1,-1]];c.pointOnLine=function(l,i,y){var S=Z(l,i),T=W(l,i),D=y>0?h[T]:M[T],p=Math.atan(S),e=Math.abs(y*Math.sin(p))*D[1],O=Math.abs(y*Math.cos(p))*D[0];return{x:l.x+O,y:l.y+e}},c.perpendicularLineTo=function(l,i,y){var S=Z(l,i),T=Math.atan(-1/S),D=y/2*Math.sin(T),p=y/2*Math.cos(T);return[{x:i.x+p,y:i.y+D},{x:i.x-p,y:i.y-D}]}}.call(typeof window!="undefined"?window:kt),function(){function K(n,o,t,g,b,I,F,X){return new Touch({target:o,identifier:Y(),pageX:t,pageY:g,screenX:b,screenY:I,clientX:F||b,clientY:X||I})}function c(){var n=[];return Array.prototype.push.apply(n,arguments),n.item=function(o){return this[o]},n}function V(n,o,t,g,b,I,F,X){return c(K.apply(null,arguments))}var nt=this,Z=function(n,o,t){t=t||n.parentNode;for(var g=t.querySelectorAll(o),b=0;b<g.length;b++)if(g[b]===n)return!0;return!1},W=function(n){return typeof n=="string"||n.constructor===String?document.getElementById(n):n},h=function(n){return n.srcElement||n.target},M=function(n,o,t,g){if(g){if(typeof n.path!="undefined"&&n.path.indexOf)return{path:n.path,end:n.path.indexOf(t)};var b={path:[],end:-1},I=function(F){b.path.push(F),F===t?b.end=b.path.length-1:F.parentNode!=null&&I(F.parentNode)};return I(o),b}else return{path:[o],end:1}},l=function(n,o){for(var t=0,g=n.length;t<g&&n[t]!=o;t++);t<n.length&&n.splice(t,1)},i=1,y=function(n,o,t){var g=i++;return n.__ta=n.__ta||{},n.__ta[o]=n.__ta[o]||{},n.__ta[o][g]=t,t.__tauid=g,g},S=function(n,o,t){if(n.__ta&&n.__ta[o]&&delete n.__ta[o][t.__tauid],t.__taExtra){for(var g=0;g<t.__taExtra.length;g++)N(n,t.__taExtra[g][0],t.__taExtra[g][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},T=function(n,o,t,g){if(n==null)return t;var b=n.split(","),I=function(F){I.__tauid=t.__tauid;var X=h(F),R=X,z=M(F,X,o,n!=null);if(z.end!=-1)for(var at=0;at<z.end;at++){R=z.path[at];for(var st=0;st<b.length;st++)Z(R,b[st],o)&&t.apply(R,arguments)}};return D(t,g,I),I},D=function(n,o,t){n.__taExtra=n.__taExtra||[],n.__taExtra.push([o,t])},p=function(n,o,t,g){if(w&&r[o]){var b=T(g,n,t,r[o]);x(n,r[o],b,t)}o==="focus"&&n.getAttribute("tabindex")==null&&n.setAttribute("tabindex","1"),x(n,o,T(g,n,t,o),t)},e=function(n,o,t,g){if(n.__taSmartClicks==null){var b=function(X){n.__tad=m(X)},I=function(X){n.__tau=m(X)},F=function(X){if(n.__tad&&n.__tau&&n.__tad[0]===n.__tau[0]&&n.__tad[1]===n.__tau[1])for(var R=0;R<n.__taSmartClicks.length;R++)n.__taSmartClicks[R].apply(h(X),[X])};p(n,"mousedown",b,g),p(n,"mouseup",I,g),p(n,"click",F,g),n.__taSmartClicks=[]}n.__taSmartClicks.push(t),t.__taUnstore=function(){l(n.__taSmartClicks,t)}},O={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},L=function(n,o){return function(t,g,b,I){if(g=="contextmenu"&&j)p(t,g,b,I);else{if(t.__taTapHandler==null){var F=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},X=function(st){for(var it=h(st),rt=M(st,it,t,I!=null),pt=!1,dt=0;dt<rt.end;dt++){if(pt)return;it=rt.path[dt];for(var lt=0;lt<F.downSelectors.length;lt++)if(F.downSelectors[lt]==null||Z(it,F.downSelectors[lt],t)){F.down=!0,setTimeout(z,n),setTimeout(at,o),pt=!0;break}}},R=function(st){if(F.down){var it=h(st),rt,pt;F.taps++;var dt=f(st);for(var lt in O)if(O.hasOwnProperty(lt)){var bt=O[lt];if(bt.touches===dt&&(bt.taps===1||bt.taps===F.taps))for(var gt=0;gt<F[lt].length;gt++){pt=M(st,it,t,F[lt][gt][1]!=null);for(var J=0;J<pt.end;J++)if(rt=pt.path[J],F[lt][gt][1]==null||Z(rt,F[lt][gt][1],t)){F[lt][gt][0].apply(rt,[st]);break}}}}},z=function(){F.down=!1},at=function(){F.taps=0};p(t,"mousedown",X),p(t,"mouseup",R)}t.__taTapHandler.downSelectors.push(I),t.__taTapHandler[g].push([b,I]),b.__taUnstore=function(){l(t.__taTapHandler[g],b)}}}},G=function(n,o,t,g){for(var b in t.__tamee[n])t.__tamee[n].hasOwnProperty(b)&&t.__tamee[n][b].apply(g,[o])},B=function(){var n=[];return function(o,t,g,b){if(!o.__tamee){o.__tamee={over:!1,mouseenter:[],mouseexit:[]};var I=function(X){var R=h(X);(b==null&&R==o&&!o.__tamee.over||Z(R,b,o)&&(R.__tamee==null||!R.__tamee.over))&&(G("mouseenter",X,o,R),R.__tamee=R.__tamee||{},R.__tamee.over=!0,n.push(R))},F=function(X){for(var R=h(X),z=0;z<n.length;z++)R==n[z]&&!Z(X.relatedTarget||X.toElement,"*",R)&&(R.__tamee.over=!1,n.splice(z,1),G("mouseexit",X,o,R))};x(o,"mouseover",T(b,o,I,"mouseover"),I),x(o,"mouseout",T(b,o,F,"mouseout"),F)}g.__taUnstore=function(){delete o.__tamee[t][g.__tauid]},y(o,t,g),o.__tamee[t][g.__tauid]=g}},w="ontouchstart"in document.documentElement||navigator.maxTouchPoints,j="onmousedown"in document.documentElement,r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},d=function(){var n=-1;if(navigator.appName=="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(n=parseFloat(RegExp.$1))}return n}(),u=d>-1&&d<9,C=function(n,o){if(n==null)return[0,0];var t=E(n),g=v(t,0);return[g[o+"X"],g[o+"Y"]]},m=function(n){return n==null?[0,0]:u?[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop]:C(n,"page")},a=function(n){return C(n,"screen")},P=function(n){return C(n,"client")},v=function(n,o){return n.item?n.item(o):n[o]},E=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},f=function(n){return E(n).length},x=function(n,o,t,g){if(y(n,o,t),g.__tauid=t.__tauid,n.addEventListener)n.addEventListener(o,t,!1);else if(n.attachEvent){var b=o+t.__tauid;n["e"+b]=t,n[b]=function(){n["e"+b]&&n["e"+b](window.event)},n.attachEvent("on"+o,n[b])}},N=function(n,o,t){t!=null&&U(n,function(){var g=W(this);if(S(g,o,t),t.__tauid!=null){if(g.removeEventListener)g.removeEventListener(o,t,!1),w&&r[o]&&g.removeEventListener(r[o],t,!1);else if(this.detachEvent){var b=o+t.__tauid;g[b]&&g.detachEvent("on"+o,g[b]),g[b]=null,g["e"+b]=null}}t.__taTouchProxy&&N(n,t.__taTouchProxy[1],t.__taTouchProxy[0])})},U=function(n,o){if(n!=null){n=typeof Window!="undefined"&&typeof n.top!="unknown"&&n==n.top?[n]:typeof n!="string"&&n.tagName==null&&n.length!=null?n:typeof n=="string"?document.querySelectorAll(n):[n];for(var t=0;t<n.length;t++)o.apply(n[t])}},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,t=n=="x"?o:o&3|8;return t.toString(16)})};nt.Mottle=function(n){n=n||{};var o=n.clickThreshold||250,t=n.dblClickThreshold||450,g=new B,b=new L(o,t),I=n.smartClicks,F=function(X,R,z,at){z!=null&&U(X,function(){var st=W(this);I&&R==="click"?e(st,R,z,at):R==="tap"||R==="dbltap"||R==="contextmenu"?b(st,R,z,at):R==="mouseenter"||R=="mouseexit"?g(st,R,z,at):p(st,R,z,at)})};this.remove=function(X){return U(X,function(){var R=W(this);if(R.__ta){for(var z in R.__ta)if(R.__ta.hasOwnProperty(z))for(var at in R.__ta[z])R.__ta[z].hasOwnProperty(at)&&N(R,z,R.__ta[z][at])}R.parentNode&&R.parentNode.removeChild(R)}),this},this.on=function(X,R,z,at){var st=arguments[0],it=arguments.length==4?arguments[2]:null,rt=arguments[1],pt=arguments[arguments.length-1];return F(st,rt,pt,it),this},this.off=function(X,R,z){return N(X,R,z),this},this.trigger=function(X,R,z,at){var st=j&&(typeof MouseEvent=="undefined"||z==null||z.constructor===MouseEvent),it=w&&!j&&r[R]?r[R]:R,rt=!(w&&!j&&r[R]),pt=m(z),dt=a(z),lt=P(z);return U(X,function(){var bt=W(this),gt;z=z||{screenX:dt[0],screenY:dt[1],clientX:lt[0],clientY:lt[1]};var J=function(vt){at&&(vt.payload=at)},$={TouchEvent:function(vt){var St=V(window,bt,0,pt[0],pt[1],dt[0],dt[1],lt[0],lt[1]),Tt=vt.initTouchEvent||vt.initEvent;Tt(it,!0,!0,window,null,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,St,St,St,1,0)},MouseEvents:function(vt){vt.initMouseEvent(it,!0,!0,window,0,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,1,bt)}};if(document.createEvent){var Q=!rt&&!st&&w&&r[R],ut=Q?"TouchEvent":"MouseEvents";gt=document.createEvent(ut),$[ut](gt),J(gt),bt.dispatchEvent(gt)}else document.createEventObject&&(gt=document.createEventObject(),gt.eventType=gt.eventName=it,gt.screenX=dt[0],gt.screenY=dt[1],gt.clientX=lt[0],gt.clientY=lt[1],J(gt),bt.fireEvent("on"+it,gt))}),this}},nt.Mottle.consume=function(n,o){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!o&&n.preventDefault&&n.preventDefault()},nt.Mottle.pageLocation=m,nt.Mottle.setForceTouchEvents=function(n){w=n},nt.Mottle.setForceMouseEvents=function(n){j=n},nt.Mottle.version="0.8.0",xt.Mottle=nt.Mottle}.call(typeof window=="undefined"?kt:window),function(){var K=this,c=function(n,o,t){return n.indexOf(o)===-1?(t?n.unshift(o):n.push(o),!0):!1},V=function(n,o){var t=n.indexOf(o);t!==-1&&n.splice(t,1)},nt=function(n,o){for(var t=[],g=0;g<n.length;g++)o.indexOf(n[g])===-1&&t.push(n[g]);return t},Z=function(n){return n==null?!1:typeof n=="string"||n.constructor===String},W=function(n){var o=n.getBoundingClientRect(),t=document.body,g=document.documentElement,b=window.pageYOffset||g.scrollTop||t.scrollTop,I=window.pageXOffset||g.scrollLeft||t.scrollLeft,F=g.clientTop||t.clientTop||0,X=g.clientLeft||t.clientLeft||0,R=o.top+b-F,z=o.left+I-X;return{top:Math.round(R),left:Math.round(z)}},h=function(n,o,t){t=t||n.parentNode;for(var g=t.querySelectorAll(o),b=0;b<g.length;b++)if(g[b]===n)return!0;return!1},M=function(n,o,t){if(h(o,t,n))return o;for(var g=o.parentNode;g!=null&&g!==n;){if(h(g,t,n))return g;g=g.parentNode}},l=function(n,o,t){for(var g=null,b=o.getAttribute("katavorio-draggable"),I=b!=null?"[katavorio-draggable='"+b+"'] ":"",F=0;F<n.length;F++)if(g=M(o,t,I+n[F].selector),g!=null){if(n[F].filter){var X=h(t,n[F].filter,g),R=n[F].filterExclude===!0;if(R&&!X||X)return null}return[n[F],g]}return null},i=function(){var n=-1;if(navigator.appName==="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(n=parseFloat(RegExp.$1))}return n}(),y=10,S=10,T=i>-1&&i<9,D=i===9,p=function(n){if(T)return[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop];var o=O(n),t=e(o,0);return D?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(n,o){return n.item?n.item(o):n[o]},O=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},L={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},G="katavorio-drag-scope",B=["stop","start","drag","drop","over","out","beforeStart"],w=function(){},j=function(){return!0},r=function(n,o,t){for(var g=0;g<n.length;g++)n[g]!=t&&o(n[g])},d=function(n,o,t,g){r(n,function(b){b.setActive(o),o&&b.updatePosition(),t&&b.setHover(g,o)})},u=function(n,o){if(n!=null){n=!Z(n)&&n.tagName==null&&n.length!=null?n:[n];for(var t=0;t<n.length;t++)o.apply(n[t],[n[t]])}},C=function(n){n.stopPropagation?(n.stopPropagation(),n.preventDefault()):n.returnValue=!1},m="input,textarea,select,button,option",a=function(n,o,t){var g=n.srcElement||n.target;return!h(g,t.getInputFilterSelector(),o)},P=function(n,o,t,g){this.params=o||{},this.el=n,this.params.addClass(this.el,this._class),this.uuid=N();var b=!0;return this.setEnabled=function(I){b=I},this.isEnabled=function(){return b},this.toggleEnabled=function(){b=!b},this.setScope=function(I){this.scopes=I?I.split(/\s+/):[g]},this.addScope=function(I){var F={};u(this.scopes,function(R){F[R]=!0}),u(I?I.split(/\s+/):[],function(R){F[R]=!0}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.removeScope=function(I){var F={};u(this.scopes,function(R){F[R]=!0}),u(I?I.split(/\s+/):[],function(R){delete F[R]}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.toggleScope=function(I){var F={};u(this.scopes,function(R){F[R]=!0}),u(I?I.split(/\s+/):[],function(R){F[R]?delete F[R]:F[R]=!0}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.setScope(o.scope),this.k=o.katavorio,o.katavorio},v=function(){return!0},E=function(){return!1},f=function(n,o,t,g){this._class=t.draggable;var b=P.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var I=[0,0],F=null,X=null,R=[0,0],z=!1,at=[0,0],st=this.params.consumeStartEvent!==!1,it=this.el,rt=this.params.clone;this.params.scroll;var pt=o.multipleDrop!==!1,dt=!1,lt,bt,gt=null,J=[],$=null,Q=o.ghostProxyParent,ut,vt,St,Tt;if(o.ghostProxy===!0?lt=v:o.ghostProxy&&typeof o.ghostProxy=="function"?lt=o.ghostProxy:lt=function(tt,_t){return $&&$.useGhostProxy?$.useGhostProxy(tt,_t):!1},o.makeGhostProxy?bt=o.makeGhostProxy:bt=function(tt){return $&&$.makeGhostProxy?$.makeGhostProxy(tt):tt.cloneNode(!0)},o.selector){var It=n.getAttribute("katavorio-draggable");It==null&&(It=""+new Date().getTime(),n.setAttribute("katavorio-draggable",It)),J.push(o)}var Bt=o.snapThreshold,Gt=function(tt,_t,Pt,yt,Et){var wt=Math.floor(tt[0]/_t),s=_t*wt,A=s+_t,_=Math.abs(tt[0]-s)<=yt?s:Math.abs(A-tt[0])<=yt?A:tt[0],k=Math.floor(tt[1]/Pt),H=Pt*k,q=H+Pt,et=Math.abs(tt[1]-H)<=Et?H:Math.abs(q-tt[1])<=Et?q:tt[1];return[_,et]};this.posses=[],this.posseRoles={},this.toGrid=function(tt){if(this.params.grid==null)return tt;var _t=this.params.grid?this.params.grid[0]/2:Bt||y/2,Pt=this.params.grid?this.params.grid[1]/2:Bt||S/2;return Gt(tt,this.params.grid[0],this.params.grid[1],_t,Pt)},this.snap=function(tt,_t){if(it!=null){tt=tt||(this.params.grid?this.params.grid[0]:y),_t=_t||(this.params.grid?this.params.grid[1]:S);var Pt=this.params.getPosition(it),yt=this.params.grid?this.params.grid[0]/2:Bt,Et=this.params.grid?this.params.grid[1]/2:Bt,wt=Gt(Pt,tt,_t,yt,Et);return this.params.setPosition(it,wt),wt}},this.setUseGhostProxy=function(tt){lt=tt?v:E};var Ht,le=function(tt){return o.allowNegative===!1?[Math.max(0,tt[0]),Math.max(0,tt[1])]:tt},ue=function(tt){Ht=typeof tt=="function"?tt:tt?function(_t,Pt,yt,Et){return le([Math.max(0,Math.min(yt.w-Et[0],_t[0])),Math.max(0,Math.min(yt.h-Et[1],_t[1]))])}.bind(this):function(_t){return le(_t)}}.bind(this);ue(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(tt){ue(tt)};var he=function(tt,_t,Pt,yt){return $!=null&&$.constrain&&typeof $.constrain=="function"?$.constrain(tt,_t,Pt,yt):Ht(tt,_t,Pt,yt)},Ut;this.setRevert=function(tt){Ut=tt},this.params.revert&&(Ut=this.params.revert);var te=function(tt){return typeof tt=="function"?(tt._katavorioId=N(),tt._katavorioId):tt},Yt={},ee=function(tt){for(var _t in Yt){var Pt=Yt[_t],yt=Pt[0](tt);if(Pt[1]&&(yt=!yt),!yt)return!1}return!0},ie=this.setFilter=function(tt,_t){if(tt){var Pt=te(tt);Yt[Pt]=[function(yt){var Et=yt.srcElement||yt.target,wt;return Z(tt)?wt=h(Et,tt,n):typeof tt=="function"&&(wt=tt(yt,n)),wt},_t!==!1]}};this.addFilter=ie,this.removeFilter=function(tt){var _t=typeof tt=="function"?tt._katavorioId:tt;delete Yt[_t]},this.clearAllFilters=function(){Yt={}},this.canDrag=this.params.canDrag||j;var se,jt=[],Xt=[];this.addSelector=function(tt){tt.selector&&J.push(tt)},this.downListener=function(tt){if(!tt.defaultPrevented){var _t=this.rightButtonCanDrag||tt.which!==3&&tt.button!==2;if(_t&&this.isEnabled()&&this.canDrag()){var Pt=ee(tt)&&a(tt,this.el,this.k);if(Pt){if($=null,gt=null,J.length>0){var yt=l(J,this.el,tt.target||tt.srcElement);if(yt!=null&&($=yt[0],gt=yt[1]),gt==null)return}else gt=this.el;if(rt)if(it=gt.cloneNode(!0),this.params.addClass(it,L.clonedDrag),it.setAttribute("id",null),it.style.position="absolute",this.params.parent!=null){var Et=this.params.getPosition(this.el);it.style.left=Et[0]+"px",it.style.top=Et[1]+"px",this.params.parent.appendChild(it)}else{var wt=W(gt);it.style.left=wt.left+"px",it.style.top=wt.top+"px",document.body.appendChild(it)}else it=gt;st&&C(tt),I=p(tt),it&&it.parentNode&&(at=[it.parentNode.scrollLeft,it.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),b.markSelection(this),b.markPosses(this),this.params.addClass(document.body,t.noSelect),Vt("beforeStart",{el:this.el,pos:F,e:tt,drag:this})}else this.params.consumeFilteredEvents&&C(tt)}}}.bind(this),this.moveListener=function(tt){if(I){if(!z){var _t=Vt("start",{el:this.el,pos:F,e:tt,drag:this});if(_t!==!1){if(!I)return;this.mark(!0),z=!0}else this.abort()}if(I){Xt.length=0;var Pt=p(tt),yt=Pt[0]-I[0],Et=Pt[1]-I[1],wt=this.params.ignoreZoom?1:b.getZoom();it&&it.parentNode&&(yt+=it.parentNode.scrollLeft-at[0],Et+=it.parentNode.scrollTop-at[1]),yt/=wt,Et/=wt,this.moveBy(yt,Et,tt),b.updateSelection(yt,Et,this),b.updatePosses(yt,Et,this)}}}.bind(this),this.upListener=function(tt){I&&(I=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(tt),b.unmarkSelection(this,tt),b.unmarkPosses(this,tt),this.stop(tt),b.notifyPosseDragStop(this,tt),z=!1,Xt.length=0,rt?(it&&it.parentNode&&it.parentNode.removeChild(it),it=null):Ut&&Ut(it,this.params.getPosition(it))===!0&&(this.params.setPosition(it,F),Vt("revert",it)))}.bind(this),this.getFilters=function(){return Yt},this.abort=function(){I!=null&&this.upListener()},this.getDragElement=function(tt){return tt?gt||this.el:it||this.el};var Mt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};o.events.start&&Mt.start.push(o.events.start),o.events.beforeStart&&Mt.beforeStart.push(o.events.beforeStart),o.events.stop&&Mt.stop.push(o.events.stop),o.events.drag&&Mt.drag.push(o.events.drag),o.events.revert&&Mt.revert.push(o.events.revert),this.on=function(tt,_t){Mt[tt]&&Mt[tt].push(_t)},this.off=function(tt,_t){if(Mt[tt]){for(var Pt=[],yt=0;yt<Mt[tt].length;yt++)Mt[tt][yt]!==_t&&Pt.push(Mt[tt][yt]);Mt[tt]=Pt}};var Vt=function(tt,_t){var Pt=null;if($&&$[tt])Pt=$[tt](_t);else if(Mt[tt])for(var yt=0;yt<Mt[tt].length;yt++)try{var Et=Mt[tt][yt](_t);Et!=null&&(Pt=Et)}catch{}return Pt};this.notifyStart=function(tt){Vt("start",{el:this.el,pos:this.params.getPosition(it),e:tt,drag:this})},this.stop=function(tt,_t){if(_t||z){var Pt=[],yt=b.getSelection(),Et=this.params.getPosition(it);if(yt.length>0)for(var wt=0;wt<yt.length;wt++){var s=this.params.getPosition(yt[wt].el);Pt.push([yt[wt].el,{left:s[0],top:s[1]},yt[wt]])}else Pt.push([it,{left:Et[0],top:Et[1]},this]);Vt("stop",{el:it,pos:$t||Et,finalPos:Et,e:tt,drag:this,selection:Pt})}},this.mark=function(tt){F=this.params.getPosition(it),X=this.params.getPosition(it,!0),R=[X[0]-F[0],X[1]-F[1]],this.size=this.params.getSize(it),jt=b.getMatchingDroppables(this),d(jt,!0,!1,this),this.params.addClass(it,this.params.dragClass||t.drag);var _t;this.params.getConstrainingRectangle?_t=this.params.getConstrainingRectangle(it):_t=this.params.getSize(it.parentNode),se={w:_t[0],h:_t[1]},St=0,Tt=0,tt&&b.notifySelectionDragStart(this)};var $t;this.unmark=function(tt,_t){if(d(jt,!1,!0,this),dt&&lt(gt,it)?($t=[it.offsetLeft-St,it.offsetTop-Tt],it.parentNode.removeChild(it),it=gt):$t=null,this.params.removeClass(it,this.params.dragClass||t.drag),jt.length=0,dt=!1,!_t){Xt.length>0&&$t&&o.setPosition(gt,$t),Xt.sort(U);for(var Pt=0;Pt<Xt.length;Pt++){var yt=Xt[Pt].drop(this,tt);if(yt===!0)break}}},this.moveBy=function(tt,_t,Pt){Xt.length=0;var yt=this.toGrid([F[0]+tt,F[1]+_t]),Et=he(yt,it,se,this.size);if(lt(this.el,it))if(yt[0]!==Et[0]||yt[1]!==Et[1]){if(!dt){var wt=bt(gt);o.addClass(wt,L.ghostProxy),Q?(Q.appendChild(wt),ut=o.getPosition(gt.parentNode,!0),vt=o.getPosition(o.ghostProxyParent,!0),St=ut[0]-vt[0],Tt=ut[1]-vt[1]):gt.parentNode.appendChild(wt),it=wt,dt=!0}Et=yt}else dt&&(it.parentNode.removeChild(it),it=gt,dt=!1,ut=null,vt=null,St=0,Tt=0);var s={x:Et[0],y:Et[1],w:this.size[0],h:this.size[1]},A={x:s.x+R[0],y:s.y+R[1],w:s.w,h:s.h},_=null;this.params.setPosition(it,[Et[0]+St,Et[1]+Tt]);for(var k=0;k<jt.length;k++){var H={x:jt[k].pagePosition[0],y:jt[k].pagePosition[1],w:jt[k].size[0],h:jt[k].size[1]};this.params.intersects(A,H)&&(pt||_==null||_===jt[k].el)&&jt[k].canDrop(this)?(_||(_=jt[k].el),Xt.push(jt[k]),jt[k].setHover(this,!0,Pt)):jt[k].isHover()&&jt[k].setHover(this,!1,Pt)}Vt("drag",{el:this.el,pos:Et,e:Pt,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?ie(this.params.handle,!1):ie(this.params.filter,this.params.filterExclude)},x=function(n,o,t,g){this._class=t.droppable,this.params=o||{},this.rank=o.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,P.apply(this,arguments);var b=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(I){this.params[I?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(I){return!0},this.isHover=function(){return b},this.setHover=function(I,F,X){(F||this.el._katavorioDragHover==null||this.el._katavorioDragHover===I.el._katavorio)&&(this.params[F?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=F?I.el._katavorio:null,b!==F&&this.params.events[F?"over":"out"]({el:this.el,e:X,drag:I,drop:this}),b=F)},this.drop=function(I,F){return this.params.events.drop({drag:I,e:F,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,b=null}},N=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,t=n==="x"?o:o&3|8;return t.toString(16)})},U=function(n,o){return n.rank<o.rank?1:n.rank>o.rank?-1:0},Y=function(n){return n==null||(n=typeof n=="string"||n.constructor===String?document.getElementById(n):n,n==null)?null:(n._katavorio=n._katavorio||N(),n)};K.Katavorio=function(n){var o=[],t={};this._dragsByScope={},this._dropsByScope={};var g=1,b=function(J,$){u(J,function(Q){for(var ut=0;ut<Q.scopes.length;ut++)$[Q.scopes[ut]]=$[Q.scopes[ut]]||[],$[Q.scopes[ut]].push(Q)})},I=function(J,$){var Q=0;return u(J,function(ut){for(var vt=0;vt<ut.scopes.length;vt++)if($[ut.scopes[vt]]){var St=n.indexOf($[ut.scopes[vt]],ut);St!==-1&&($[ut.scopes[vt]].splice(St,1),Q++)}}),Q>0};this.getMatchingDroppables=function(J){for(var $=[],Q={},ut=0;ut<J.scopes.length;ut++){var vt=this._dropsByScope[J.scopes[ut]];if(vt)for(var St=0;St<vt.length;St++)vt[St].canDrop(J)&&!Q[vt[St].uuid]&&(vt[St].allowLoopback||vt[St].el!==J.el)&&(Q[vt[St].uuid]=!0,$.push(vt[St]))}return $.sort(U),$};var F=function(J){J=J||{};var $={events:{}},Q;for(Q in n)$[Q]=n[Q];for(Q in J)$[Q]=J[Q];for(Q=0;Q<B.length;Q++)$.events[B[Q]]=J[B[Q]]||w;return $.katavorio=this,$}.bind(this),X=function(J,$){for(var Q=0;Q<B.length;Q++)$[B[Q]]&&J.on(B[Q],$[B[Q]])}.bind(this),R={},z=n.css||{},at=n.scope||G;for(var st in L)R[st]=L[st];for(var st in z)R[st]=z[st];var it=n.inputFilterSelector||m;this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(J){return it=J,this},this.draggable=function(J,$){var Q=[];return u(J,function(ut){if(ut=Y(ut),ut!=null)if(ut._katavorioDrag==null){var vt=F($);ut._katavorioDrag=new f(ut,vt,R,at),b(ut._katavorioDrag,this._dragsByScope),Q.push(ut._katavorioDrag),n.addClass(ut,vt.selector?R.delegatedDraggable:R.draggable)}else X(ut._katavorioDrag,$)}.bind(this)),Q},this.droppable=function(J,$){var Q=[];return u(J,function(ut){if(ut=Y(ut),ut!=null){var vt=new x(ut,F($),R,at);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(vt),b(vt,this._dropsByScope),Q.push(vt),n.addClass(ut,R.droppable)}}.bind(this)),Q},this.select=function(J){return u(J,function(){var $=Y(this);$&&$._katavorioDrag&&(t[$._katavorio]||(o.push($._katavorioDrag),t[$._katavorio]=[$,o.length-1],n.addClass($,R.selected)))}),this},this.deselect=function(J){return u(J,function(){var $=Y(this);if($&&$._katavorio){var Q=t[$._katavorio];if(Q){for(var ut=[],vt=0;vt<o.length;vt++)o[vt].el!==$&&ut.push(o[vt]);o=ut,delete t[$._katavorio],n.removeClass($,R.selected)}}}),this},this.deselectAll=function(){for(var J in t){var $=t[J];n.removeClass($[0],R.selected)}o.length=0,t={}},this.markSelection=function(J){r(o,function($){$.mark()},J)},this.markPosses=function(J){J.posses&&u(J.posses,function($){J.posseRoles[$]&&bt[$]&&r(bt[$].members,function(Q){Q.mark()},J)})},this.unmarkSelection=function(J,$){r(o,function(Q){Q.unmark($)},J)},this.unmarkPosses=function(J,$){J.posses&&u(J.posses,function(Q){J.posseRoles[Q]&&bt[Q]&&r(bt[Q].members,function(ut){ut.unmark($,!0)},J)})},this.getSelection=function(){return o.slice(0)},this.updateSelection=function(J,$,Q){r(o,function(ut){ut.moveBy(J,$)},Q)};var rt=function(J,$){$.posses&&u($.posses,function(Q){$.posseRoles[Q]&&bt[Q]&&r(bt[Q].members,function(ut){J(ut)},$)})};this.updatePosses=function(J,$,Q){rt(function(ut){ut.moveBy(J,$)},Q)},this.notifyPosseDragStop=function(J,$){rt(function(Q){Q.stop($,!0)},J)},this.notifySelectionDragStop=function(J,$){r(o,function(Q){Q.stop($,!0)},J)},this.notifySelectionDragStart=function(J,$){r(o,function(Q){Q.notifyStart($)},J)},this.setZoom=function(J){g=J},this.getZoom=function(){return g};var pt=function(J,$,Q,ut){u(J,function(vt){I(vt,Q),vt[ut]($),b(vt,Q)})};u(["set","add","remove","toggle"],function(J){this[J+"Scope"]=function($,Q){pt($._katavorioDrag,Q,this._dragsByScope,J+"Scope"),pt($._katavorioDrop,Q,this._dropsByScope,J+"Scope")}.bind(this),this[J+"DragScope"]=function($,Q){pt($.constructor===f?$:$._katavorioDrag,Q,this._dragsByScope,J+"Scope")}.bind(this),this[J+"DropScope"]=function($,Q){pt($.constructor===x?$:$._katavorioDrop,Q,this._dropsByScope,J+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(J,$){for(var Q in this._dragsByScope)r(this._dragsByScope[Q],function(ut){ut.snap(J,$)})},this.getDragsForScope=function(J){return this._dragsByScope[J]},this.getDropsForScope=function(J){return this._dropsByScope[J]};var dt=function(J,$,Q){if(J=Y(J),J[$]){var ut=o.indexOf(J[$]);ut>=0&&o.splice(ut,1),I(J[$],Q)&&u(J[$],function(vt){vt.destroy()}),delete J[$]}},lt=function(J,$,Q,ut){J=Y(J),J[$]&&J[$].off(Q,ut)};this.elementRemoved=function(J){J._katavorioDrag&&this.destroyDraggable(J),J._katavorioDrop&&this.destroyDroppable(J)},this.destroyDraggable=function(J,$,Q){arguments.length===1?dt(J,"_katavorioDrag",this._dragsByScope):lt(J,"_katavorioDrag",$,Q)},this.destroyDroppable=function(J,$,Q){arguments.length===1?dt(J,"_katavorioDrop",this._dropsByScope):lt(J,"_katavorioDrop",$,Q)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},o=[],t={},bt={}};var bt={},gt=function(J,$,Q){var ut=Z($)?$:$.id,vt=Z($)?!0:$.active!==!1,St=bt[ut]||function(){var Tt={name:ut,members:[]};return bt[ut]=Tt,Tt}();return u(J,function(Tt){if(Tt._katavorioDrag){if(Q&&Tt._katavorioDrag.posseRoles[St.name]!=null)return;c(St.members,Tt._katavorioDrag),c(Tt._katavorioDrag.posses,St.name),Tt._katavorioDrag.posseRoles[St.name]=vt}}),St};this.addToPosse=function(J,$){for(var Q=[],ut=1;ut<arguments.length;ut++)Q.push(gt(J,arguments[ut]));return Q.length===1?Q[0]:Q},this.setPosse=function(J,$){for(var Q=[],ut=1;ut<arguments.length;ut++)Q.push(gt(J,arguments[ut],!0).name);return u(J,function(vt){if(vt._katavorioDrag){var St=nt(vt._katavorioDrag.posses,Q),Tt=[];Array.prototype.push.apply(Tt,vt._katavorioDrag.posses);for(var It=0;It<St.length;It++)this.removeFromPosse(vt,St[It])}}.bind(this)),Q.length===1?Q[0]:Q},this.removeFromPosse=function(J,$){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var Q=1;Q<arguments.length;Q++)$=arguments[Q],u(J,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var vt=ut._katavorioDrag;u($,function(St){V(bt[St].members,vt),V(vt.posses,St),delete vt.posseRoles[St]})}})},this.removeFromAllPosses=function(J){u(J,function($){if($._katavorioDrag&&$._katavorioDrag.posses){var Q=$._katavorioDrag;u(Q.posses,function(ut){V(bt[ut].members,Q)}),Q.posses.length=0,Q.posseRoles={}}})},this.setPosseState=function(J,$,Q){var ut=bt[$];ut&&u(J,function(vt){vt._katavorioDrag&&vt._katavorioDrag.posses&&(vt._katavorioDrag.posseRoles[ut.name]=Q)})}},K.Katavorio.version="1.0.0",xt.Katavorio=K.Katavorio}.call(typeof window!="undefined"?window:kt),function(){var K=this;K.jsPlumbUtil=K.jsPlumbUtil||{};var c=K.jsPlumbUtil;xt.jsPlumbUtil=c;function V(n){return Object.prototype.toString.call(n)==="[object Array]"}c.isArray=V;function nt(n){return Object.prototype.toString.call(n)==="[object Number]"}c.isNumber=nt;function Z(n){return typeof n=="string"}c.isString=Z;function W(n){return typeof n=="boolean"}c.isBoolean=W;function h(n){return n==null}c.isNull=h;function M(n){return n==null?!1:Object.prototype.toString.call(n)==="[object Object]"}c.isObject=M;function l(n){return Object.prototype.toString.call(n)==="[object Date]"}c.isDate=l;function i(n){return Object.prototype.toString.call(n)==="[object Function]"}c.isFunction=i;function y(n){return i(n)&&n.name!=null&&n.name.length>0}c.isNamedFunction=y;function S(n){for(var o in n)if(n.hasOwnProperty(o))return!1;return!0}c.isEmpty=S;function T(n){if(Z(n))return""+n;if(W(n))return!!n;if(l(n))return new Date(n.getTime());if(i(n))return n;if(V(n)){for(var o=[],t=0;t<n.length;t++)o.push(T(n[t]));return o}else if(M(n)){var g={};for(var b in n)g[b]=T(n[b]);return g}else return n}c.clone=T;function D(n,o,t,g){var b={},I,F,X={};for(t=t||[],g=g||[],F=0;F<t.length;F++)b[t[F]]=!0;for(F=0;F<g.length;F++)X[g[F]]=!0;var R=T(n);for(F in o)if(R[F]==null||X[F])R[F]=o[F];else if(Z(o[F])||W(o[F]))b[F]?(I=[],I.push.apply(I,V(R[F])?R[F]:[R[F]]),I.push.apply(I,W(o[F])?o[F]:[o[F]]),R[F]=I):R[F]=o[F];else if(V(o[F]))I=[],V(R[F])&&I.push.apply(I,R[F]),I.push.apply(I,o[F]),R[F]=I;else if(M(o[F])){M(R[F])||(R[F]={});for(var z in o[F])R[F][z]=o[F][z]}return R}c.merge=D;function p(n,o,t){if(n!=null){var g=n,b=g;return o.replace(/([^\.])+/g,function(I,F,X,R){var z=I.match(/([^\[0-9]+){1}(\[)([0-9+])/),at=X+I.length>=R.length,st=function(){return b[z[1]]||function(){return b[z[1]]=[],b[z[1]]}()};if(at)z?st()[z[3]]=t:b[I]=t;else if(z){var it=st();b=it[z[3]]||function(){return it[z[3]]={},it[z[3]]}()}else b=b[I]||function(){return b[I]={},b[I]}();return""}),n}}c.replace=p;function e(n,o,t){for(var g=0;g<t.length;g++){var b=t[g][0][t[g][1]].apply(t[g][0],t[g][2]);if(b===o)return b}return n}c.functionChain=e;function O(n,o,t,g){var b=function(F){var X=F.match(/(\${.*?})/g);if(X!=null)for(var R=0;R<X.length;R++){var z=o[X[R].substring(2,X[R].length-1)]||"";z!=null&&(F=F.replace(X[R],z))}return F},I=function(F){if(F!=null){if(Z(F))return b(F);if(i(F)&&!g&&(t==null||(F.name||"").indexOf(t)===0))return F(o);if(V(F)){for(var X=[],R=0;R<F.length;R++)X.push(I(F[R]));return X}else if(M(F)){var z={};for(var at in F)z[at]=I(F[at]);return z}else return F}};return I(n)}c.populate=O;function L(n,o){if(n){for(var t=0;t<n.length;t++)if(o(n[t]))return t}return-1}c.findWithFunction=L;function G(n,o){var t=L(n,o);return t>-1&&n.splice(t,1),t!==-1}c.removeWithFunction=G;function B(n,o){var t=n.indexOf(o);return t>-1&&n.splice(t,1),t!==-1}c.remove=B;function w(n,o,t){L(n,t)===-1&&n.push(o)}c.addWithFunction=w;function j(n,o,t,g){var b=n[o];return b==null&&(b=[],n[o]=b),b[g?"unshift":"push"](t),b}c.addToList=j;function r(n,o,t){return n.indexOf(o)===-1?(t?n.unshift(o):n.push(o),!0):!1}c.suggest=r;function d(n,o,t){var g;o=V(o)?o:[o];var b=function(R){for(var z=R.__proto__;z!=null;)if(z.prototype!=null){for(var at in z.prototype)z.prototype.hasOwnProperty(at)&&!n.prototype.hasOwnProperty(at)&&(n.prototype[at]=z.prototype[at]);z=z.prototype.__proto__}else z=null};for(g=0;g<o.length;g++){for(var I in o[g].prototype)o[g].prototype.hasOwnProperty(I)&&!n.prototype.hasOwnProperty(I)&&(n.prototype[I]=o[g].prototype[I]);b(o[g])}var F=function(R,z){return function(){for(g=0;g<o.length;g++)o[g].prototype[R]&&o[g].prototype[R].apply(this,arguments);return z.apply(this,arguments)}},X=function(R){for(var z in R)n.prototype[z]=F(z,R[z])};if(arguments.length>2)for(g=2;g<arguments.length;g++)X(arguments[g]);return n}c.extend=d;for(var u=[],C=0;C<256;C++)u[C]=(C<16?"0":"")+C.toString(16);function m(){var n=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,g=Math.random()*4294967295|0;return u[n&255]+u[n>>8&255]+u[n>>16&255]+u[n>>24&255]+"-"+u[o&255]+u[o>>8&255]+"-"+u[o>>16&15|64]+u[o>>24&255]+"-"+u[t&63|128]+u[t>>8&255]+"-"+u[t>>16&255]+u[t>>24&255]+u[g&255]+u[g>>8&255]+u[g>>16&255]+u[g>>24&255]}c.uuid=m;function a(n){if(n==null)return null;for(var o=n.replace(/^\s\s*/,""),t=/\s/,g=o.length;t.test(o.charAt(--g)););return o.slice(0,g+1)}c.fastTrim=a;function P(n,o){n=n.length==null||typeof n=="string"?[n]:n;for(var t=0;t<n.length;t++)o(n[t])}c.each=P;function v(n,o){for(var t=[],g=0;g<n.length;g++)t.push(o(n[g]));return t}c.map=v;function E(n,o,t){t=t||"parent";var g=function(R){return R?o[R]:null},b=function(R){return R?g(R[t]):null},I=function(R,z){if(R==null)return z;var at=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];z.mergeStrategy==="override"&&Array.prototype.push.apply(at,["events","overlays"]);var st=D(R,z,[],at);return I(b(R),st)},F=function(R){if(R==null)return{};if(typeof R=="string")return g(R);if(R.length){for(var z=!1,at=0,st=void 0;!z&&at<R.length;)st=F(R[at]),st?z=!0:at++;return st}},X=F(n);return X?I(b(X),X):{}}c.mergeWithParents=E,c.logEnabled=!0;function f(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(c.logEnabled&&typeof console!="undefined")try{var t=arguments[arguments.length-1];console.log(t)}catch{}}c.log=f;function x(n,o,t){return function(){var g=null;try{o!=null&&(g=o.apply(this,arguments))}catch(b){f("jsPlumb function failed : "+b)}if(n!=null&&(t==null||g!==t))try{g=n.apply(this,arguments)}catch(b){f("wrapped function failed : "+b)}return g}}c.wrap=x;var N=function(){function n(){var o=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,g,b){var I=function(X){j(o._listeners,X,g,b),g.__jsPlumb=g.__jsPlumb||{},g.__jsPlumb[m()]=X};if(typeof t=="string")I(t);else if(t.length!=null)for(var F=0;F<t.length;F++)I(t[F]);return o},this.fire=function(t,g,b){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var I=this._listeners[t].length,F=0,X=!1,R=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,g,b))for(;!X&&F<I&&R!==!1;){if(this.eventsToDieOn[t])this._listeners[t][F].apply(this,[g,b]);else try{R=this._listeners[t][F].apply(this,[g,b])}catch(z){f("jsPlumb: fire failed for event "+t+" : "+z)}F++,(this._listeners==null||this._listeners[t]==null)&&(X=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=o.queue.pop();t&&o.fire.apply(o,t)},this.unbind=function(t,g){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var b=void 0;for(var I in t.__jsPlumb)b=t.__jsPlumb[I],B(this._listeners[b]||[],t)}}else arguments.length===2&&B(this._listeners[t]||[],g);return this},this.getListener=function(t){return o._listeners[t]},this.setSuspendEvents=function(t){o.eventsSuspended=t},this.isSuspendEvents=function(){return o.eventsSuspended},this.silently=function(t){o.setSuspendEvents(!0);try{t()}catch(g){f("Cannot execute silent function "+g)}o.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in o._listeners)o._listeners[t]=null}}return n}();c.EventGenerator=N;function U(n,o,t){var g=[n[0]-o[0],n[1]-o[1]],b=Math.cos(t/360*Math.PI*2),I=Math.sin(t/360*Math.PI*2);return[g[0]*b-g[1]*I+o[0],g[1]*b+g[0]*I+o[1],b,I]}c.rotatePoint=U;function Y(n,o){var t=U(n,[0,0],o);return[Math.round(t[0]),Math.round(t[1])]}c.rotateAnchorOrientation=Y}.call(typeof window!="undefined"?window:kt),function(){var K=this;K.jsPlumbUtil.matchesSelector=function(c,V,nt){nt=nt||c.parentNode;for(var Z=nt.querySelectorAll(V),W=0;W<Z.length;W++)if(Z[W]===c)return!0;return!1},K.jsPlumbUtil.consume=function(c,V){c.stopPropagation?c.stopPropagation():c.returnValue=!1,!V&&c.preventDefault&&c.preventDefault()},K.jsPlumbUtil.sizeElement=function(c,V,nt,Z,W){c&&(c.style.height=W+"px",c.height=W,c.style.width=Z+"px",c.width=Z,c.style.left=V+"px",c.style.top=nt+"px")}}.call(typeof window!="undefined"?window:kt),function(){var K={deriveAnchor:function(Z,W,h,M){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[Z][W]}},c=this,V=function(Z,W){this.count=0,this.instance=Z,this.lists={},this.options=W||{},this.instance.addList=function(h,M){return this.listManager.addList(h,M)},this.instance.removeList=function(h){this.listManager.removeList(h)},this.instance.bind("manageElement",function(h){for(var M=this.instance.getSelector(h.el,"[jtk-scrollable-list]"),l=0;l<M.length;l++)this.addList(M[l])}.bind(this)),this.instance.bind("unmanageElement",function(h){this.removeList(h.el)}),this.instance.bind("connection",function(h,M){M==null&&(this._maybeUpdateParentList(h.source),this._maybeUpdateParentList(h.target))}.bind(this))};c.jsPlumbListManager=V,V.prototype={addList:function(Z,W){var h=this.instance.extend({},K);this.instance.extend(h,this.options),W=this.instance.extend(h,W||{});var M=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[M]=new nt(this.instance,Z,W,M)},removeList:function(Z){var W=this.lists[Z._jsPlumbList];W&&(W.destroy(),delete this.lists[Z._jsPlumbList])},_maybeUpdateParentList:function(Z){for(var W=Z.parentNode,h=this.instance.getContainer();W!=null&&W!==h;){if(W._jsPlumbList!=null&&this.lists[W._jsPlumbList]!=null){W._jsPlumbScrollHandler();return}W=W.parentNode}}};var nt=function(Z,W,h,M){W._jsPlumbList=M;function l(T,D,p,e){return h.anchor?h.anchor:h.deriveAnchor(T,D,p,e)}function i(T,D,p,e){return h.deriveEndpoint?h.deriveEndpoint(T,D,p,e):h.endpoint?h.endpoint:p.type}function y(T){for(var D=T.parentNode,p=Z.getContainer();D!=null&&D!==p;){if(Z.hasClass(D,"jtk-managed")){Z.recalculateOffsets(D);return}D=D.parentNode}}var S=function(T){for(var D=Z.getSelector(W,".jtk-managed"),p=Z.getId(W),e=0;e<D.length;e++){if(D[e].offsetTop<W.scrollTop)D[e]._jsPlumbProxies||(D[e]._jsPlumbProxies=D[e]._jsPlumbProxies||[],Z.select({source:D[e]}).each(function(L){Z.proxyConnection(L,0,W,p,function(){return i("top",0,L.endpoints[0],L)},function(){return l("top",0,L.endpoints[0],L)}),D[e]._jsPlumbProxies.push([L,0])}),Z.select({target:D[e]}).each(function(L){Z.proxyConnection(L,1,W,p,function(){return i("top",1,L.endpoints[1],L)},function(){return l("top",1,L.endpoints[1],L)}),D[e]._jsPlumbProxies.push([L,1])}));else if(D[e].offsetTop+D[e].offsetHeight>W.scrollTop+W.offsetHeight)D[e]._jsPlumbProxies||(D[e]._jsPlumbProxies=D[e]._jsPlumbProxies||[],Z.select({source:D[e]}).each(function(L){Z.proxyConnection(L,0,W,p,function(){return i("bottom",0,L.endpoints[0],L)},function(){return l("bottom",0,L.endpoints[0],L)}),D[e]._jsPlumbProxies.push([L,0])}),Z.select({target:D[e]}).each(function(L){Z.proxyConnection(L,1,W,p,function(){return i("bottom",1,L.endpoints[1],L)},function(){return l("bottom",1,L.endpoints[1],L)}),D[e]._jsPlumbProxies.push([L,1])}));else if(D[e]._jsPlumbProxies){for(var O=0;O<D[e]._jsPlumbProxies.length;O++)Z.unproxyConnection(D[e]._jsPlumbProxies[O][0],D[e]._jsPlumbProxies[O][1],p);delete D[e]._jsPlumbProxies}Z.revalidate(D[e])}y(W)};Z.setAttribute(W,"jtk-scrollable-list","true"),W._jsPlumbScrollHandler=S,Z.on(W,"scroll",S),S(),this.destroy=function(){Z.off(W,"scroll",S),delete W._jsPlumbScrollHandler;for(var T=Z.getSelector(W,".jtk-managed"),D=Z.getId(W),p=0;p<T.length;p++)if(T[p]._jsPlumbProxies){for(var e=0;e<T[p]._jsPlumbProxies.length;e++)Z.unproxyConnection(T[p]._jsPlumbProxies[e][0],T[p]._jsPlumbProxies[e][1],D);delete T[p]._jsPlumbProxies}}}}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumbUtil,V=function(p){if(p._jsPlumb.paintStyle&&p._jsPlumb.hoverPaintStyle){var e={};D.extend(e,p._jsPlumb.paintStyle),D.extend(e,p._jsPlumb.hoverPaintStyle),delete p._jsPlumb.hoverPaintStyle,e.gradient&&p._jsPlumb.paintStyle.fill&&delete e.gradient,p._jsPlumb.hoverPaintStyle=e}},nt=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],Z=function(p,e,O,L){var G=p.getAttachedElements();if(G)for(var B=0,w=G.length;B<w;B++)(!L||L!==G[B])&&G[B].setHover(e,!0,O)},W=function(p){return p==null?null:p.split(" ")},h=function(p,e,O){for(var L in e)p[L]=O},M=function(p,e,O){if(p.getDefaultType){var L=p.getTypeDescriptor(),G={},B=p.getDefaultType(),w=c.merge({},B);h(G,B,"__default");for(var j=0,r=p._jsPlumb.types.length;j<r;j++){var d=p._jsPlumb.types[j];if(d!=="__default"){var u=p._jsPlumb.instance.getType(d,L);if(u!=null){var C=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],m=[];u.mergeStrategy==="override"?Array.prototype.push.apply(C,["events","overlays","cssClass"]):m.push("cssClass"),w=c.merge(w,u,m,C),h(G,u,d)}}}e&&(w=c.populate(w,e,"_")),p.applyType(w,O,G),O||p.repaint()}},l=K.jsPlumbUIComponent=function(p){c.EventGenerator.apply(this,arguments);var e=this,O=arguments,L=e.idPrefix,G=L+new Date().getTime();this._jsPlumb={instance:p._jsPlumb,parameters:p.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:p.beforeDetach,beforeDrop:p.beforeDrop,overlayPlacements:[],hoverClass:p.hoverClass||p._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(m,a,P){this._jsPlumb.typeCache[P]=this._jsPlumb.typeCache[P]||{},this._jsPlumb.typeCache[P][m]=a},this.getCachedTypeItem=function(m,a){return this._jsPlumb.typeCache[a]?this._jsPlumb.typeCache[a][m]:null},this.getId=function(){return G};var B=p.overlays||[],w={};if(this.defaultOverlayKeys){for(var j=0;j<this.defaultOverlayKeys.length;j++)Array.prototype.push.apply(B,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[j]]||[]);for(j=0;j<B.length;j++){var r=D.convertToFullOverlaySpec(B[j]);w[r[1].id]=r}}var d={overlays:w,parameters:p.parameters||{},scope:p.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return d},this.appendToDefaultType=function(m){for(var a in m)d[a]=m[a]},p.events)for(var u in p.events)e.bind(u,p.events[u]);this.clone=function(){var m=Object.create(this.constructor.prototype);return this.constructor.apply(m,O),m}.bind(this),this.isDetachAllowed=function(m){var a=!0;if(this._jsPlumb.beforeDetach)try{a=this._jsPlumb.beforeDetach(m)}catch(P){c.log("jsPlumb: beforeDetach callback failed",P)}return a},this.isDropAllowed=function(m,a,P,v,E,f,x){var N=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:m,targetId:a,scope:P,connection:v,dropEndpoint:E,source:f,target:x});if(this._jsPlumb.beforeDrop)try{N=this._jsPlumb.beforeDrop({sourceId:m,targetId:a,scope:P,connection:v,dropEndpoint:E,source:f,target:x})}catch(U){c.log("jsPlumb: beforeDrop callback failed",U)}return N};var C=[];this.setListenerComponent=function(m){for(var a=0;a<C.length;a++)C[a][3]=m}},i=function(p,e){var O=p._jsPlumb.types[e],L=p._jsPlumb.instance.getType(O,p.getTypeDescriptor());L!=null&&L.cssClass&&p.canvas&&p._jsPlumb.instance.removeClass(p.canvas,L.cssClass)};c.extend(K.jsPlumbUIComponent,c.EventGenerator,{getParameter:function(p){return this._jsPlumb.parameters[p]},setParameter:function(p,e){this._jsPlumb.parameters[p]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(p){this._jsPlumb.parameters=p},getClass:function(){return D.getClass(this.canvas)},hasClass:function(p){return D.hasClass(this.canvas,p)},addClass:function(p){D.addClass(this.canvas,p)},removeClass:function(p){D.removeClass(this.canvas,p)},updateClasses:function(p,e){D.updateClasses(this.canvas,p,e)},setType:function(p,e,O){this.clearTypes(),this._jsPlumb.types=W(p)||[],M(this,e,O)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(p,e){M(this,p,e)},hasType:function(p){return this._jsPlumb.types.indexOf(p)!==-1},addType:function(p,e,O){var L=W(p),G=!1;if(L!=null){for(var B=0,w=L.length;B<w;B++)this.hasType(L[B])||(this._jsPlumb.types.push(L[B]),G=!0);G&&M(this,e,O)}},removeType:function(p,e,O){var L=W(p),G=!1,B=function(r){var d=this._jsPlumb.types.indexOf(r);return d!==-1?(i(this,d),this._jsPlumb.types.splice(d,1),!0):!1}.bind(this);if(L!=null){for(var w=0,j=L.length;w<j;w++)G=B(L[w])||G;G&&M(this,e,O)}},clearTypes:function(p,e){for(var O=this._jsPlumb.types.length,L=0;L<O;L++)i(this,0),this._jsPlumb.types.splice(0,1);M(this,p,e)},toggleType:function(p,e,O){var L=W(p);if(L!=null){for(var G=0,B=L.length;G<B;G++){var w=this._jsPlumb.types.indexOf(L[G]);w!==-1?(i(this,w),this._jsPlumb.types.splice(w,1)):this._jsPlumb.types.push(L[G])}M(this,e,O)}},applyType:function(p,e){if(this.setPaintStyle(p.paintStyle,e),this.setHoverPaintStyle(p.hoverPaintStyle,e),p.parameters)for(var O in p.parameters)this.setParameter(O,p.parameters[O]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(p,e){this._jsPlumb.paintStyle=p,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,V(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(p,e){this._jsPlumb.hoverPaintStyle=p,V(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(p){(p||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(p,e,O){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=p;var L=p?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=p?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(O=O||jsPlumbUtil.uuid(),this.repaint({timestamp:O,recalc:!1}))),this.getAttachedElements&&!e&&Z(this,p,jsPlumbUtil.uuid(),this)}}});var y=0,S=function(){var p=y+1;return y++,p},T=K.jsPlumbInstance=function(p){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},p&&D.extend(this.Defaults,p),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},c.EventGenerator.apply(this);var e=this,O=S(),L=e.bind,G={},B=1,w=function(s){if(s==null)return null;if(s.nodeType===3||s.nodeType===8)return{el:s,text:!0};var A=e.getElement(s);return{el:A,id:c.isString(s)&&A==null?s:lt(A)}};this.getInstanceIndex=function(){return O},this.setZoom=function(s,A){return B=s,e.fire("zoom",B),A&&e.repaintEverything(),!0},this.getZoom=function(){return B};for(var j in this.Defaults)G[j]=this.Defaults[j];var r,d=[];this.unbindContainer=function(){if(r!=null&&d.length>0)for(var s=0;s<d.length;s++)e.off(r,d[s][0],d[s][1])},this.setContainer=function(s){this.unbindContainer(),s=this.getElement(s),this.select().each(function(ct){ct.moveParent(s)}),this.selectEndpoints().each(function(ct){ct.moveParent(s)});var A=r;r=s,d.length=0;for(var _={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},k=function(ct,ht,Ct){var mt=ht.srcElement||ht.target,Dt=(mt&&mt.parentNode?mt.parentNode._jsPlumb:null)||(mt?mt._jsPlumb:null)||(mt&&mt.parentNode&&mt.parentNode.parentNode?mt.parentNode.parentNode._jsPlumb:null);if(Dt){Dt.fire(ct,Dt,ht);var At=Ct&&_[Ct+ct]||ct;e.fire(At,Dt.component||Dt,ht)}},H=function(ct,ht,Ct){d.push([ct,Ct]),e.on(r,ct,ht,Ct)},q=function(ct){H(ct,".jtk-connector",function(ht){k(ct,ht)}),H(ct,".jtk-endpoint",function(ht){k(ct,ht,"endpoint")}),H(ct,".jtk-overlay",function(ht){k(ct,ht)})},et=0;et<nt.length;et++)q(nt[et]);for(var ft in v){var ot=v[ft].el;ot.parentNode===A&&(A.removeChild(ot),r.appendChild(ot))}},this.getContainer=function(){return r},this.bind=function(s,A){s==="ready"&&C?A():L.apply(e,[s,A])},e.importDefaults=function(s){for(var A in s)e.Defaults[A]=s[A];return s.Container&&e.setContainer(s.Container),e},e.restoreDefaults=function(){return e.Defaults=D.extend({},G),e};var u=null,C=!1,m=[],a={},P={},v={},E={},f={},x=!1,N=[],U=!1,Y=null,n=this.Defaults.Scope,o=1,t=function(){return""+o++},g=function(s,A){r?r.appendChild(s):A?this.getElement(A).appendChild(s):this.appendToRoot(s)}.bind(this),b=function(s,A,_,k){var H={c:[],e:[]};if(!U&&(s=e.getElement(s),s!=null)){var q=lt(s),et=s.querySelectorAll(".jtk-managed");_==null&&(_=jsPlumbUtil.uuid()),jt({elId:q,offset:A,recalc:!1,timestamp:_});for(var ft=0;ft<et.length;ft++)jt({elId:et[ft].getAttribute("id"),recalc:!0,timestamp:_});var ot=e.router.redraw(q,A,_,null,k);if(Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e),et)for(var ct=0;ct<et.length;ct++)ot=e.router.redraw(et[ct].getAttribute("id"),null,_,null,k,!0),Array.prototype.push.apply(H.c,ot.c),Array.prototype.push.apply(H.e,ot.e)}return H},I=function(s){return P[s]},F=function(s,A){for(var _=s.scope.split(/\s/),k=A.scope.split(/\s/),H=0;H<_.length;H++)for(var q=0;q<k.length;q++)if(k[q]===_[H])return!0;return!1},X=function(s,A){var _=D.extend({},s);for(var k in A)A[k]&&(_[k]=A[k]);return _},R=function(s,A){var _=D.extend({},s);if(A&&D.extend(_,A),_.source&&(_.source.endpoint?_.sourceEndpoint=_.source:_.source=e.getElement(_.source)),_.target&&(_.target.endpoint?_.targetEndpoint=_.target:_.target=e.getElement(_.target)),s.uuids&&(_.sourceEndpoint=I(s.uuids[0]),_.targetEndpoint=I(s.uuids[1])),_.sourceEndpoint&&_.sourceEndpoint.isFull()){c.log(e,"could not add connection; source endpoint is full");return}if(_.targetEndpoint&&_.targetEndpoint.isFull()){c.log(e,"could not add connection; target endpoint is full");return}if(!_.type&&_.sourceEndpoint&&(_.type=_.sourceEndpoint.connectionType),_.sourceEndpoint&&_.sourceEndpoint.connectorOverlays){_.overlays=_.overlays||[];for(var k=0,H=_.sourceEndpoint.connectorOverlays.length;k<H;k++)_.overlays.push(_.sourceEndpoint.connectorOverlays[k])}_.sourceEndpoint&&_.sourceEndpoint.scope&&(_.scope=_.sourceEndpoint.scope),!_["pointer-events"]&&_.sourceEndpoint&&_.sourceEndpoint.connectorPointerEvents&&(_["pointer-events"]=_.sourceEndpoint.connectorPointerEvents);var q=function(ft,ot,ct){var ht=X(ot,{anchor:_.anchors?_.anchors[ct]:_.anchor,endpoint:_.endpoints?_.endpoints[ct]:_.endpoint,paintStyle:_.endpointStyles?_.endpointStyles[ct]:_.endpointStyle,hoverPaintStyle:_.endpointHoverStyles?_.endpointHoverStyles[ct]:_.endpointHoverStyle});return e.addEndpoint(ft,ht)},et=function(ft,ot,ct,ht){if(_[ft]&&!_[ft].endpoint&&!_[ft+"Endpoint"]&&!_.newConnection){var Ct=lt(_[ft]),mt=ct[Ct];if(mt=mt?mt[ht]:null,mt){if(!mt.enabled)return!1;var Dt=D.extend({},mt.def);delete Dt.label;var At=mt.endpoint!=null&&mt.endpoint._jsPlumb?mt.endpoint:q(_[ft],Dt,ot);if(At.isFull())return!1;_[ft+"Endpoint"]=At,!_.scope&&Dt.scope&&(_.scope=Dt.scope),mt.uniqueEndpoint?mt.endpoint?At.finalEndpoint=mt.endpoint:(mt.endpoint=At,At.setDeleteOnEmpty(!1)):At.setDeleteOnEmpty(!0),ot===0&&mt.def.connectorOverlays&&(_.overlays=_.overlays||[],Array.prototype.push.apply(_.overlays,mt.def.connectorOverlays))}}};if(et("source",0,this.sourceEndpointDefinitions,_.type||"default")!==!1&&et("target",1,this.targetEndpointDefinitions,_.type||"default")!==!1)return _.sourceEndpoint&&_.targetEndpoint&&(F(_.sourceEndpoint,_.targetEndpoint)||(_=null)),_}.bind(e),z=function(s){var A=e.Defaults.ConnectionType||e.getDefaultConnectionType();s._jsPlumb=e,s.newConnection=z,s.newEndpoint=st,s.endpointsByUUID=P,s.endpointsByElement=a,s.finaliseConnection=at,s.id="con_"+t();var _=new A(s);return _.isDetachable()&&(_.endpoints[0].initDraggable("_jsPlumbSource"),_.endpoints[1].initDraggable("_jsPlumbTarget")),_},at=e.finaliseConnection=function(s,A,_,k){if(A=A||{},s.suspendedEndpoint||m.push(s),s.pending=null,s.endpoints[0].isTemporarySource=!1,k!==!1&&e.router.newConnection(s),b(s.source),!A.doNotFireConnectionEvent&&A.fireEvent!==!1){var H={connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]};e.fire("connection",H,_)}},st=function(s,A){var _=e.Defaults.EndpointType||D.Endpoint,k=D.extend({},s);k._jsPlumb=e,k.newConnection=z,k.newEndpoint=st,k.endpointsByUUID=P,k.endpointsByElement=a,k.fireDetachEvent=J,k.elementId=A||lt(k.source);var H=new _(k);return H.id="ep_"+t(),se(k.elementId,k.source),D.headless||e.getDragManager().endpointAdded(k.source,A),H},it=function(s,A,_){var k=a[s];if(k&&k.length)for(var H=0,q=k.length;H<q;H++){for(var et=0,ft=k[H].connections.length;et<ft;et++){var ot=A(k[H].connections[et]);if(ot)return}_&&_(k[H])}},rt=function(s,A,_){A=A==="block";var k=null;_&&(k=function(q){q.setVisible(A,!0,!0)});var H=w(s);it(H.id,function(q){if(A&&_){var et=q.sourceId===H.id?1:0;q.endpoints[et].isVisible()&&q.setVisible(!0)}else q.setVisible(A)},k)},pt=function(s,A){var _=null;A&&(_=function(k){var H=k.isVisible();k.setVisible(!H)}),it(s,function(k){var H=k.isVisible();k.setVisible(!H)},_)},dt=function(s){var A=E[s];return A?{o:A,s:N[s]}:jt({elId:s})},lt=function(s,A,_){if(c.isString(s))return s;if(s==null)return null;var k=e.getAttribute(s,"id");return(!k||k==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?k=A:(arguments.length===1||arguments.length===3&&!arguments[2])&&(k="jsPlumb_"+O+"_"+t()),_||e.setAttribute(s,"id",k)),k};this.setConnectionBeingDragged=function(s){x=s},this.isConnectionBeingDragged=function(){return x},this.getManagedElements=function(){return v},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(s,A,_){_=_||{};var k=D.extend({},_);D.extend(k,A),k.endpoint=k.endpoint||e.Defaults.Endpoint,k.paintStyle=k.paintStyle||e.Defaults.EndpointStyle;for(var H=[],q=c.isArray(s)||s.length!=null&&!c.isString(s)?s:[s],et=0,ft=q.length;et<ft;et++){k.source=e.getElement(q[et]),ee(k.source);var ot=lt(k.source),ct=st(k,ot),ht=se(ot,k.source,null,!U).info.o;c.addToList(a,ot,ct),U||ct.paint({anchorLoc:ct.anchor.compute({xy:[ht.left,ht.top],wh:N[ot],element:ct,timestamp:Y,rotation:this.getRotation(ot)}),timestamp:Y}),H.push(ct)}return H.length===1?H[0]:H},this.addEndpoints=function(s,A,_){for(var k=[],H=0,q=A.length;H<q;H++){var et=e.addEndpoint(s,A[H],_);c.isArray(et)?Array.prototype.push.apply(k,et):k.push(et)}return k},this.animate=function(s,A,_){if(!this.animationSupported)return!1;_=_||{};var k=e.getElement(s),H=lt(k),q=D.animEvents.step,et=D.animEvents.complete;_[q]=c.wrap(_[q],function(){e.revalidate(H)}),_[et]=c.wrap(_[et],function(){e.revalidate(H)}),e.doAnimate(k,A,_)},this.checkCondition=function(s,A){var _=e.getListener(s),k=!0;if(_&&_.length>0){var H=Array.prototype.slice.call(arguments,1);try{for(var q=0,et=_.length;q<et;q++)k=k&&_[q].apply(_[q],H)}catch(ft){c.log(e,"cannot check condition ["+s+"]"+ft)}}return k},this.connect=function(s,A){var _=R(s,A),k;if(_){if(_.source==null&&_.sourceEndpoint==null){c.log("Cannot establish connection - source does not exist");return}if(_.target==null&&_.targetEndpoint==null){c.log("Cannot establish connection - target does not exist");return}ee(_.source),k=z(_),at(k,_)}return k};var bt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],gt=function(s,A,_,k){var H,q=bt[_],et=s[q.elId];s[q.el];var ft,ot,ct=s.endpoints[_],ht={index:_,originalSourceId:_===0?et:s.sourceId,newSourceId:s.sourceId,originalTargetId:_===1?et:s.targetId,newTargetId:s.targetId,connection:s};if(A.constructor===D.Endpoint)H=A,H.addConnection(s),A=H.element;else if(ft=lt(A),ot=this[q.epDefs][ft],ft===s[q.elId])H=null;else if(ot)for(var Ct in ot){if(!ot[Ct].enabled)return;H=ot[Ct].endpoint!=null&&ot[Ct].endpoint._jsPlumb?ot[Ct].endpoint:this.addEndpoint(A,ot[Ct].def),ot[Ct].uniqueEndpoint&&(ot[Ct].endpoint=H),H.addConnection(s)}else H=s.makeEndpoint(_===0,A,ft);return H!=null&&(ct.detachFromConnection(s),s.endpoints[_]=H,s[q.el]=H.element,s[q.elId]=H.elementId,ht[_===0?"newSourceId":"newTargetId"]=H.elementId,$(ht),k||s.repaint()),ht.element=A,ht}.bind(this);this.setSource=function(s,A,_){var k=gt(s,A,0,_);this.router.sourceOrTargetChanged(k.originalSourceId,k.newSourceId,s,k.el,0)},this.setTarget=function(s,A,_){var k=gt(s,A,1,_);this.router.sourceOrTargetChanged(k.originalTargetId,k.newTargetId,s,k.el,1)},this.deleteEndpoint=function(s,A,_){var k=typeof s=="string"?P[s]:s;return k&&e.deleteObject({endpoint:k,dontUpdateHover:A,deleteAttachedObjects:_}),e},this.deleteEveryEndpoint=function(){var s=e.setSuspendDrawing(!0);for(var A in a){var _=a[A];if(_&&_.length)for(var k=0,H=_.length;k<H;k++)e.deleteEndpoint(_[k],!0)}a={},v={},P={},E={},f={},e.router.reset();var q=e.getDragManager();return q&&q.reset(),s||e.setSuspendDrawing(!1),e};var J=function(s,A,_){var k=e.Defaults.ConnectionType||e.getDefaultConnectionType(),H=s.constructor===k,q=H?{connection:s,source:s.source,target:s.target,sourceId:s.sourceId,targetId:s.targetId,sourceEndpoint:s.endpoints[0],targetEndpoint:s.endpoints[1]}:s;A&&e.fire("connectionDetached",q,_),e.fire("internal.connectionDetached",q,_),e.router.connectionDetached(q)},$=e.fireMoveEvent=function(s,A){e.fire("connectionMoved",s,A)};this.unregisterEndpoint=function(s){s._jsPlumb.uuid&&(P[s._jsPlumb.uuid]=null),e.router.deleteEndpoint(s);for(var A in a){var _=a[A];if(_){for(var k=[],H=0,q=_.length;H<q;H++)_[H]!==s&&k.push(_[H]);a[A]=k}a[A].length<1&&delete a[A]}};var Q="isDetachAllowed",ut="beforeDetach",vt="checkCondition";this.deleteConnection=function(s,A){return s!=null&&(A=A||{},A.force||c.functionChain(!0,!1,[[s.endpoints[0],Q,[s]],[s.endpoints[1],Q,[s]],[s,Q,[s]],[e,vt,[ut,s]]]))?(s.setHover(!1),J(s,!s.pending&&A.fireEvent!==!1,A.originalEvent),s.endpoints[0].detachFromConnection(s),s.endpoints[1].detachFromConnection(s),c.removeWithFunction(m,function(_){return s.id===_.id}),s.cleanup(),s.destroy(),!0):!1},this.deleteEveryConnection=function(s){s=s||{};var A=m.length,_=0;return e.batch(function(){for(var k=0;k<A;k++)_+=e.deleteConnection(m[0],s)?1:0}),_},this.deleteConnectionsForElement=function(s,A){A=A||{},s=e.getElement(s);var _=lt(s),k=a[_];if(k&&k.length)for(var H=0,q=k.length;H<q;H++)k[H].deleteEveryConnection(A);return e},this.deleteObject=function(s){var A={endpoints:{},connections:{},endpointCount:0,connectionCount:0},_=s.deleteAttachedObjects!==!1,k=function(ht){ht!=null&&A.connections[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),A.connections[ht.id]=ht,A.connectionCount++)},H=function(ht){if(ht!=null&&A.endpoints[ht.id]==null&&(!s.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),A.endpoints[ht.id]=ht,A.endpointCount++,_))for(var Ct=0;Ct<ht.connections.length;Ct++){var mt=ht.connections[Ct];k(mt)}};s.connection?k(s.connection):H(s.endpoint);for(var q in A.connections){var et=A.connections[q];if(et._jsPlumb){c.removeWithFunction(m,function(ht){return et.id===ht.id}),J(et,s.fireEvent===!1?!1:!et.pending,s.originalEvent);var ft=s.deleteAttachedObjects==null?null:!s.deleteAttachedObjects;et.endpoints[0].detachFromConnection(et,null,ft),et.endpoints[1].detachFromConnection(et,null,ft),et.cleanup(!0),et.destroy(!0)}}for(var ot in A.endpoints){var ct=A.endpoints[ot];ct._jsPlumb&&(e.unregisterEndpoint(ct),ct.cleanup(!0),ct.destroy(!0))}return A};var St=function(s,A,_,k){for(var H=0,q=s.length;H<q;H++)s[H][A].apply(s[H],_);return k(s)},Tt=function(s,A,_){for(var k=[],H=0,q=s.length;H<q;H++)k.push([s[H][A].apply(s[H],_),s[H]]);return k},It=function(s,A,_){return function(){return St(s,A,arguments,_)}},Bt=function(s,A){return function(){return Tt(s,A,arguments)}},Gt=function(s,A){var _=[];if(s)if(typeof s=="string"){if(s==="*")return s;_.push(s)}else if(A)_=s;else if(s.length)for(var k=0,H=s.length;k<H;k++)_.push(w(s[k]).id);else _.push(w(s).id);return _},Ht=function(s,A,_){return s==="*"?!0:s.length>0?s.indexOf(A)!==-1:!_};this.getConnections=function(s,A){s?s.constructor===String&&(s={scope:s}):s={};for(var _=s.scope||e.getDefaultScope(),k=Gt(_,!0),H=Gt(s.source),q=Gt(s.target),et=!A&&k.length>1?{}:[],ft=function(Dt,At){if(!A&&k.length>1){var Ot=et[Dt];Ot==null&&(Ot=et[Dt]=[]),Ot.push(At)}else et.push(At)},ot=0,ct=m.length;ot<ct;ot++){var ht=m[ot],Ct=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,mt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Ht(k,ht.scope)&&Ht(H,Ct)&&Ht(q,mt)&&ft(ht.scope,ht)}return et};var le=function(s,A){return function(_){for(var k=0,H=s.length;k<H;k++)_(s[k]);return A(s)}},ue=function(s){return function(A){return s[A]}},he=function(s,A){var _={length:s.length,each:le(s,A),get:ue(s)},k=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],H=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],q,et;for(q=0,et=k.length;q<et;q++)_[k[q]]=It(s,k[q],A);for(q=0,et=H.length;q<et;q++)_[H[q]]=Bt(s,H[q]);return _},Ut=function(s){var A=he(s,Ut);return D.extend(A,{setDetachable:It(s,"setDetachable",Ut),setReattach:It(s,"setReattach",Ut),setConnector:It(s,"setConnector",Ut),delete:function(){for(var _=0,k=s.length;_<k;_++)e.deleteConnection(s[_])},isDetachable:Bt(s,"isDetachable"),isReattach:Bt(s,"isReattach")})},te=function(s){var A=he(s,te);return D.extend(A,{setEnabled:It(s,"setEnabled",te),setAnchor:It(s,"setAnchor",te),isEnabled:Bt(s,"isEnabled"),deleteEveryConnection:function(){for(var _=0,k=s.length;_<k;_++)s[_].deleteEveryConnection()},delete:function(){for(var _=0,k=s.length;_<k;_++)e.deleteEndpoint(s[_])}})};this.select=function(s){return s=s||{},s.scope=s.scope||"*",Ut(s.connections||e.getConnections(s,!0))},this.selectEndpoints=function(s){s=s||{},s.scope=s.scope||"*";var A=!s.element&&!s.source&&!s.target,_=A?"*":Gt(s.element),k=A?"*":Gt(s.source),H=A?"*":Gt(s.target),q=Gt(s.scope,!0),et=[];for(var ft in a){var ot=Ht(_,ft,!0),ct=Ht(k,ft,!0),ht=k!=="*",Ct=Ht(H,ft,!0),mt=H!=="*";if(ot||ct||Ct){t:for(var Dt=0,At=a[ft].length;Dt<At;Dt++){var Ot=a[ft][Dt];if(Ht(q,Ot.scope,!0)){var ce=ht&&k.length>0&&!Ot.isSource,fe=mt&&H.length>0&&!Ot.isTarget;if(ce||fe)continue t;et.push(Ot)}}}}return te(et)},this.getAllConnections=function(){return m},this.getDefaultScope=function(){return n},this.getEndpoint=I,this.getEndpoints=function(s){return a[w(s).id]||[]},this.getDefaultEndpointType=function(){return D.Endpoint},this.getDefaultConnectionType=function(){return D.Connection},this.getId=lt,this.draw=b,this.info=w,this.appendElement=g;var Yt=!1;this.isHoverSuspended=function(){return Yt},this.setHoverSuspended=function(s){Yt=s},this.hide=function(s,A){return rt(s,"none",A),e},this.idstamp=t;var ee=function(s){if(!r&&s){var A=e.getElement(s);A.offsetParent&&e.setContainer(A.offsetParent)}},ie=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},se=e.manage=function(s,A,_,k){return v[s]?k&&(v[s].info=jt({elId:s,timestamp:Y,recalc:!0})):(v[s]={el:A,endpoints:[],connections:[],rotation:0},v[s].info=jt({elId:s,timestamp:Y}),e.addClass(A,"jtk-managed"),_||e.fire("manageElement",{id:s,info:v[s].info,el:A})),v[s]};this.unmanage=function(s){if(v[s]){var A=v[s].el;e.removeClass(A,"jtk-managed"),delete v[s],e.fire("unmanageElement",{id:s,el:A})}},this.rotate=function(s,A,_){return v[s]&&(v[s].rotation=A,v[s].el.style.transform="rotate("+A+"deg)",v[s].el.style.transformOrigin="center center",_!==!0)?this.revalidate(s):{c:[],e:[]}},this.getRotation=function(s){return v[s]&&v[s].rotation||0};var jt=function(s){var A=s.timestamp,_=s.recalc,k=s.offset,H=s.elId,q;return U&&!A&&(A=Y),!_&&A&&A===f[H]?{o:s.offset||E[H],s:N[H]}:(_||!k&&E[H]==null?(q=v[H]?v[H].el:null,q!=null&&(N[H]=e.getSize(q),E[H]=e.getOffset(q),f[H]=A)):(E[H]=k||E[H],N[H]==null&&(q=v[H].el,q!=null&&(N[H]=e.getSize(q))),f[H]=A),E[H]&&!E[H].right&&(E[H].right=E[H].left+N[H][0],E[H].bottom=E[H].top+N[H][1],E[H].width=N[H][0],E[H].height=N[H][1],E[H].centerx=E[H].left+E[H].width/2,E[H].centery=E[H].top+E[H].height/2),{o:E[H],s:N[H]})};this.updateOffset=jt,this.init=function(){C||(ie(),e.router=new K.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,C=!0,e.fire("ready",e))}.bind(this),this.log=u,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var s,A=function(et,ft){if(K.jsPlumb.Anchors[et])return new K.jsPlumb.Anchors[et](ft);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+et+"'"}};if(arguments.length===0)return null;var _=arguments[0],k=arguments[1],H=null;if(_.compute&&_.getOrientation)return _;if(typeof _=="string")H=A(arguments[0],{elementId:k,jsPlumbInstance:e});else if(c.isArray(_))if(c.isArray(_[0])||c.isString(_[0]))_.length===2&&c.isObject(_[1])?c.isString(_[0])?(s=K.jsPlumb.extend({elementId:k,jsPlumbInstance:e},_[1]),H=A(_[0],s)):(s=K.jsPlumb.extend({elementId:k,jsPlumbInstance:e,anchors:_[0]},_[1]),H=new K.jsPlumb.DynamicAnchor(s)):H=new D.DynamicAnchor({anchors:_,selector:null,elementId:k,jsPlumbInstance:e});else{var q={x:_[0],y:_[1],orientation:_.length>=4?[_[2],_[3]]:[0,0],offsets:_.length>=6?[_[4],_[5]]:[0,0],elementId:k,jsPlumbInstance:e,cssClass:_.length===7?_[6]:null};H=new K.jsPlumb.Anchor(q),H.clone=function(){return new K.jsPlumb.Anchor(q)}}return H.id||(H.id="anchor_"+t()),H},this.makeAnchors=function(s,A,_){for(var k=[],H=0,q=s.length;H<q;H++)typeof s[H]=="string"?k.push(K.jsPlumb.Anchors[s[H]]({elementId:A,jsPlumbInstance:_})):c.isArray(s[H])&&k.push(e.makeAnchor(s[H],A,_));return k},this.makeDynamicAnchor=function(s,A){return new K.jsPlumb.DynamicAnchor({anchors:s,selector:A,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Xt=function(s,A,_,k,H){for(var q=s.target||s.srcElement,et=!1,ft=k.getSelector(A,_),ot=0;ot<ft.length;ot++)if(ft[ot]===q){et=!0;break}return H?!et:et},Mt=function(s,A,_,k,H){var q=new l(A),et=A._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return s.def.enabled},isFull:function(){var ot=e.select({target:s.id}).length;return s.def.maxConnections>0&&ot>=s.def.maxConnections},element:s.el,elementId:s.id,isSource:k,isTarget:H,addClass:function(ot){e.addClass(s.el,ot)},removeClass:function(ot){e.removeClass(s.el,ot)},onDrop:function(ot){var ct=ot.endpoints[0];ct.anchor.locked=!1},isDropAllowed:function(){return q.isDropAllowed.apply(q,arguments)},isRedrop:function(ot){return ot.suspendedElement!=null&&ot.suspendedEndpoint!=null&&ot.suspendedEndpoint.element===s.el},getEndpoint:function(ot){var ct=s.def.endpoint;if(ct==null||ct._jsPlumb==null){var ht=e.deriveEndpointAndAnchorSpec(ot.getType().join(" "),!0),Ct=ht.endpoints?K.jsPlumb.extend(A,{endpoint:s.def.def.endpoint||ht.endpoints[1]}):A;ht.anchors&&(Ct=K.jsPlumb.extend(Ct,{anchor:s.def.def.anchor||ht.anchors[1]})),ct=e.addEndpoint(s.el,Ct),ct._mtNew=!0}if(A.uniqueEndpoint&&(s.def.endpoint=ct),ct.setDeleteOnEmpty(!0),ot.isDetachable()&&ct.initDraggable(),ct.anchor.positionFinder!=null){var mt=e.getUIPosition(arguments,e.getZoom()),Dt=e.getOffset(s.el),At=e.getSize(s.el),Ot=mt==null?[0,0]:ct.anchor.positionFinder(mt,Dt,At,ct.anchor.constructorParams);ct.anchor.x=Ot[0],ct.anchor.y=Ot[1]}return ct},maybeCleanup:function(ot){ot._mtNew&&ot.connections.length===0?e.deleteObject({endpoint:ot}):delete ot._mtNew}}),ft=K.jsPlumb.dragEvents.drop;return _.scope=_.scope||A.scope||e.Defaults.Scope,_[ft]=c.wrap(_[ft],et,!0),_.rank=A.rank||0,H&&(_[K.jsPlumb.dragEvents.over]=function(){return!0}),A.allowLoopback===!1&&(_.canDrop=function(ot){var ct=ot.getDragElement()._jsPlumbRelatedElement;return ct!==s.el}),e.initDroppable(s.el,_,"internal"),et};this.makeTarget=function(s,A,_){var k=K.jsPlumb.extend({_jsPlumb:this},_);K.jsPlumb.extend(k,A);for(var H=k.maxConnections||-1,q=function(ct){var ht=w(ct),Ct=ht.id,mt=K.jsPlumb.extend({},k.dropOptions||{}),Dt=k.connectionType||"default";this.targetEndpointDefinitions[Ct]=this.targetEndpointDefinitions[Ct]||{},ee(Ct),ht.el._isJsPlumbGroup&&mt.rank==null&&(mt.rank=-1);var At={def:K.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:H,enabled:!0};k.createEndpoint&&(At.uniqueEndpoint=!0,At.endpoint=e.addEndpoint(ct,At.def),At.endpoint.setDeleteOnEmpty(!1)),ht.def=At,this.targetEndpointDefinitions[Ct][Dt]=At,Mt(ht,k,mt,k.isSource===!0,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=At}.bind(this),et=s.length&&s.constructor!==String?s:[s],ft=0,ot=et.length;ft<ot;ft++)q(et[ft]);return this},this.unmakeTarget=function(s,A){var _=w(s);return e.destroyDroppable(_.el,"internal"),A||delete this.targetEndpointDefinitions[_.id],this},this.makeSource=function(s,A,_){var k=K.jsPlumb.extend({_jsPlumb:this},_);K.jsPlumb.extend(k,A);var H=k.connectionType||"default",q=e.deriveEndpointAndAnchorSpec(H);k.endpoint=k.endpoint||q.endpoints[0],k.anchor=k.anchor||q.anchors[0];for(var et=k.maxConnections||-1,ft=k.onMaxConnections,ot=function(mt){var Dt=mt.id,At=this.getElement(mt.el);this.sourceEndpointDefinitions[Dt]=this.sourceEndpointDefinitions[Dt]||{},ee(Dt);var Ot={def:K.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:et,enabled:!0};k.createEndpoint&&(Ot.uniqueEndpoint=!0,Ot.endpoint=e.addEndpoint(s,Ot.def),Ot.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[Dt][H]=Ot,mt.def=Ot;var ce=K.jsPlumb.dragEvents.stop,fe=K.jsPlumb.dragEvents.drag,zt=K.jsPlumb.extend({},k.dragOptions||{}),De=zt.drag,Se=zt.stop,Lt=null,de=!1;zt.scope=zt.scope||k.scope,zt[fe]=c.wrap(zt[fe],function(){De&&De.apply(this,arguments),de=!1}),zt[ce]=c.wrap(zt[ce],function(){if(Se&&Se.apply(this,arguments),this.currentlyDragging=!1,Lt._jsPlumb!=null){var Rt=k.anchor||this.Defaults.Anchor,Ft=Lt.anchor,pe=Lt.connections[0],Kt=this.makeAnchor(Rt,Dt,this),re=Lt.element;if(Kt.positionFinder!=null){var Wt=e.getOffset(re),Zt=this.getSize(re),ge={left:Wt.left+Ft.x*Zt[0],top:Wt.top+Ft.y*Zt[1]},oe=Kt.positionFinder(ge,Wt,Zt,Kt.constructorParams);Kt.x=oe[0],Kt.y=oe[1]}Lt.setAnchor(Kt,!0),Lt.repaint(),this.repaint(Lt.elementId),pe!=null&&this.repaint(pe.targetId)}}.bind(this));var xe=function(Rt){if(!(Rt.which===3||Rt.button===2)){Dt=this.getId(this.getElement(mt.el));var Ft=this.sourceEndpointDefinitions[Dt][H];if(!!Ft.enabled){if(k.filter){var pe=c.isString(k.filter)?Xt(Rt,mt.el,k.filter,this,k.filterExclude):k.filter(Rt,mt.el);if(pe===!1)return}var Kt=this.select({source:Dt}).length;if(Ft.maxConnections>=0&&Kt>=Ft.maxConnections)return ft&&ft({element:mt.el,maxConnections:et},Rt),!1;var re=K.jsPlumb.getPositionOnElement(Rt,At,B),Wt={};K.jsPlumb.extend(Wt,Ft.def),Wt.isTemporarySource=!0,Wt.anchor=[re[0],re[1],0,0],Wt.dragOptions=zt,Ft.def.scope&&(Wt.scope=Ft.def.scope),Lt=this.addEndpoint(Dt,Wt),de=!0,Lt.setDeleteOnEmpty(!0),Ft.uniqueEndpoint&&(Ft.endpoint?Lt.finalEndpoint=Ft.endpoint:(Ft.endpoint=Lt,Lt.setDeleteOnEmpty(!1)));var Zt=function(){e.off(Lt.canvas,"mouseup",Zt),e.off(mt.el,"mouseup",Zt),de&&(de=!1,e.deleteEndpoint(Lt))};e.on(Lt.canvas,"mouseup",Zt),e.on(mt.el,"mouseup",Zt);var ge={};if(Ft.def.extract)for(var oe in Ft.def.extract){var we=(Rt.srcElement||Rt.target).getAttribute(oe);we&&(ge[Ft.def.extract[oe]]=we)}e.trigger(Lt.canvas,"mousedown",Rt,ge),c.consume(Rt)}}}.bind(this);this.on(mt.el,"mousedown",xe),Ot.trigger=xe,k.filter&&(c.isString(k.filter)||c.isFunction(k.filter))&&e.setDragFilter(mt.el,k.filter);var Oe=K.jsPlumb.extend({},k.dropOptions||{});Mt(mt,k,Oe,!0,k.isTarget===!0)}.bind(this),ct=s.length&&s.constructor!==String?s:[s],ht=0,Ct=ct.length;ht<Ct;ht++)ot(w(ct[ht]));return this},this.unmakeSource=function(s,A,_){var k=w(s);e.destroyDroppable(k.el,"internal");var H=this.sourceEndpointDefinitions[k.id];if(H){for(var q in H)if(A==null||A===q){var et=H[q].trigger;et&&e.off(k.el,"mousedown",et),_||delete this.sourceEndpointDefinitions[k.id][q]}}return this},this.unmakeEverySource=function(){for(var s in this.sourceEndpointDefinitions)e.unmakeSource(s,null,!0);return this.sourceEndpointDefinitions={},this};var Vt=function(s,A,_){A=c.isArray(A)?A:[A];var k=lt(s);_=_||"default";for(var H=0;H<A.length;H++){var q=this[A[H]][k];if(q&&q[_])return q[_].def.scope||this.Defaults.Scope}}.bind(this),$t=function(s,A,_,k){_=c.isArray(_)?_:[_];var H=lt(s);k=k||"default";for(var q=0;q<_.length;q++){var et=this[_[q]][H];et&&et[k]&&(et[k].def.scope=A)}}.bind(this);this.getScope=function(s,A){return Vt(s,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(s){return Vt(s,"sourceEndpointDefinitions")},this.getTargetScope=function(s){return Vt(s,"targetEndpointDefinitions")},this.setScope=function(s,A,_){this.setSourceScope(s,A,_),this.setTargetScope(s,A,_)},this.setSourceScope=function(s,A,_){$t(s,A,"sourceEndpointDefinitions",_),this.setDragScope(s,A)},this.setTargetScope=function(s,A,_){$t(s,A,"targetEndpointDefinitions",_),this.setDropScope(s,A)},this.unmakeEveryTarget=function(){for(var s in this.targetEndpointDefinitions)e.unmakeTarget(s,!0);return this.targetEndpointDefinitions={},this};var tt=function(s,A,_,k,H){var q=s==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,et,ft,ot;if(H=H||"default",A.length&&!c.isString(A)){et=[];for(var ct=0,ht=A.length;ct<ht;ct++)ft=w(A[ct]),q[ft.id]&&q[ft.id][H]&&(et[ct]=q[ft.id][H].enabled,ot=k?!et[ct]:_,q[ft.id][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}else{ft=w(A);var Ct=ft.id;q[Ct]&&q[Ct][H]&&(et=q[Ct][H].enabled,ot=k?!et:_,q[Ct][H].enabled=ot,e[ot?"removeClass":"addClass"](ft.el,"jtk-"+s+"-disabled"))}return et}.bind(this),_t=function(s,A){if(s!=null){if(c.isString(s)||!s.length)return A.apply(this,[s]);if(s.length)return A.apply(this,[s[0]])}}.bind(this);this.toggleSourceEnabled=function(s,A){return tt("source",s,null,!0,A),this.isSourceEnabled(s,A)},this.setSourceEnabled=function(s,A,_){return tt("source",s,A,null,_)},this.isSource=function(s,A){return A=A||"default",_t(s,function(_){var k=this.sourceEndpointDefinitions[w(_).id];return k!=null&&k[A]!=null}.bind(this))},this.isSourceEnabled=function(s,A){return A=A||"default",_t(s,function(_){var k=this.sourceEndpointDefinitions[w(_).id];return k&&k[A]&&k[A].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(s,A){return tt("target",s,null,!0,A),this.isTargetEnabled(s,A)},this.isTarget=function(s,A){return A=A||"default",_t(s,function(_){var k=this.targetEndpointDefinitions[w(_).id];return k!=null&&k[A]!=null}.bind(this))},this.isTargetEnabled=function(s,A){return A=A||"default",_t(s,function(_){var k=this.targetEndpointDefinitions[w(_).id];return k&&k[A]&&k[A].enabled===!0}.bind(this))},this.setTargetEnabled=function(s,A,_){return tt("target",s,A,null,_)},this.ready=function(s){e.bind("ready",s)};var Pt=function(s,A){if(typeof s=="object"&&s.length)for(var _=0,k=s.length;_<k;_++)A(s[_]);else A(s);return e};this.repaint=function(s,A,_){return Pt(s,function(k){b(k,A,_)})},this.revalidate=function(s,A,_){var k=_?s:e.getId(s);e.updateOffset({elId:k,recalc:!0,timestamp:A});var H=e.getDragManager();return H&&H.updateOffsets(k),b(s,null,A)},this.repaintEverything=function(){var s=jsPlumbUtil.uuid(),A;for(A in a)e.updateOffset({elId:A,recalc:!0,timestamp:s});for(A in a)b(A,null,s);return this},this.removeAllEndpoints=function(s,A,_){_=_||[];var k=function(H){var q=w(H),et=a[q.id],ft,ot;if(et)for(_.push(q),ft=0,ot=et.length;ft<ot;ft++)e.deleteEndpoint(et[ft],!1);if(delete a[q.id],A&&q.el&&q.el.nodeType!==3&&q.el.nodeType!==8)for(ft=0,ot=q.el.childNodes.length;ft<ot;ft++)k(q.el.childNodes[ft])};return k(s),this};var yt=function(s,A){e.removeAllEndpoints(s.id,!0,A);for(var _=e.getDragManager(),k=function(q){_&&_.elementRemoved(q.id),e.router.elementRemoved(q.id),e.isSource(q.el)&&e.unmakeSource(q.el),e.isTarget(q.el)&&e.unmakeTarget(q.el),e.destroyDraggable(q.el),e.destroyDroppable(q.el),delete e.floatingConnections[q.id],delete v[q.id],delete E[q.id],q.el&&(e.removeElement(q.el),q.el._jsPlumb=null)},H=1;H<A.length;H++)k(A[H]);k(s)};this.remove=function(s,A){var _=w(s),k=[];return _.text&&_.el.parentNode?_.el.parentNode.removeChild(_.el):_.id&&e.batch(function(){yt(_,k)},A===!0),e},this.empty=function(s,A){var _=[],k=function(H,q){var et=w(H);if(et.text)et.el.parentNode.removeChild(et.el);else if(et.el){for(;et.el.childNodes.length>0;)k(et.el.childNodes[0]);q||yt(et,_)}};return e.batch(function(){k(s,!0)},A===!1),e},this.reset=function(s){e.silently(function(){Yt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),s||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},m.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),r=null,d=null};var Et=function(s){s.canvas&&s.canvas.parentNode&&s.canvas.parentNode.removeChild(s.canvas),s.cleanup(),s.destroy()};this.clear=function(){e.select().each(Et),e.selectEndpoints().each(Et),a={},P={}},this.setDefaultScope=function(s){return n=s,e},this.deriveEndpointAndAnchorSpec=function(s,A){for(var _=((A?"":"default ")+s).split(/[\s]/),k=null,H=null,q=null,et=null,ft=0;ft<_.length;ft++){var ot=e.getType(_[ft],"connection");ot&&(ot.endpoints&&(k=ot.endpoints),ot.endpoint&&(H=ot.endpoint),ot.anchors&&(et=ot.anchors),ot.anchor&&(q=ot.anchor))}return{endpoints:k||[H,H],anchors:et||[q,q]}},this.setId=function(s,A,_){var k;c.isString(s)?k=s:(s=this.getElement(s),k=this.getId(s));var H=this.getConnections({source:k,scope:"*"},!0),q=this.getConnections({target:k,scope:"*"},!0);A=""+A,_?s=this.getElement(A):(s=this.getElement(k),this.setAttribute(s,"id",A)),a[A]=a[k]||[];for(var et=0,ft=a[A].length;et<ft;et++)a[A][et].setElementId(A),a[A][et].setReferenceElement(s);delete a[k],this.sourceEndpointDefinitions[A]=this.sourceEndpointDefinitions[k],delete this.sourceEndpointDefinitions[k],this.targetEndpointDefinitions[A]=this.targetEndpointDefinitions[k],delete this.targetEndpointDefinitions[k],this.router.changeId(k,A);var ot=this.getDragManager();ot&&ot.changeId(k,A),v[A]=v[k],delete v[k];var ct=function(ht,Ct,mt){for(var Dt=0,At=ht.length;Dt<At;Dt++)ht[Dt].endpoints[Ct].setElementId(A),ht[Dt].endpoints[Ct].setReferenceElement(s),ht[Dt][mt+"Id"]=A,ht[Dt][mt]=s};ct(H,0,"source"),ct(q,1,"target"),this.repaint(A)},this.setDebugLog=function(s){u=s},this.setSuspendDrawing=function(s,A){var _=U;return U=s,s?Y=new Date().getTime():Y=null,A&&this.repaintEverything(),_},this.isSuspendDrawing=function(){return U},this.getSuspendedAt=function(){return Y},this.batch=function(s,A){var _=this.isSuspendDrawing();_||this.setSuspendDrawing(!0);try{s()}catch(k){c.log("Function run while suspended failed",k)}_||this.setSuspendDrawing(!1,!A)},this.doWhileSuspended=this.batch,this.getCachedData=dt,this.show=function(s,A){return rt(s,"block",A),e},this.toggleVisible=pt,this.addListener=this.bind;var wt=[];this.registerFloatingConnection=function(s,A,_){wt[s.id]=A,c.addToList(a,s.id,_)},this.getFloatingConnectionFor=function(s){return wt[s]},this.listManager=new K.jsPlumbListManager(this,this.Defaults.ListStyle)};c.extend(K.jsPlumbInstance,c.EventGenerator,{setAttribute:function(p,e,O){this.setAttribute(p,e,O)},getAttribute:function(p,e){return this.getAttribute(K.jsPlumb.getElement(p),e)},convertToFullOverlaySpec:function(p){return c.isString(p)&&(p=[p,{}]),p[1].id=p[1].id||c.uuid(),p},registerConnectionType:function(p,e){if(this._connectionTypes[p]=K.jsPlumb.extend({},e),e.overlays){for(var O={},L=0;L<e.overlays.length;L++){var G=this.convertToFullOverlaySpec(e.overlays[L]);O[G[1].id]=G}this._connectionTypes[p].overlays=O}},registerConnectionTypes:function(p){for(var e in p)this.registerConnectionType(e,p[e])},registerEndpointType:function(p,e){if(this._endpointTypes[p]=K.jsPlumb.extend({},e),e.overlays){for(var O={},L=0;L<e.overlays.length;L++){var G=this.convertToFullOverlaySpec(e.overlays[L]);O[G[1].id]=G}this._endpointTypes[p].overlays=O}},registerEndpointTypes:function(p){for(var e in p)this.registerEndpointType(e,p[e])},getType:function(p,e){return e==="connection"?this._connectionTypes[p]:this._endpointTypes[p]},setIdChanged:function(p,e){this.setId(p,e,!0)},setParent:function(p,e){var O=this.getElement(p),L=this.getId(O),G=this.getElement(e),B=this.getId(G),w=this.getDragManager();O.parentNode.removeChild(O),G.appendChild(O),w&&w.setParent(O,L,G,B)},extend:function(p,e,O){var L;if(O)for(L=0;L<O.length;L++)p[O[L]]=e[O[L]];else for(L in e)p[L]=e[L];return p},floatingConnections:{},getFloatingAnchorIndex:function(p){return p.endpoints[0].isFloating()?0:p.endpoints[1].isFloating()?1:-1},proxyConnection:function(p,e,O,L,G,B){var w,j=p.endpoints[e].elementId,r=p.endpoints[e];p.proxies=p.proxies||[],p.proxies[e]?w=p.proxies[e].ep:w=this.addEndpoint(O,{endpoint:G(p,e),anchor:B(p,e),parameters:{isProxyEndpoint:!0}}),w.setDeleteOnEmpty(!0),p.proxies[e]={ep:w,originalEp:r},e===0?this.router.sourceOrTargetChanged(j,L,p,O,0):this.router.sourceOrTargetChanged(j,L,p,O,1),r.detachFromConnection(p,null,!0),w.connections=[p],p.endpoints[e]=w,r.setVisible(!1),p.setVisible(!0),this.revalidate(O)},unproxyConnection:function(p,e,O){if(!(p._jsPlumb==null||p.proxies==null||p.proxies[e]==null)){var L=p.proxies[e].originalEp.element,G=p.proxies[e].originalEp.elementId;p.endpoints[e]=p.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(O,G,p,L,0):this.router.sourceOrTargetChanged(O,G,p,L,1),p.proxies[e].ep.detachFromConnection(p,null),p.proxies[e].originalEp.addConnection(p),p.isVisible()&&p.proxies[e].originalEp.setVisible(!0),delete p.proxies[e]}}});var D=new T;K.jsPlumb=D,D.getInstance=function(p,e){var O=new T(p);if(e)for(var L in e)O[L]=e[L];return O.init(),O},D.each=function(p,e){if(p!=null)if(typeof p=="string")e(D.getElement(p));else if(p.length!=null)for(var O=0;O<p.length;O++)e(D.getElement(p[O]));else e(p)},xt.jsPlumb=D}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt="__label",Z=function(h,M){var l={cssClass:M.cssClass,labelStyle:h.labelStyle,id:nt,component:h,_jsPlumb:h._jsPlumb.instance},i=c.extend(l,M);return new c.Overlays[h._jsPlumb.instance.getRenderMode()].Label(i)},W=function(h,M){var l=null;if(V.isArray(M)){var i=M[0],y=c.extend({component:h,_jsPlumb:h._jsPlumb.instance},M[1]);M.length===3&&c.extend(y,M[2]),l=new c.Overlays[h._jsPlumb.instance.getRenderMode()][i](y)}else M.constructor===String?l=new c.Overlays[h._jsPlumb.instance.getRenderMode()][M]({component:h,_jsPlumb:h._jsPlumb.instance}):l=M;return l.id=l.id||V.uuid(),h.cacheTypeItem("overlay",l,l.id),h._jsPlumb.overlays[l.id]=l,l};c.OverlayCapableJsPlumbUIComponent=function(h){K.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},h.label&&(this.getDefaultType().overlays[nt]=["Label",{label:h.label,location:h.labelLocation||this.defaultLabelLocation||.5,labelStyle:h.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:nt}]),this.setListenerComponent=function(M){if(this._jsPlumb)for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].setListenerComponent(M)}},c.OverlayCapableJsPlumbUIComponent.applyType=function(h,M){if(M.overlays){var l={},i;for(i in M.overlays){var y=h._jsPlumb.overlays[M.overlays[i][1].id];if(y)y.updateFrom(M.overlays[i][1]),l[M.overlays[i][1].id]=!0,y.reattach(h._jsPlumb.instance,h);else{var S=h.getCachedTypeItem("overlay",M.overlays[i][1].id);S!=null?(S.reattach(h._jsPlumb.instance,h),S.setVisible(!0),S.updateFrom(M.overlays[i][1]),h._jsPlumb.overlays[S.id]=S):S=h.addOverlay(M.overlays[i],!0),l[S.id]=!0}}for(i in h._jsPlumb.overlays)l[h._jsPlumb.overlays[i].id]==null&&h.removeOverlay(h._jsPlumb.overlays[i].id,!0)}},V.extend(c.OverlayCapableJsPlumbUIComponent,K.jsPlumbUIComponent,{setHover:function(h,M){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l][h?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(h,M){var l=W(this,h);if(this.getData&&l.type==="Label"&&V.isArray(h)){var i=this.getData(),y=h[1];if(i){var S=y.labelLocationAttribute||"labelLocation",T=i?i[S]:null;T&&(l.loc=T)}}return M||this.repaint(),l},getOverlay:function(h){return this._jsPlumb.overlays[h]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(h){var M=this.getOverlay(h);M&&M.hide()},hideOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].hide()},showOverlay:function(h){var M=this.getOverlay(h);M&&M.show()},showOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].show()},removeAllOverlays:function(h){for(var M in this._jsPlumb.overlays)this._jsPlumb.overlays[M].cleanup&&this._jsPlumb.overlays[M].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},h||this.repaint()},removeOverlay:function(h,M){var l=this._jsPlumb.overlays[h];l&&(l.setVisible(!1),!M&&l.cleanup&&l.cleanup(),delete this._jsPlumb.overlays[h],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[h],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[h])},removeOverlays:function(){for(var h=0,M=arguments.length;h<M;h++)this.removeOverlay(arguments[h])},moveParent:function(h){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),h.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),h.appendChild(this.canvas);for(var M in this._jsPlumb.overlays)if(this._jsPlumb.overlays[M].isAppendedAtTopLevel){var l=this._jsPlumb.overlays[M].getElement();l.parentNode.removeChild(l),h.appendChild(l)}}},getLabel:function(){var h=this.getOverlay(nt);return h!=null?h.getLabel():null},getLabelOverlay:function(){return this.getOverlay(nt)},setLabel:function(h){var M=this.getOverlay(nt);if(M)h.constructor===String||h.constructor===Function?M.setLabel(h):(h.label&&M.setLabel(h.label),h.location&&M.setLocation(h.location));else{var l=h.constructor===String||h.constructor===Function?{label:h}:h;M=Z(this,l),this._jsPlumb.overlays[nt]=M}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(h){for(var M in this._jsPlumb.overlays)this._jsPlumb.overlays[M].cleanup(h),this._jsPlumb.overlays[M].destroy(h);h&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(h){this[h?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(h,M){this._jsPlumb.overlayPositions[h.id]=M},getAbsoluteOverlayPosition:function(h){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[h.id]:null},_clazzManip:function(h,M,l){if(!l)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][h+"Class"](M)},addClass:function(h,M){this._clazzManip("add",h,M)},removeClass:function(h,M){this._clazzManip("remove",h,M)}})}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt=function(l,i,y){var S=!1;return{drag:function(){if(S)return S=!1,!0;if(i.element){var T=y.getUIPosition(arguments,y.getZoom());T!=null&&y.setPosition(i.element,T),y.repaint(i.element,T),l.paint({anchorPoint:l.anchor.getCurrentLocation({element:l})})}},stopDrag:function(){S=!0}}},Z=function(l,i,y,S){var T=i.createElement("div",{position:"absolute"});i.appendElement(T);var D=i.getId(T);i.setPosition(T,y),T.style.width=S[0]+"px",T.style.height=S[1]+"px",i.manage(D,T,!0),l.id=D,l.element=T},W=function(l,i,y,S,T,D,p,e){var O=new c.FloatingAnchor({reference:i,referenceCanvas:S,jsPlumbInstance:D});return p({paintStyle:l,endpoint:y,anchor:O,source:T,scope:e})},h=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],M=function(l,i){var y=0;if(i!=null){for(var S=0;S<l.connections.length;S++)if(l.connections[S].sourceId===i||l.connections[S].targetId===i){y=S;break}}return l.connections[y]};c.Endpoint=function(l){var i=l._jsPlumb,y=l.newConnection,S=l.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:l.connectionType,maxConnections:l.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:l.maxConnections,paintStyle:l.endpointStyle||l.paintStyle||l.style||this._jsPlumb.instance.Defaults.EndpointStyle||c.Defaults.EndpointStyle,hoverPaintStyle:l.endpointHoverStyle||l.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle,connectorStyle:l.connectorStyle,connectorHoverStyle:l.connectorHoverStyle,connectorClass:l.connectorClass,connectorHoverClass:l.connectorHoverClass,connectorOverlays:l.connectorOverlays,connector:l.connector,connectorTooltip:l.connectorTooltip}),this._jsPlumb.enabled=l.enabled!==!1,this._jsPlumb.visible=!0,this.element=c.getElement(l.source),this._jsPlumb.uuid=l.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(l.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=l.elementId,this.dragProxy=l.dragProxy,this._jsPlumb.connectionCost=l.connectionCost,this._jsPlumb.connectionsDirected=l.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var T=l.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(w){T=w};var D=function(){var w=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var j=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(w),this.addClass(j),c.updateClasses(this.element,j,w)}.bind(this);this.prepareAnchor=function(w){var j=this._jsPlumb.instance.makeAnchor(w,this.elementId,i);return j.bind("anchorChanged",function(r){this.fire("anchorChanged",{endpoint:this,anchor:r}),D()}.bind(this)),j},this.setPreparedAnchor=function(w,j){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=w,D(),j||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(w,j){var r=this.prepareAnchor(w);return this.setPreparedAnchor(r,j),this};var p=function(w){if(this.connections.length>0)for(var j=0;j<this.connections.length;j++)this.connections[j].setHover(w,!1);else this.setHover(w)}.bind(this);this.bind("mouseover",function(){p(!0)}),this.bind("mouseout",function(){p(!1)}),l._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(w,j){var r=function(C,m){var a=i.getRenderMode();if(c.Endpoints[a][C])return new c.Endpoints[a][C](m);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+C+"'"}},d={_jsPlumb:this._jsPlumb.instance,cssClass:l.cssClass,container:l.container,tooltip:l.tooltip,connectorTooltip:l.connectorTooltip,endpoint:this},u;return V.isString(w)?u=r(w,d):V.isArray(w)?(d=V.merge(w[1],d),u=r(w[0],d)):u=w.clone(),u.clone=function(){if(V.isString(w))return r(w,d);if(V.isArray(w))return d=V.merge(w[1],d),r(w[0],d)}.bind(this),u.typeId=j,u},this.setEndpoint=function(w,j){var r=this.prepareEndpoint(w);this.setPreparedEndpoint(r,!0)},this.setPreparedEndpoint=function(w,j){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=w,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},c.extend(this,l,h),this.isSource=l.isSource||!1,this.isTemporarySource=l.isTemporarySource||!1,this.isTarget=l.isTarget||!1,this.connections=l.connections||[],this.connectorPointerEvents=l["connector-pointer-events"],this.scope=l.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=l.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,(l.connectionsDetachable===!1||l.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=l.dragAllowedWhenFull!==!1,l.onMaxConnections&&this.bind("maxConnections",l.onMaxConnections),this.addConnection=function(w){this.connections.push(w),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(w,j,r){j=j==null?this.connections.indexOf(w):j,j>=0&&(this.connections.splice(j,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!r&&T&&this.connections.length===0&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:r!==!0})},this.deleteEveryConnection=function(w){for(var j=this.connections.length,r=0;r<j;r++)i.deleteConnection(this.connections[0],w)},this.detachFrom=function(w,j,r){for(var d=[],u=0;u<this.connections.length;u++)(this.connections[u].endpoints[1]===w||this.connections[u].endpoints[0]===w)&&d.push(this.connections[u]);for(var C=0,m=d.length;C<m;C++)i.deleteConnection(d[0]);return this},this.getElement=function(){return this.element},this.setElement=function(w){var j=this._jsPlumb.instance.getId(w),r=this.elementId;return V.removeWithFunction(l.endpointsByElement[this.elementId],function(d){return d.id===this.id}.bind(this)),this.element=c.getElement(w),this.elementId=i.getId(this.element),i.router.rehomeEndpoint(this,r,this.element),i.dragManager.endpointAdded(this.element),V.addToList(l.endpointsByElement,j,this),this},this.makeInPlaceCopy=function(){var w=this.anchor.getCurrentLocation({element:this}),j=this.anchor.getOrientation(this),r=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[w[0],w[1]]},getCurrentLocation:function(){return[w[0],w[1]]},getOrientation:function(){return j},getCssClass:function(){return r}};return S({dropOptions:l.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:l.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(w){w=w||{};var j=w.timestamp,r=w.recalc!==!1;if(!j||this.timestamp!==j){var d=i.updateOffset({elId:this.elementId,timestamp:j}),u=w.offset?w.offset.o:d.o;if(u!=null){var C=w.anchorPoint,m=w.connectorPaintStyle;if(C==null){var a=w.dimensions||d.s,P={xy:[u.left,u.top],wh:a,element:this,timestamp:j};if(r&&this.anchor.isDynamic&&this.connections.length>0){var v=M(this,w.elementWithPrecedence),E=v.endpoints[0]===this?1:0,f=E===0?v.sourceId:v.targetId,x=i.getCachedData(f),N=x.o,U=x.s;P.index=E===0?1:0,P.connection=v,P.txy=[N.left,N.top],P.twh=U,P.tElement=v.endpoints[E],P.tRotation=i.getRotation(f)}else this.connections.length>0&&(P.connection=this.connections[0]);P.rotation=i.getRotation(this.elementId),C=this.anchor.compute(P)}this.endpoint.compute(C,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,m||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=j;for(var Y in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(Y)){var n=this._jsPlumb.overlays[Y];n.isVisible()&&(this._jsPlumb.overlayPlacements[Y]=n.draw(this.endpoint,this._jsPlumb.paintStyleInUse),n.paint(this._jsPlumb.overlayPlacements[Y]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&c.isDragSupported(this.element)){var w={id:null,element:null},j=null,r=!1,d=null,u=nt(this,w,i),C=l.dragOptions||{},m={},a=c.dragEvents.start,P=c.dragEvents.stop,v=c.dragEvents.drag,E=c.dragEvents.beforeStart,f,x=function(Y){f=Y.e.payload||{}},N=function(Y){j=this.connectorSelector();var n=!0;this.isEnabled()||(n=!1),j==null&&!this.isSource&&!this.isTemporarySource&&(n=!1),this.isSource&&this.isFull()&&!(j!=null&&this.dragAllowedWhenFull)&&(n=!1),j!=null&&!j.isDetachable(this)&&(this.isFull()?n=!1:j=null);var o=i.checkCondition(j==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:j});if(o===!1?n=!1:typeof o=="object"?c.extend(o,f||{}):o=f||{},n===!1)return i.stopDrag&&i.stopDrag(this.canvas),u.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),j&&!this.isFull()&&this.isSource&&(j=null),i.updateOffset({elId:this.elementId});var g=this._jsPlumb.instance.getOffset(this.canvas),b=this.canvas,I=this._jsPlumb.instance.getSize(this.canvas);Z(w,i,g,I),i.setAttributes(this.canvas,{dragId:w.id,elId:this.elementId});var F=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var X=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);X.endpoints[1]&&(F=X.endpoints[1])}var R=this._jsPlumb.instance.makeAnchor("Center");R.isFloating=!0,this._jsPlumb.floatingEndpoint=W(this.getPaintStyle(),R,F,this.canvas,w.element,i,S,this.scope);var z=this._jsPlumb.floatingEndpoint.anchor;if(j==null)this.setHover(!1,!1),j=y({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:w.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:l.connectorStyle,hoverPaintStyle:l.connectorHoverStyle,connector:l.connector,overlays:l.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:l.scope,data:o}),j.pending=!0,j.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=z,i.fire("connectionDrag",j),i.router.newConnection(j);else{r=!0,j.setHover(!1);var at=j.endpoints[0].id===this.id?0:1;this.detachFromConnection(j,null,!0);var st=i.getDragScope(b);i.setAttribute(this.canvas,"originalScope",st),i.fire("connectionDrag",j),at===0?(d=[j.source,j.sourceId,b,st],i.router.sourceOrTargetChanged(j.endpoints[at].elementId,w.id,j,w.element,0)):(d=[j.target,j.targetId,b,st],i.router.sourceOrTargetChanged(j.endpoints[at].elementId,w.id,j,w.element,1)),j.suspendedEndpoint=j.endpoints[at],j.suspendedElement=j.endpoints[at].getElement(),j.suspendedElementId=j.endpoints[at].elementId,j.suspendedElementType=at===0?"source":"target",j.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=j.suspendedEndpoint,j.endpoints[at]=this._jsPlumb.floatingEndpoint,j.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(w,j,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),U=function(){if(i.setConnectionBeingDragged(!1),j&&j.endpoints!=null){var Y=i.getDropEvent(arguments),n=i.getFloatingAnchorIndex(j);if(j.endpoints[n===0?1:0].anchor.locked=!1,j.removeClass(i.draggingClass),this._jsPlumb&&(j.deleteConnectionNow||j.endpoints[n]===this._jsPlumb.floatingEndpoint)&&r&&j.suspendedEndpoint){n===0?(j.floatingElement=j.source,j.floatingId=j.sourceId,j.floatingEndpoint=j.endpoints[0],j.floatingIndex=0,j.source=d[0],j.sourceId=d[1]):(j.floatingElement=j.target,j.floatingId=j.targetId,j.floatingEndpoint=j.endpoints[1],j.floatingIndex=1,j.target=d[0],j.targetId=d[1]);var o=this._jsPlumb.floatingEndpoint;i.setDragScope(d[2],d[3]),j.endpoints[n]=j.suspendedEndpoint,j.isReattach()||j._forceReattach||j._forceDetach||!i.deleteConnection(j,{originalEvent:Y})?(j.setHover(!1),j._forceDetach=null,j._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(j),j.suspendedEndpoint.addConnection(j),n===1?i.router.sourceOrTargetChanged(j.floatingId,j.targetId,j,j.target,n):i.router.sourceOrTargetChanged(j.floatingId,j.sourceId,j,j.source,n),i.repaint(d[1])):i.deleteObject({endpoint:o})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",j,Y),j.pending&&i.fire("connectionAborted",j,Y),i.currentlyDragging=!1,j.suspendedElement=null,j.suspendedEndpoint=null,j=null}w&&w.element&&i.remove(w.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);C=c.extend(m,C),C.scope=this.scope||C.scope,C[E]=V.wrap(C[E],x,!1),C[a]=V.wrap(C[a],N,!1),C[v]=V.wrap(C[v],u.drag),C[P]=V.wrap(C[P],U),C.multipleDrop=!1,C.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),i.initDraggable(this.canvas,C,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var O=l.endpoint||this._jsPlumb.instance.Defaults.Endpoint||c.Defaults.Endpoint;this.setEndpoint(O,!0);var L=l.anchor?l.anchor:l.anchors?l.anchors:i.Defaults.Anchor||"Top";this.setAnchor(L,!0);var G=["default",l.type||""].join(" ");this.addType(G,l.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var B=function(w,j,r,d){if(c.isDropSupported(this.element)){var u=l.dropOptions||i.Defaults.DropOptions||c.Defaults.DropOptions;u=c.extend({},u),u.scope=u.scope||this.scope;var C=c.dragEvents.drop,m=c.dragEvents.over,a=c.dragEvents.out,P=this,v=i.EndpointDropHandler({getEndpoint:function(){return P},jsPlumb:i,enabled:function(){return r!=null?r.isEnabled():!0},isFull:function(){return r.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(E){P.addClass(E)},removeClass:function(E){P.removeClass(E)},isDropAllowed:function(){return P.isDropAllowed.apply(P,arguments)},reference:d,isRedrop:function(E,f){return E.suspendedEndpoint&&f.reference&&E.suspendedEndpoint.id===f.reference.id}});u[C]=V.wrap(u[C],v,!0),u[m]=V.wrap(u[m],function(){var E=c.getDragObject(arguments),f=i.getAttribute(c.getElement(E),"dragId"),x=i.getFloatingConnectionFor(f);if(x!=null){var N=i.getFloatingAnchorIndex(x),U=this.isTarget&&N!==0||x.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===x.suspendedEndpoint.id;if(U){var Y=i.checkCondition("checkDropAllowed",{sourceEndpoint:x.endpoints[N],targetEndpoint:this,connection:x});this[(Y?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(Y?"remove":"add")+"Class"](i.endpointDropForbiddenClass),x.endpoints[N].anchor.over(this.anchor,this)}}}.bind(this)),u[a]=V.wrap(u[a],function(){var E=c.getDragObject(arguments),f=E==null?null:i.getAttribute(c.getElement(E),"dragId"),x=f?i.getFloatingConnectionFor(f):null;if(x!=null){var N=i.getFloatingAnchorIndex(x),U=this.isTarget&&N!==0||x.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===x.suspendedEndpoint.id;U&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),x.endpoints[N].anchor.out())}}.bind(this)),i.initDroppable(w,u,"internal",j)}}.bind(this);return this.anchor.isFloating||B(this.canvas,!(l._transient||this.anchor.isFloating),this,l.reference),this},V.extend(c.Endpoint,c.OverlayCapableJsPlumbUIComponent,{setVisible:function(l,i,y){if(this._jsPlumb.visible=l,this.canvas&&(this.canvas.style.display=l?"block":"none"),this[l?"showOverlays":"hideOverlays"](),!i){for(var S=0;S<this.connections.length;S++)if(this.connections[S].setVisible(l),!y){var T=this===this.connections[S].endpoints[0]?1:0;this.connections[S].endpoints[T].connections.length===1&&this.connections[S].endpoints[T].setVisible(l,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(l,i){this.setPaintStyle(l.endpointStyle||l.paintStyle,i),this.setHoverPaintStyle(l.endpointHoverStyle||l.hoverPaintStyle,i),l.maxConnections!=null&&(this._jsPlumb.maxConnections=l.maxConnections),l.scope&&(this.scope=l.scope),c.extend(this,l,h),l.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,l.cssClass),c.OverlayCapableJsPlumbUIComponent.applyType(this,l)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(l){this._jsPlumb.enabled=l},cleanup:function(){var l=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");c.removeClass(this.element,l),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(l){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(l)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(l){var i=!1;if(l){for(var y=0;y<this.connections.length;y++)if(this.connections[y].endpoints[1]===l||this.connections[y].endpoints[0]===l){i=!0;break}}return i},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(l){this._jsPlumb.connectionCost=l},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(l){this._jsPlumb.connectionsDirected=l},setElementId:function(l){this.elementId=l,this.anchor.elementId=l},setReferenceElement:function(l){this.element=c.getElement(l)},setDragAllowedWhenFull:function(l){this.dragAllowedWhenFull=l},equals:function(l){return this.anchor.equals(l.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(l){return this.anchor.compute(l)}}),K.jsPlumbInstance.prototype.EndpointDropHandler=function(l){return function(i){var y=l.jsPlumb;l.removeClass(y.endpointDropAllowedClass),l.removeClass(y.endpointDropForbiddenClass);var S=y.getDropEvent(arguments),T=y.getDragObject(arguments),D=y.getAttribute(T,"dragId");y.getAttribute(T,"elId");var p=y.getAttribute(T,"originalScope"),e=y.getFloatingConnectionFor(D);if(e!=null){var O=e.suspendedEndpoint!=null;if(!(O&&e.suspendedEndpoint._jsPlumb==null)){var L=l.getEndpoint(e);if(L!=null){if(l.isRedrop(e,l)){e._forceReattach=!0,e.setHover(!1),l.maybeCleanup&&l.maybeCleanup(L);return}var G=y.getFloatingAnchorIndex(e);if(G===0&&!l.isSource||G===1&&!l.isTarget){l.maybeCleanup&&l.maybeCleanup(L);return}l.onDrop&&l.onDrop(e),p&&y.setDragScope(T,p);var B=l.isFull(i);if(B&&L.fire("maxConnections",{endpoint:this,connection:e,maxConnections:L._jsPlumb.maxConnections},S),!B&&l.enabled()){var w=!0;G===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=l.element,e.sourceId=y.getId(l.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=l.element,e.targetId=y.getId(l.element)),O&&e.suspendedEndpoint.id!==L.id&&(!e.isDetachAllowed(e)||!e.endpoints[G].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!y.checkCondition("beforeDetach",e))&&(w=!1);var j=function(d){e.endpoints[G].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[G]=L,L.addConnection(e);var u=L.getParameters();for(var C in u)e.setParameter(C,u[C]);if(!O)u.draggable&&y.initDraggable(this.element,l.dragOptions,"internal",y);else{var m=e.suspendedEndpoint.elementId;y.fireMoveEvent({index:G,originalSourceId:G===0?m:e.sourceId,newSourceId:G===0?L.elementId:e.sourceId,originalTargetId:G===1?m:e.targetId,newTargetId:G===1?L.elementId:e.targetId,originalSourceEndpoint:G===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:G===0?L:e.endpoints[0],originalTargetEndpoint:G===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:G===1?L:e.endpoints[1],connection:e},S)}if(G===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var a=e.endpoints[0];a.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}V.isObject(d)&&e.mergeData(d),y.finaliseConnection(e,null,S,!1),e.setHover(!1),y.revalidate(e.endpoints[0].element)}.bind(this),r=function(){e.suspendedEndpoint&&(e.endpoints[G]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,G===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),G===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),y.repaint(e.sourceId),e._forceDetach=!1)};if(w=w&&l.isDropAllowed(e.sourceId,e.targetId,e.scope,e,L),w)return j(w),!0;r()}l.maybeCleanup&&l.maybeCleanup(L),y.currentlyDragging=!1}}}}}}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt=function(h,M,l,i,y){if(c.Connectors[M]=c.Connectors[M]||{},c.Connectors[M][l]==null){if(c.Connectors[l]==null){if(h.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+l+"'")}c.Connectors[M][l]=function(){c.Connectors[l].apply(this,arguments),c.ConnectorRenderers[M].apply(this,arguments)},V.extend(c.Connectors[M][l],[c.Connectors[l],c.ConnectorRenderers[M]])}return new c.Connectors[M][l](i,y)},Z=function(h,M,l){return h?l.makeAnchor(h,M,l):null},W=function(h,M,l,i){M!=null&&(M._jsPlumbConnections=M._jsPlumbConnections||{},i?delete M._jsPlumbConnections[h.id]:M._jsPlumbConnections[h.id]=!0,V.isEmpty(M._jsPlumbConnections)?l.removeClass(M,l.connectedClass):l.addClass(M,l.connectedClass))};c.Connection=function(h){var M=h.newEndpoint;this.id=h.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=h.previousConnection,this.source=c.getElement(h.source),this.target=c.getElement(h.target),c.OverlayCapableJsPlumbUIComponent.apply(this,arguments),h.sourceEndpoint?(this.source=h.sourceEndpoint.getElement(),this.sourceId=h.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),h.targetEndpoint?(this.target=h.targetEndpoint.getElement(),this.targetId=h.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=h.scope,this.endpoints=[],this.endpointStyles=[];var l=this._jsPlumb.instance;l.manage(this.sourceId,this.source),l.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:h.cssClass,container:h.container,"pointer-events":h["pointer-events"],editorParams:h.editorParams,overlays:h.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(C,m,a,P,v){return a=a||this._jsPlumb.instance.getId(m),this.prepareEndpoint(l,M,this,P,C?0:1,h,m,a,v)},h.type&&(h.endpoints=h.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(h.type).endpoints);var i=this.makeEndpoint(!0,this.source,this.sourceId,h.sourceEndpoint),y=this.makeEndpoint(!1,this.target,this.targetId,h.targetEndpoint);i&&V.addToList(h.endpointsByElement,this.sourceId,i),y&&V.addToList(h.endpointsByElement,this.targetId,y),this.scope||(this.scope=this.endpoints[0].scope),h.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(h.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(h.deleteEndpointsOnEmpty));var S=l.Defaults.ConnectionsDetachable;h.detachable===!1&&(S=!1),this.endpoints[0].connectionsDetachable===!1&&(S=!1),this.endpoints[1].connectionsDetachable===!1&&(S=!1);var T=h.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||l.Defaults.ReattachConnections;this.appendToDefaultType({detachable:S,reattach:T,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||h.paintStyle||l.Defaults.PaintStyle||c.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||h.hoverPaintStyle||l.Defaults.HoverPaintStyle||c.Defaults.HoverPaintStyle});var D=l.getSuspendedAt();if(!l.isSuspendDrawing()){var p=l.getCachedData(this.sourceId),e=p.o,O=p.s,L=l.getCachedData(this.targetId),G=L.o,B=L.s,w=D||jsPlumbUtil.uuid(),j=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:O,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[G.left,G.top],twh:B,tElement:this.endpoints[1],timestamp:w,rotation:l.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:j,timestamp:w}),j=this.endpoints[1].anchor.compute({xy:[G.left,G.top],wh:B,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:O,tElement:this.endpoints[0],timestamp:w,rotation:l.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:j,timestamp:w})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(C){return this._jsPlumb.detachable===!1?!1:C!=null?C.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(C){this._jsPlumb.detachable=C===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(C){this._jsPlumb.reattach=C===!0},this._jsPlumb.cost=h.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=h.directed,h.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var r=c.extend({},this.endpoints[1].getParameters());c.extend(r,this.endpoints[0].getParameters()),c.extend(r,this.getParameters()),this.setParameters(r),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||h.connector||l.Defaults.Connector||c.Defaults.Connector,!0);var d=h.data==null||!V.isObject(h.data)?{}:h.data;this.getData=function(){return d},this.setData=function(C){d=C||{}},this.mergeData=function(C){d=c.extend(d,C)};var u=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,h.type].join(" ");/[^\s]/.test(u)&&this.addType(u,h.data,!0),this.updateConnectedClass()},V.extend(c.Connection,c.OverlayCapableJsPlumbUIComponent,{applyType:function(h,M,l){var i=null;h.connector!=null&&(i=this.getCachedTypeItem("connector",l.connector),i==null&&(i=this.prepareConnector(h.connector,l.connector),this.cacheTypeItem("connector",i,l.connector)),this.setPreparedConnector(i)),h.detachable!=null&&this.setDetachable(h.detachable),h.reattach!=null&&this.setReattach(h.reattach),h.scope&&(this.scope=h.scope),h.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,h.cssClass);var y=null;h.anchor?(y=this.getCachedTypeItem("anchors",l.anchor),y==null&&(y=[this._jsPlumb.instance.makeAnchor(h.anchor),this._jsPlumb.instance.makeAnchor(h.anchor)],this.cacheTypeItem("anchors",y,l.anchor))):h.anchors&&(y=this.getCachedTypeItem("anchors",l.anchors),y==null&&(y=[this._jsPlumb.instance.makeAnchor(h.anchors[0]),this._jsPlumb.instance.makeAnchor(h.anchors[1])],this.cacheTypeItem("anchors",y,l.anchors))),y!=null&&(this.endpoints[0].anchor=y[0],this.endpoints[1].anchor=y[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),c.OverlayCapableJsPlumbUIComponent.applyType(this,h)},addClass:function(h,M){M&&(this.endpoints[0].addClass(h),this.endpoints[1].addClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(h)),this.connector&&this.connector.addClass(h)},removeClass:function(h,M){M&&(this.endpoints[0].removeClass(h),this.endpoints[1].removeClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(h)),this.connector&&this.connector.removeClass(h)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(h){this._jsPlumb.visible=h,this.connector&&this.connector.setVisible(h),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(h){this._jsPlumb&&(W(this,this.source,this._jsPlumb.instance,h),W(this,this.target,this._jsPlumb.instance,h))},setHover:function(h){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(h),K.jsPlumb[h?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),K.jsPlumb[h?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(h){this._jsPlumb.cost=h},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(h,M){var l={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},i=this._jsPlumb.instance.getRenderMode(),y;return V.isString(h)?y=nt(this._jsPlumb.instance,i,h,l,this):V.isArray(h)&&(h.length===1?y=nt(this._jsPlumb.instance,i,h[0],l,this):y=nt(this._jsPlumb.instance,i,h[0],V.merge(h[1],l),this)),M!=null&&(y.typeId=M),y},setPreparedConnector:function(h,M,l,i){if(this.connector!==h){var y,S="";if(this.connector!=null&&(y=this.connector,S=y.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=h,i&&this.cacheTypeItem("connector",h,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(S),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),y!=null)for(var T=this.getOverlays(),D=0;D<T.length;D++)T[D].transfer&&T[D].transfer(this.connector);l||this.setListenerComponent(this.connector),M||this.repaint()}},setConnector:function(h,M,l,i){var y=this.prepareConnector(h,i);this.setPreparedConnector(y,M,l,i)},paint:function(h){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){h=h||{};var M=h.timestamp,l=!1,i=l?this.sourceId:this.targetId,y=l?this.targetId:this.sourceId,S=l?0:1,T=l?1:0;if(M==null||M!==this._jsPlumb.lastPaintedAt){var D=this._jsPlumb.instance.updateOffset({elId:y}).o,p=this._jsPlumb.instance.updateOffset({elId:i}).o,e=this.endpoints[T],O=this.endpoints[S],L=e.anchor.getCurrentLocation({xy:[D.left,D.top],wh:[D.width,D.height],element:e,timestamp:M,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),G=O.anchor.getCurrentLocation({xy:[p.left,p.top],wh:[p.width,p.height],element:O,timestamp:M,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:L,targetPos:G,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:O.anchor.getOrientation(O),sourceEndpoint:this.endpoints[T],targetEndpoint:this.endpoints[S],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:D,targetInfo:p});var B={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var w in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(w)){var j=this._jsPlumb.overlays[w];j.isVisible()&&(this._jsPlumb.overlayPlacements[w]=j.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(j)),B.minX=Math.min(B.minX,this._jsPlumb.overlayPlacements[w].minX),B.maxX=Math.max(B.maxX,this._jsPlumb.overlayPlacements[w].maxX),B.minY=Math.min(B.minY,this._jsPlumb.overlayPlacements[w].minY),B.maxY=Math.max(B.maxY,this._jsPlumb.overlayPlacements[w].maxY))}var r=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,d=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(r+d),B.minX),ymin:Math.min(this.connector.bounds.minY-(r+d),B.minY),xmax:Math.max(this.connector.bounds.maxX+(r+d),B.maxX),ymax:Math.max(this.connector.bounds.maxY+(r+d),B.maxY)};this.connector.paintExtents=u,this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var C in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(C)){var m=this._jsPlumb.overlays[C];m.isVisible()&&m.paint(this._jsPlumb.overlayPlacements[C],u)}}this._jsPlumb.lastPaintedAt=M}},repaint:function(h){var M=jsPlumb.extend(h||{},{});M.elId=this.sourceId,this.paint(M)},prepareEndpoint:function(h,M,l,i,y,S,T,D,p){var e;if(i)l.endpoints[y]=i,i.addConnection(l);else{S.endpoints||(S.endpoints=[null,null]);var O=p||S.endpoints[y]||S.endpoint||h.Defaults.Endpoints[y]||c.Defaults.Endpoints[y]||h.Defaults.Endpoint||c.Defaults.Endpoint;S.endpointStyles||(S.endpointStyles=[null,null]),S.endpointHoverStyles||(S.endpointHoverStyles=[null,null]);var L=S.endpointStyles[y]||S.endpointStyle||h.Defaults.EndpointStyles[y]||c.Defaults.EndpointStyles[y]||h.Defaults.EndpointStyle||c.Defaults.EndpointStyle;L.fill==null&&S.paintStyle!=null&&(L.fill=S.paintStyle.stroke),L.outlineStroke==null&&S.paintStyle!=null&&(L.outlineStroke=S.paintStyle.outlineStroke),L.outlineWidth==null&&S.paintStyle!=null&&(L.outlineWidth=S.paintStyle.outlineWidth);var G=S.endpointHoverStyles[y]||S.endpointHoverStyle||h.Defaults.EndpointHoverStyles[y]||c.Defaults.EndpointHoverStyles[y]||h.Defaults.EndpointHoverStyle||c.Defaults.EndpointHoverStyle;S.hoverPaintStyle!=null&&(G==null&&(G={}),G.fill==null&&(G.fill=S.hoverPaintStyle.stroke));var B=S.anchors?S.anchors[y]:S.anchor?S.anchor:Z(h.Defaults.Anchors[y],D,h)||Z(c.Defaults.Anchors[y],D,h)||Z(h.Defaults.Anchor,D,h)||Z(c.Defaults.Anchor,D,h),w=S.uuids?S.uuids[y]:null;e=M({paintStyle:L,hoverPaintStyle:G,endpoint:O,connections:[l],uuid:w,anchor:B,source:T,scope:S.scope,reattach:S.reattach||h.Defaults.ReattachConnections,detachable:S.detachable||h.Defaults.ConnectionsDetachable}),i==null&&e.setDeleteOnEmpty(!0),l.endpoints[y]=e,S.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(h,M){var l=this.endpoints[h],i=l.elementId,y=this._jsPlumb.instance.getEndpoints(i),S=y.indexOf(l),T=this.makeEndpoint(h===0,l.element,i,null,M);this.endpoints[h]=T,y.splice(S,1,T),this._jsPlumb.instance.deleteObject({endpoint:l,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:l,current:T}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumbUtil,V=K.jsPlumb;V.AnchorManager=function(h){var M={},l={},i={},y={},S=this,T={},D=h.jsPlumbInstance,p={},e=function(u,C,m,a,P,v,E,f){for(var x=[],N=C[P?0:1]/(a.length+1),U=0;U<a.length;U++){var Y=(U+1)*N,n=v*C[P?1:0];E&&(Y=C[P?0:1]-Y);var o=P?Y:n,t=m.left+o,g=o/C[0],b=P?n:Y,I=m.top+b,F=b/C[1];if(f!==0){var X=jsPlumbUtil.rotatePoint([t,I],[m.centerx,m.centery],f);t=X[0],I=X[1]}x.push([t,I,g,F,a[U][1],a[U][2]])}return x},O=function(u,C){return C[0][0]-u[0][0]},L=function(u,C){var m=u[0][0]<0?-Math.PI-u[0][0]:Math.PI-u[0][0],a=C[0][0]<0?-Math.PI-C[0][0]:Math.PI-C[0][0];return m-a},G={top:L,right:O,bottom:O,left:L},B=function(u,C){return u.sort(C)},w=function(u,C){var m=D.getCachedData(u),a=m.s,P=m.o,v=function(E,f,x,N,U,Y,n){if(N.length>0)for(var o=B(N,G[E]),t=E==="right"||E==="top",g=D.getRotation(u),b=e(E,f,x,o,U,Y,t,g),I=function(at,st){l[at.id]=[st[0],st[1],st[2],st[3]],i[at.id]=n},F=0;F<b.length;F++){var X=b[F][4],R=X.endpoints[0].elementId===u,z=X.endpoints[1].elementId===u;R&&I(X.endpoints[0],b[F]),z&&I(X.endpoints[1],b[F])}};v("bottom",a,P,C.bottom,!0,1,[0,1]),v("top",a,P,C.top,!0,0,[0,-1]),v("left",a,P,C.left,!1,0,[-1,0]),v("right",a,P,C.right,!1,1,[1,0])};this.reset=function(){M={},y={},T={}},this.addFloatingConnection=function(u,C){p[u]=C},this.newConnection=function(u){var C=u.sourceId,m=u.targetId,a=u.endpoints,P=!0,v=function(E,f,x,N,U){C===m&&x.isContinuous&&(u._jsPlumb.instance.removeElement(a[1].canvas),P=!1),c.addToList(y,N,[U,f,x.constructor===V.DynamicAnchor])};v(0,a[0],a[0].anchor,m,u),P&&v(1,a[1],a[1].anchor,C,u)};var j=function(u){(function(C,m){if(C){var a=function(P){return P[4]===m};c.removeWithFunction(C.top,a),c.removeWithFunction(C.left,a),c.removeWithFunction(C.bottom,a),c.removeWithFunction(C.right,a)}})(T[u.elementId],u.id)};this.connectionDetached=function(u,C){var m=u.connection||u,a=u.sourceId,P=u.targetId,v=m.endpoints,E=function(f,x,N,U,Y){c.removeWithFunction(y[U],function(n){return n[0].id===Y.id})};E(1,v[1],v[1].anchor,a,m),E(0,v[0],v[0].anchor,P,m),m.floatingId&&(E(m.floatingIndex,m.floatingEndpoint,m.floatingEndpoint.anchor,m.floatingId,m),j(m.floatingEndpoint)),j(m.endpoints[0]),j(m.endpoints[1]),C||(S.redraw(m.sourceId),m.targetId!==m.sourceId&&S.redraw(m.targetId))},this.addEndpoint=function(u,C){c.addToList(M,C,u)},this.changeId=function(u,C){y[C]=y[u],M[C]=M[u],delete y[u],delete M[u]},this.getConnectionsFor=function(u){return y[u]||[]},this.getEndpointsFor=function(u){return M[u]||[]},this.deleteEndpoint=function(u){c.removeWithFunction(M[u.elementId],function(C){return C.id===u.id}),j(u)},this.elementRemoved=function(u){delete p[u],delete M[u],M[u]=[]};var r=function(u,C,m,a,P,v,E,f,x,N,U,Y){var n=-1,o=a.endpoints[E],t=o.id,g=[1,0][E],b=[[C,m],a,P,v,t],I=u[x],F=o._continuousAnchorEdge?u[o._continuousAnchorEdge]:null,X,R;if(F){var z=c.findWithFunction(F,function(st){return st[4]===t});if(z!==-1)for(F.splice(z,1),X=0;X<F.length;X++)R=F[X][1],c.addWithFunction(U,R,function(st){return st.id===R.id}),c.addWithFunction(Y,F[X][1].endpoints[E],function(st){return st.id===R.endpoints[E].id}),c.addWithFunction(Y,F[X][1].endpoints[g],function(st){return st.id===R.endpoints[g].id})}for(X=0;X<I.length;X++)R=I[X][1],h.idx===1&&I[X][3]===v&&n===-1&&(n=X),c.addWithFunction(U,R,function(st){return st.id===R.id}),c.addWithFunction(Y,I[X][1].endpoints[E],function(st){return st.id===R.endpoints[E].id}),c.addWithFunction(Y,I[X][1].endpoints[g],function(st){return st.id===R.endpoints[g].id});{var at=f?n!==-1?n:0:I.length;I.splice(at,0,b)}o._continuousAnchorEdge=x};this.sourceOrTargetChanged=function(u,C,m,a,P){if(P===0){if(u!==C){m.sourceId=C,m.source=a,c.removeWithFunction(y[u],function(N){return N[0].id===m.id});var v=c.findWithFunction(y[m.targetId],function(N){return N[0].id===m.id});v>-1&&(y[m.targetId][v][0]=m,y[m.targetId][v][1]=m.endpoints[0],y[m.targetId][v][2]=m.endpoints[0].anchor.constructor===V.DynamicAnchor),c.addToList(y,C,[m,m.endpoints[1],m.endpoints[1].anchor.constructor===V.DynamicAnchor]),m.endpoints[1].anchor.isContinuous&&(m.source===m.target?m._jsPlumb.instance.removeElement(m.endpoints[1].canvas):m.endpoints[1].canvas.parentNode==null&&m._jsPlumb.instance.appendElement(m.endpoints[1].canvas)),m.updateConnectedClass()}}else if(P===1){var E=m.endpoints[0].elementId;m.target=a,m.targetId=C;var f=c.findWithFunction(y[E],function(N){return N[0].id===m.id}),x=c.findWithFunction(y[u],function(N){return N[0].id===m.id});f!==-1&&(y[E][f][0]=m,y[E][f][1]=m.endpoints[1],y[E][f][2]=m.endpoints[1].anchor.constructor===V.DynamicAnchor),x>-1&&(y[u].splice(x,1),c.addToList(y,C,[m,m.endpoints[0],m.endpoints[0].anchor.constructor===V.DynamicAnchor])),m.updateConnectedClass()}},this.rehomeEndpoint=function(u,C,m){var a=M[C]||[],P=D.getId(m);if(P!==C){var v=a.indexOf(u);if(v>-1){var E=a.splice(v,1)[0];S.add(E,P)}}for(var f=0;f<u.connections.length;f++)u.connections[f].sourceId===C?S.sourceOrTargetChanged(C,u.elementId,u.connections[f],u.element,0):u.connections[f].targetId===C&&S.sourceOrTargetChanged(C,u.elementId,u.connections[f],u.element,1)},this.redraw=function(u,C,m,a,P,v){var E=[],f=[],x=[];if(!D.isSuspendDrawing()){var N=M[u]||[],U=y[u]||[];m=m||jsPlumbUtil.uuid(),a=a||{left:0,top:0},C&&(C={left:C.left+a.left,top:C.top+a.top});for(var Y=D.updateOffset({elId:u,offset:C,recalc:!1,timestamp:m}),n={},o=0;o<U.length;o++){var t=U[o][0],g=t.sourceId,b=t.targetId,I=t.endpoints[0].anchor.isContinuous,F=t.endpoints[1].anchor.isContinuous;if(I||F){var X=g+"_"+b,R=n[X],z=t.sourceId===u?1:0,at=D.getRotation(b),st=D.getRotation(g);I&&!T[g]&&(T[g]={top:[],right:[],bottom:[],left:[]}),F&&!T[b]&&(T[b]={top:[],right:[],bottom:[],left:[]}),u!==b&&D.updateOffset({elId:b,timestamp:m}),u!==g&&D.updateOffset({elId:g,timestamp:m});var it=D.getCachedData(b),rt=D.getCachedData(g);b===g&&(I||F)?(r(T[g],-Math.PI/2,0,t,!1,b,0,!1,"top",g,E,f),r(T[b],-Math.PI/2,0,t,!1,g,1,!1,"top",b,E,f)):(R||(R=this.calculateOrientation(g,b,rt.o,it.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,st,at),n[X]=R),I&&r(T[g],R.theta,0,t,!1,b,0,!1,R.a[0],g,E,f),F&&r(T[b],R.theta2,-1,t,!0,g,1,!0,R.a[1],b,E,f)),I&&c.addWithFunction(x,g,function(gt){return gt===g}),F&&c.addWithFunction(x,b,function(gt){return gt===b}),c.addWithFunction(E,t,function(gt){return gt.id===t.id}),(I&&z===0||F&&z===1)&&c.addWithFunction(f,t.endpoints[z],function(gt){return gt.id===t.endpoints[z].id})}}for(o=0;o<N.length;o++)N[o].connections.length===0&&N[o].anchor.isContinuous&&(T[u]||(T[u]={top:[],right:[],bottom:[],left:[]}),r(T[u],-Math.PI/2,0,{endpoints:[N[o],N[o]],paint:function(){}},!1,u,0,!1,N[o].anchor.getDefaultFace(),u,E,f),c.addWithFunction(x,u,function(gt){return gt===u}));for(o=0;o<x.length;o++)w(x[o],T[x[o]]);for(o=0;o<N.length;o++)N[o].paint({timestamp:m,offset:Y,dimensions:Y.s,recalc:v!==!0});for(o=0;o<f.length;o++){var pt=D.getCachedData(f[o].elementId);f[o].paint({timestamp:null,offset:pt,dimensions:pt.s})}for(o=0;o<U.length;o++){var dt=U[o][1];if(dt.anchor.constructor===V.DynamicAnchor){dt.paint({elementWithPrecedence:u,timestamp:m}),c.addWithFunction(E,U[o][0],function(gt){return gt.id===U[o][0].id});for(var lt=0;lt<dt.connections.length;lt++)dt.connections[lt]!==U[o][0]&&c.addWithFunction(E,dt.connections[lt],function(gt){return gt.id===dt.connections[lt].id})}else c.addWithFunction(E,U[o][0],function(gt){return gt.id===U[o][0].id})}var bt=p[u];for(bt&&bt.paint({timestamp:m,recalc:!1,elId:u}),o=0;o<E.length;o++)E[o].paint({elId:u,timestamp:null,recalc:!1,clearEdits:P})}return{c:E,e:f}};var d=function(u){c.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var C=u.faces||["top","right","bottom","left"],m=u.clockwise!==!1,a={},P={top:"bottom",right:"left",left:"right",bottom:"top"},v={top:"right",right:"bottom",left:"top",bottom:"left"},E={top:"left",right:"top",left:"bottom",bottom:"right"},f=m?v:E,x=m?E:v,N=u.cssClass||"",U=null,Y=null,n=["left","right"],o=["top","bottom"],t=null,g=0;g<C.length;g++)a[C[g]]=!0;this.getDefaultFace=function(){return C.length===0?"top":C[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(b){return a[b]?b:a[P[b]]?P[b]:a[f[b]]?f[b]:a[x[b]]?x[b]:b},this.isEdgeSupported=function(b){return t==null?Y==null?a[b]===!0:Y===b:t.indexOf(b)!==-1},this.setCurrentFace=function(b,I){U=b,I&&Y!=null&&(Y=U)},this.getCurrentFace=function(){return U},this.getSupportedFaces=function(){var b=[];for(var I in a)a[I]&&b.push(I);return b},this.lock=function(){Y=U},this.unlock=function(){Y=null},this.isLocked=function(){return Y!=null},this.lockCurrentAxis=function(){U!=null&&(t=U==="left"||U==="right"?n:o)},this.unlockCurrentAxis=function(){t=null},this.compute=function(b){return l[b.element.id]||[0,0]},this.getCurrentLocation=function(b){return l[b.element.id]||[0,0]},this.getOrientation=function(b){return i[b.id]||[0,0]},this.getCssClass=function(){return N}};D.continuousAnchorFactory={get:function(u){return new d(u)},clear:function(u){delete l[u]}}},V.AnchorManager.prototype.calculateOrientation=function(h,M,l,i,y,S,T,D,p){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},O=["left","top","right","bottom"];if(h===M)return{orientation:e.IDENTITY,a:["top","top"]};var L=Math.atan2(i.centery-l.centery,i.centerx-l.centerx),G=Math.atan2(l.centery-i.centery,l.centerx-i.centerx),B=[],w={};(function(m,a){for(var P=0;P<m.length;P++)if(w[m[P]]={left:[a[P][0].left,a[P][0].centery],right:[a[P][0].right,a[P][0].centery],top:[a[P][0].centerx,a[P][0].top],bottom:[a[P][0].centerx,a[P][0].bottom]},a[P][1]!==0)for(var v in w[m[P]])w[m[P]][v]=jsPlumbUtil.rotatePoint(w[m[P]][v],[a[P][0].centerx,a[P][0].centery],a[P][1])})(["source","target"],[[l,D],[i,p]]);for(var j=0;j<O.length;j++)for(var r=0;r<O.length;r++)B.push({source:O[j],target:O[r],dist:Biltong.lineLength(w.source[O[j]],w.target[O[r]])});B.sort(function(m,a){return m.dist<a.dist?-1:m.dist>a.dist?1:0});for(var d=B[0].source,u=B[0].target,C=0;C<B.length&&(y.isContinuous&&y.locked?d=y.getCurrentFace():!y.isContinuous||y.isEdgeSupported(B[C].source)?d=B[C].source:d=null,S.isContinuous&&S.locked?u=S.getCurrentFace():!S.isContinuous||S.isEdgeSupported(B[C].target)?u=B[C].target:u=null,!(d!=null&&u!=null));C++);return y.isContinuous&&y.setCurrentFace(d),S.isContinuous&&S.setCurrentFace(u),{a:[d,u],theta:L,theta2:G}},V.Anchor=function(h){this.x=h.x||0,this.y=h.y||0,this.elementId=h.elementId,this.cssClass=h.cssClass||"",this.orientation=h.orientation||[0,0],this.lastReturnValue=null,this.offsets=h.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=h.relocatable!==!1,this.snapOnRelocate=h.snapOnRelocate!==!1,this.locked=!1,c.EventGenerator.apply(this),this.compute=function(M){var l=M.xy,i=M.wh,y=M.timestamp;if(y&&y===this.timestamp)return this.lastReturnValue;var S=[l[0]+this.x*i[0]+this.offsets[0],l[1]+this.y*i[1]+this.offsets[1],this.x,this.y],T=M.rotation;if(T!=null&&T!==0){var D=jsPlumbUtil.rotatePoint(S,[l[0]+i[0]/2,l[1]+i[1]/2],T);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*D[2]-this._unrotatedOrientation[1]*D[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*D[2]+this._unrotatedOrientation[0]*D[3]),this.lastReturnValue=[D[0],D[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=S;return this.timestamp=y,this.lastReturnValue},this.getCurrentLocation=function(M){return M=M||{},this.lastReturnValue==null||M.timestamp!=null&&this.timestamp!==M.timestamp?this.compute(M):this.lastReturnValue},this.setPosition=function(M,l,i,y,S){(!this.locked||S)&&(this.x=M,this.y=l,this.orientation=[i,y],this.lastReturnValue=null)}},c.extend(V.Anchor,c.EventGenerator,{equals:function(h){if(!h)return!1;var M=h.getOrientation(),l=this.getOrientation();return this.x===h.x&&this.y===h.y&&this.offsets[0]===h.offsets[0]&&this.offsets[1]===h.offsets[1]&&l[0]===M[0]&&l[1]===M[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),V.FloatingAnchor=function(h){V.Anchor.apply(this,arguments);var M=h.reference,l=h.referenceCanvas,i=V.getSize(l),y=0,S=0,T=null,D=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(p){var e=p.xy,O=[e[0]+i[0]/2,e[1]+i[1]/2];return D=O,O},this.getOrientation=function(p){if(T)return T;var e=M.getOrientation(p);return[Math.abs(e[0])*y*-1,Math.abs(e[1])*S*-1]},this.over=function(p,e){T=p.getOrientation(e)},this.out=function(){T=null},this.getCurrentLocation=function(p){return D==null?this.compute(p):D}},c.extend(V.FloatingAnchor,V.Anchor);var nt=function(h,M,l){return h.constructor===V.Anchor?h:M.makeAnchor(h,l,M)};V.DynamicAnchor=function(h){V.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=h.elementId,this.jsPlumbInstance=h.jsPlumbInstance;for(var M=0;M<h.anchors.length;M++)this.anchors[M]=nt(h.anchors[M],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var l=this.anchors.length>0?this.anchors[0]:null,i=l,y=function(T,D,p,e,O,L,G){var B=e[0]+T.x*O[0],w=e[1]+T.y*O[1],j=e[0]+O[0]/2,r=e[1]+O[1]/2;if(L!=null&&L!==0){var d=jsPlumbUtil.rotatePoint([B,w],[j,r],L);B=d[0],w=d[1]}return Math.sqrt(Math.pow(D-B,2)+Math.pow(p-w,2))+Math.sqrt(Math.pow(j-B,2)+Math.pow(r-w,2))},S=h.selector||function(T,D,p,e,O,L,G){for(var B=p[0]+e[0]/2,w=p[1]+e[1]/2,j=-1,r=1/0,d=0;d<G.length;d++){var u=y(G[d],B,w,T,D,O);u<r&&(j=d+0,r=u)}return G[j]};this.compute=function(T){var D=T.xy,p=T.wh,e=T.txy,O=T.twh,L=T.rotation,G=T.tRotation;return this.timestamp=T.timestamp,this.locked||e==null||O==null?(this.lastReturnValue=l.compute(T),this.lastReturnValue):(T.timestamp=null,l=S(D,p,e,O,L,G,this.anchors),this.x=l.x,this.y=l.y,l!==i&&this.fire("anchorChanged",l),i=l,this.lastReturnValue=l.compute(T),this.lastReturnValue)},this.getCurrentLocation=function(T){return l!=null?l.getCurrentLocation(T):null},this.getOrientation=function(T){return l!=null?l.getOrientation(T):[0,0]},this.over=function(T,D){l!=null&&l.over(T,D)},this.out=function(){l!=null&&l.out()},this.setAnchor=function(T){l=T},this.getCssClass=function(){return l&&l.getCssClass()||""},this.setAnchorCoordinates=function(T){var D=jsPlumbUtil.findWithFunction(this.anchors,function(p){return p.x===T[0]&&p.y===T[1]});return D!==-1?(this.setAnchor(this.anchors[D]),!0):!1}},c.extend(V.DynamicAnchor,V.Anchor);var Z=function(h,M,l,i,y,S){V.Anchors[y]=function(T){var D=T.jsPlumbInstance.makeAnchor([h,M,l,i,0,0],T.elementId,T.jsPlumbInstance);return D.type=y,S&&S(D,T),D}};Z(.5,0,0,-1,"TopCenter"),Z(.5,1,0,1,"BottomCenter"),Z(0,.5,-1,0,"LeftMiddle"),Z(1,.5,1,0,"RightMiddle"),Z(.5,0,0,-1,"Top"),Z(.5,1,0,1,"Bottom"),Z(0,.5,-1,0,"Left"),Z(1,.5,1,0,"Right"),Z(.5,.5,0,0,"Center"),Z(1,0,0,-1,"TopRight"),Z(1,1,0,1,"BottomRight"),Z(0,0,0,-1,"TopLeft"),Z(0,1,0,1,"BottomLeft"),V.Defaults.DynamicAnchors=function(h){return h.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],h.elementId,h.jsPlumbInstance)},V.Anchors.AutoDefault=function(h){var M=h.jsPlumbInstance.makeDynamicAnchor(V.Defaults.DynamicAnchors(h));return M.type="AutoDefault",M};var W=function(h,M){V.Anchors[h]=function(l){var i=l.jsPlumbInstance.makeAnchor(["Continuous",{faces:M}],l.elementId,l.jsPlumbInstance);return i.type=h,i}};V.Anchors.Continuous=function(h){return h.jsPlumbInstance.continuousAnchorFactory.get(h)},W("ContinuousLeft",["left"]),W("ContinuousTop",["top"]),W("ContinuousBottom",["bottom"]),W("ContinuousRight",["right"]),Z(0,0,0,0,"Assign",function(h,M){var l=M.position||"Fixed";h.positionFinder=l.constructor===String?M.jsPlumbInstance.AnchorPositionFinders[l]:l,h.constructorParams=M}),K.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(h,M,l){return[(h.left-M.left)/l[0],(h.top-M.top)/l[1]]},Grid:function(h,M,l,i){var y=h.left-M.left,S=h.top-M.top,T=l[0]/i.grid[0],D=l[1]/i.grid[1],p=Math.floor(y/T),e=Math.floor(S/D);return[(p*T+T/2)/l[0],(e*D+D/2)/l[1]]}},V.Anchors.Perimeter=function(h){h=h||{};var M=h.anchorCount||60,l=h.shape;if(!l)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var L=.5,G=Math.PI*2/M,B=0,w=[],j=0;j<M;j++){var r=L+L*Math.sin(B),d=L+L*Math.cos(B);w.push([r,d,0,0]),B+=G}return w},y=function(L){for(var G=M/L.length,B=[],w=function(r,d,u,C,m,a,P){G=M*m;for(var v=(u-r)/G,E=(C-d)/G,f=0;f<G;f++)B.push([r+v*f,d+E*f,a==null?0:a,P==null?0:P])},j=0;j<L.length;j++)w.apply(null,L[j]);return B},S=function(L){for(var G=[],B=0;B<L.length;B++)G.push([L[B][0],L[B][1],L[B][2],L[B][3],1/L.length,L[B][4],L[B][5]]);return y(G)},T=function(){return S([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},D={Circle:i,Ellipse:i,Diamond:function(){return S([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:T,Square:T,Triangle:function(){return S([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(L){for(var G=L.points,B=[],w=0,j=0;j<G.length-1;j++){var r=Math.sqrt(Math.pow(G[j][2]-G[j][0])+Math.pow(G[j][3]-G[j][1]));w+=r,B.push([G[j][0],G[j][1],G[j+1][0],G[j+1][1],r])}for(var d=0;d<B.length;d++)B[d][4]=B[d][4]/w;return y(B)}},p=function(L,G){for(var B=[],w=G/180*Math.PI,j=0;j<L.length;j++){var r=L[j][0]-.5,d=L[j][1]-.5;B.push([.5+(r*Math.cos(w)-d*Math.sin(w)),.5+(r*Math.sin(w)+d*Math.cos(w)),L[j][2],L[j][3]])}return B};if(!D[l])throw new Error("Shape ["+l+"] is unknown by Perimeter Anchor type");var e=D[l](h);h.rotation&&(e=p(e,h.rotation));var O=h.jsPlumbInstance.makeDynamicAnchor(e);return O.type="Perimeter",O}}.call(typeof window!="undefined"?window:kt),function(){var K=this;K.jsPlumbUtil;var c=K.jsPlumb;c.DefaultRouter=function(V){this.jsPlumbInstance=V,this.anchorManager=new c.AnchorManager({jsPlumbInstance:V}),this.sourceOrTargetChanged=function(nt,Z,W,h,M){this.anchorManager.sourceOrTargetChanged(nt,Z,W,h,M)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(nt,Z){this.anchorManager.changeId(nt,Z)},this.elementRemoved=function(nt){this.anchorManager.elementRemoved(nt)},this.newConnection=function(nt){this.anchorManager.newConnection(nt)},this.connectionDetached=function(nt,Z){this.anchorManager.connectionDetached(nt,Z)},this.redraw=function(nt,Z,W,h,M,l){return this.anchorManager.redraw(nt,Z,W,h,M,l)},this.deleteEndpoint=function(nt){this.anchorManager.deleteEndpoint(nt)},this.rehomeEndpoint=function(nt,Z,W){this.anchorManager.rehomeEndpoint(nt,Z,W)},this.addEndpoint=function(nt,Z){this.anchorManager.addEndpoint(nt,Z)}}}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt=K.Biltong;c.Segments={AbstractSegment:function(i){this.params=i,this.findClosestPointOnPath=function(y,S){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(i.x1,i.x2),minY:Math.min(i.y1,i.y2),maxX:Math.max(i.x1,i.x2),maxY:Math.max(i.y1,i.y2)}},this.lineIntersection=function(y,S,T,D){return[]},this.boxIntersection=function(y,S,T,D){var p=[];return p.push.apply(p,this.lineIntersection(y,S,y+T,S)),p.push.apply(p,this.lineIntersection(y+T,S,y+T,S+D)),p.push.apply(p,this.lineIntersection(y+T,S+D,y,S+D)),p.push.apply(p,this.lineIntersection(y,S+D,y,S)),p},this.boundingBoxIntersection=function(y){return this.boxIntersection(y.x,y.y,y.w,y.y)}},Straight:function(i){c.Segments.AbstractSegment.apply(this,arguments);var y,S,T,D,p,e,O,L=function(){y=Math.sqrt(Math.pow(p-D,2)+Math.pow(O-e,2)),S=nt.gradient({x:D,y:e},{x:p,y:O}),T=-1/S};this.type="Straight",this.getLength=function(){return y},this.getGradient=function(){return S},this.getCoordinates=function(){return{x1:D,y1:e,x2:p,y2:O}},this.setCoordinates=function(r){D=r.x1,e=r.y1,p=r.x2,O=r.y2,L()},this.setCoordinates({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),this.getBounds=function(){return{minX:Math.min(D,p),minY:Math.min(e,O),maxX:Math.max(D,p),maxY:Math.max(e,O)}},this.pointOnPath=function(r,d){if(r===0&&!d)return{x:D,y:e};if(r===1&&!d)return{x:p,y:O};var u=d?r>0?r:y+r:r*y;return nt.pointOnLine({x:D,y:e},{x:p,y:O},u)},this.gradientAtPoint=function(r){return S},this.pointAlongPathFrom=function(r,d,u){var C=this.pointOnPath(r,u),m=d<=0?{x:D,y:e}:{x:p,y:O};return d<=0&&Math.abs(d)>1&&(d*=-1),nt.pointOnLine(C,m,d)};var G=function(r,d,u){return u>=Math.min(r,d)&&u<=Math.max(r,d)},B=function(r,d,u){return Math.abs(u-r)<Math.abs(u-d)?r:d};this.findClosestPointOnPath=function(r,d){var u={d:1/0,x:null,y:null,l:null,x1:D,x2:p,y1:e,y2:O};if(S===0)u.y=e,u.x=G(D,p,r)?r:B(D,p,r);else if(S===1/0||S===-1/0)u.x=D,u.y=G(e,O,d)?d:B(e,O,d);else{var C=e-S*D,m=d-T*r,a=(m-C)/(S-T),P=S*a+C;u.x=G(D,p,a)?a:B(D,p,a),u.y=G(e,O,P)?P:B(e,O,P)}var v=nt.lineLength([u.x,u.y],[D,e]);return u.d=nt.lineLength([r,d],[u.x,u.y]),u.l=v/y,u};var w=function(r,d,u){return u>d?d<=r&&r<=u:d>=r&&r>=u},j=w;this.lineIntersection=function(r,d,u,C){var m=Math.abs(nt.gradient({x:r,y:d},{x:u,y:C})),a=Math.abs(S),P=a===1/0?D:e-a*D,v=[],E=m===1/0?r:d-m*r;if(m!==a)if(m===1/0&&a===0)j(r,D,p)&&j(e,d,C)&&(v=[r,e]);else if(m===0&&a===1/0)j(d,e,O)&&j(D,r,u)&&(v=[D,d]);else{var f,x;m===1/0?(f=r,j(f,D,p)&&(x=a*r+P,j(x,d,C)&&(v=[f,x]))):m===0?(x=d,j(x,e,O)&&(f=(d-P)/a,j(f,r,u)&&(v=[f,x]))):(f=(E-P)/(a-m),x=a*f+P,j(f,D,p)&&j(x,e,O)&&(v=[f,x]))}return v},this.boxIntersection=function(r,d,u,C){var m=[];return m.push.apply(m,this.lineIntersection(r,d,r+u,d)),m.push.apply(m,this.lineIntersection(r+u,d,r+u,d+C)),m.push.apply(m,this.lineIntersection(r+u,d+C,r,d+C)),m.push.apply(m,this.lineIntersection(r,d+C,r,d)),m},this.boundingBoxIntersection=function(r){return this.boxIntersection(r.x,r.y,r.w,r.h)}},Arc:function(i){c.Segments.AbstractSegment.apply(this,arguments);var y=function(B,w){return nt.theta([i.cx,i.cy],[B,w])},S=function(B,w){if(B.anticlockwise){var j=B.startAngle<B.endAngle?B.startAngle+T:B.startAngle,r=Math.abs(j-B.endAngle);return j-r*w}else{var d=B.endAngle<B.startAngle?B.endAngle+T:B.endAngle,u=Math.abs(d-B.startAngle);return B.startAngle+u*w}},T=2*Math.PI;this.radius=i.r,this.anticlockwise=i.ac,this.type="Arc",i.startAngle&&i.endAngle?(this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.x1=i.cx+this.radius*Math.cos(i.startAngle),this.y1=i.cy+this.radius*Math.sin(i.startAngle),this.x2=i.cx+this.radius*Math.cos(i.endAngle),this.y2=i.cy+this.radius*Math.sin(i.endAngle)):(this.startAngle=y(i.x1,i.y1),this.endAngle=y(i.x2,i.y2),this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2),this.endAngle<0&&(this.endAngle+=T),this.startAngle<0&&(this.startAngle+=T);var D=this.endAngle<this.startAngle?this.endAngle+T:this.endAngle;this.sweep=Math.abs(D-this.startAngle),this.anticlockwise&&(this.sweep=T-this.sweep);var p=2*Math.PI*this.radius,e=this.sweep/T,O=p*e;this.getLength=function(){return O},this.getBounds=function(){return{minX:i.cx-i.r,maxX:i.cx+i.r,minY:i.cy-i.r,maxY:i.cy+i.r}};var L=1e-10,G=function(B){var w=Math.floor(B),j=Math.ceil(B);return B-w<L?w:j-B<L?j:B};this.pointOnPath=function(B,w){if(B===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(B===1)return{x:this.x2,y:this.y2,theta:this.endAngle};w&&(B=B/O);var j=S(this,B),r=i.cx+i.r*Math.cos(j),d=i.cy+i.r*Math.sin(j);return{x:G(r),y:G(d),theta:j}},this.gradientAtPoint=function(B,w){var j=this.pointOnPath(B,w),r=nt.normal([i.cx,i.cy],[j.x,j.y]);return!this.anticlockwise&&(r===1/0||r===-1/0)&&(r*=-1),r},this.pointAlongPathFrom=function(B,w,j){var r=this.pointOnPath(B,j),d=w/p*2*Math.PI,u=this.anticlockwise?-1:1,C=r.theta+u*d,m=i.cx+this.radius*Math.cos(C),a=i.cy+this.radius*Math.sin(C);return{x:m,y:a}}},Bezier:function(i){this.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}];var y=function(O){return O[0].x===O[1].x&&O[0].y===O[1].y},S=function(O,L){return Math.sqrt(Math.pow(O.x-L.x,2)+Math.pow(O.y-L.y,2))},T=function(O){var L={x:0,y:0};if(O===0)return this.curve[0];var G=this.curve.length-1;if(O===1)return this.curve[G];var B=this.curve,w=1-O;if(G===0)return this.curve[0];if(G===1)return{x:w*B[0].x+O*B[1].x,y:w*B[0].y+O*B[1].y};if(G<4){var j=w*w,r=O*O,d=0,u,C,m;return G===2?(B=[B[0],B[1],B[2],L],u=j,C=2*(w*O),m=r):G===3&&(u=j*w,C=3*(j*O),m=3*(w*r),d=O*r),{x:u*B[0].x+C*B[1].x+m*B[2].x+d*B[3].x,y:u*B[0].y+C*B[1].y+m*B[2].y+d*B[3].y}}else return L}.bind(this),D=function(O){var L=[];O--;for(var G=0;G<=O;G++)L.push(T(G/O));return L},p=function(){y(this.curve)&&(this.length=0);var O=16,L=D(O);this.length=0;for(var G=0;G<O-1;G++){var B=L[G],w=L[G+1];this.length+=S(B,w)}}.bind(this);c.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),minY:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),maxX:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),maxY:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},this.type="Bezier",p();var e=function(O,L,G){return G&&(L=K.jsBezier.locationAlongCurveFrom(O,L>0?0:1,L)),L};this.pointOnPath=function(O,L){return O=e(this.curve,O,L),K.jsBezier.pointOnCurve(this.curve,O)},this.gradientAtPoint=function(O,L){return O=e(this.curve,O,L),K.jsBezier.gradientAtPoint(this.curve,O)},this.pointAlongPathFrom=function(O,L,G){return O=e(this.curve,O,G),K.jsBezier.pointAlongCurveFrom(this.curve,O,L)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(O,L){var G=K.jsBezier.nearestPointOnCurve({x:O,y:L},this.curve);return{d:Math.sqrt(Math.pow(G.point.x-O,2)+Math.pow(G.point.y-L,2)),x:G.point.x,y:G.point.y,l:1-G.location,s:this}},this.lineIntersection=function(O,L,G,B){return K.jsBezier.lineIntersection(O,L,G,B,this.curve)}}},c.SegmentRenderer={getPath:function(i,y){return{Straight:function(S){var T=i.getCoordinates();return(S?"M "+T.x1+" "+T.y1+" ":"")+"L "+T.x2+" "+T.y2},Bezier:function(S){var T=i.params;return(S?"M "+T.x2+" "+T.y2+" ":"")+"C "+T.cp2x+" "+T.cp2y+" "+T.cp1x+" "+T.cp1y+" "+T.x1+" "+T.y1},Arc:function(S){var T=i.params,D=i.sweep>Math.PI?1:0,p=i.anticlockwise?0:1;return(S?"M"+i.x1+" "+i.y1+" ":"")+"A "+i.radius+" "+T.r+" 0 "+D+","+p+" "+i.x2+" "+i.y2}}[i.type](y)}};var Z=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};c.Connectors.AbstractConnector=function(i){Z.apply(this,arguments);var y=[],S=0,T=[],D=[],p=i.stub||0,e=V.isArray(p)?p[0]:p,O=V.isArray(p)?p[1]:p,L=i.gap||0,G=V.isArray(L)?L[0]:L,B=V.isArray(L)?L[1]:L,w=null,j=null;this.getPathData=function(){for(var a="",P=0;P<y.length;P++)a+=c.SegmentRenderer.getPath(y[P],P===0),a+=" ";return a},this.findSegmentForPoint=function(a,P){for(var v={d:1/0,s:null,x:null,y:null,l:null},E=0;E<y.length;E++){var f=y[E].findClosestPointOnPath(a,P);f.d<v.d&&(v.d=f.d,v.l=f.l,v.x=f.x,v.y=f.y,v.s=y[E],v.x1=f.x1,v.x2=f.x2,v.y1=f.y1,v.y2=f.y2,v.index=E,v.connectorLocation=T[E][0]+f.l*(T[E][1]-T[E][0]))}return v},this.lineIntersection=function(a,P,v,E){for(var f=[],x=0;x<y.length;x++)f.push.apply(f,y[x].lineIntersection(a,P,v,E));return f},this.boxIntersection=function(a,P,v,E){for(var f=[],x=0;x<y.length;x++)f.push.apply(f,y[x].boxIntersection(a,P,v,E));return f},this.boundingBoxIntersection=function(a){for(var P=[],v=0;v<y.length;v++)P.push.apply(P,y[v].boundingBoxIntersection(a));return P};var r=function(){for(var a=0,P=0;P<y.length;P++){var v=y[P].getLength();D[P]=v/S,T[P]=[a,a+=v/S]}},d=function(a,P){var v,E,f;if(P&&(a=a>0?a/S:(S+a)/S),a===1)v=y.length-1,f=1;else if(a===0)f=0,v=0;else if(a>=.5){for(v=0,f=0,E=T.length-1;E>-1;E--)if(T[E][1]>=a&&T[E][0]<=a){v=E,f=(a-T[E][0])/D[E];break}}else for(v=T.length-1,f=1,E=0;E<T.length;E++)if(T[E][1]>=a){v=E,f=(a-T[E][0])/D[E];break}return{segment:y[v],proportion:f,index:v}},u=function(a,P,v){if(!(v.x1===v.x2&&v.y1===v.y2)){var E=new c.Segments[P](v);y.push(E),S+=E.getLength(),a.updateBounds(E)}},C=function(){S=y.length=T.length=D.length=0};this.setSegments=function(a){w=[],S=0;for(var P=0;P<a.length;P++)w.push(a[P]),S+=a[P].getLength()},this.getLength=function(){return S};var m=function(a){this.strokeWidth=a.strokeWidth;var P=nt.quadrant(a.sourcePos,a.targetPos),v=a.targetPos[0]<a.sourcePos[0],E=a.targetPos[1]<a.sourcePos[1],f=a.strokeWidth||1,x=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),N=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),U=v?a.targetPos[0]:a.sourcePos[0],Y=E?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(x[0]===0&&x[1]===0||N[0]===0&&N[1]===0){var t=n>o?0:1,g=[1,0][t];x=[],N=[],x[t]=a.sourcePos[t]>a.targetPos[t]?-1:1,N[t]=a.sourcePos[t]>a.targetPos[t]?1:-1,x[g]=0,N[g]=0}var b=v?n+G*x[0]:G*x[0],I=E?o+G*x[1]:G*x[1],F=v?B*N[0]:n+B*N[0],X=E?B*N[1]:o+B*N[1],R=x[0]*N[0]+x[1]*N[1],z={sx:b,sy:I,tx:F,ty:X,lw:f,xSpan:Math.abs(F-b),ySpan:Math.abs(X-I),mx:(b+F)/2,my:(I+X)/2,so:x,to:N,x:U,y:Y,w:n,h:o,segment:P,startStubX:b+x[0]*e,startStubY:I+x[1]*e,endStubX:F+N[0]*O,endStubY:X+N[1]*O,isXGreaterThanStubTimes2:Math.abs(b-F)>e+O,isYGreaterThanStubTimes2:Math.abs(I-X)>e+O,opposite:R===-1,perpendicular:R===0,orthogonal:R===1,sourceAxis:x[0]===0?"y":"x",points:[U,Y,n,o,b,I,F,X],stubs:[e,O]};return z.anchorOrientation=z.opposite?"opposite":z.orthogonal?"orthogonal":"perpendicular",z};return this.getSegments=function(){return y},this.updateBounds=function(a){var P=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,P.minX),this.bounds.maxX=Math.max(this.bounds.maxX,P.maxX),this.bounds.minY=Math.min(this.bounds.minY,P.minY),this.bounds.maxY=Math.max(this.bounds.maxY,P.maxY)},this.pointOnPath=function(a,P){var v=d(a,P);return v.segment&&v.segment.pointOnPath(v.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,P){var v=d(a,P);return v.segment&&v.segment.gradientAtPoint(v.proportion,!1)||0},this.pointAlongPathFrom=function(a,P,v){var E=d(a,v);return E.segment&&E.segment.pointAlongPathFrom(E.proportion,P,!1)||[0,0]},this.compute=function(a){j=m.call(this,a),C(),this._compute(j,a),this.x=j.points[0],this.y=j.points[1],this.w=j.points[2],this.h=j.points[3],this.segment=j.segment,r()},{addSegment:u,prepareCompute:m,sourceStub:e,targetStub:O,maxStub:Math.max(e,O),sourceGap:G,targetGap:B,maxGap:Math.max(G,B)}},V.extend(c.Connectors.AbstractConnector,Z),c.Endpoints.AbstractEndpoint=function(i){Z.apply(this,arguments);var y=this.compute=function(S,T,D,p){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:y,cssClass:i.cssClass}},V.extend(c.Endpoints.AbstractEndpoint,Z),c.Endpoints.Dot=function(i){this.type="Dot",c.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.radius=i.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(y,S,T,D){this.radius=T.radius||this.radius;var p=y[0]-this.radius,e=y[1]-this.radius,O=this.radius*2,L=this.radius*2;if(T.stroke){var G=T.strokeWidth||1;p-=G,e-=G,O+=G*2,L+=G*2}return[p,e,O,L,this.radius]}},V.extend(c.Endpoints.Dot,c.Endpoints.AbstractEndpoint),c.Endpoints.Rectangle=function(i){this.type="Rectangle",c.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.width=i.width||20,this.height=i.height||20,this._compute=function(y,S,T,D){var p=T.width||this.width,e=T.height||this.height,O=y[0]-p/2,L=y[1]-e/2;return[O,L,p,e]}},V.extend(c.Endpoints.Rectangle,c.Endpoints.AbstractEndpoint);var W=function(i){c.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};V.extend(W,c.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(i){this._jsPlumb.displayElements.push(i)}}),c.Endpoints.Image=function(i){this.type="Image",W.apply(this,arguments),c.Endpoints.AbstractEndpoint.apply(this,arguments);var y=i.onload,S=i.src||i.url,T=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,y&&y(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(D,p){var e=D.constructor===String?D:D.src;y=p,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(S,y),this._compute=function(D,p,e,O){return this.anchorPoint=D,this._jsPlumb.ready?[D[0]-this._jsPlumb.widthToUse/2,D[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=c.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+T),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(D,p,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var O=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,L=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;V.sizeElement(this.canvas,O,L,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(D,p){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(D,p):K.setTimeout(function(){this.paint(D,p)}.bind(this),200))}},V.extend(c.Endpoints.Image,[W,c.Endpoints.AbstractEndpoint],{cleanup:function(i){i&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),c.Endpoints.Blank=function(i){c.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",W.apply(this,arguments),this._compute=function(S,T,D,p){return[S[0],S[1],10,0]};var y=i.cssClass?" "+i.cssClass:"";this.canvas=c.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+y),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(S,T){V.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},V.extend(c.Endpoints.Blank,[c.Endpoints.AbstractEndpoint,W],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),c.Endpoints.Triangle=function(i){this.type="Triangle",c.Endpoints.AbstractEndpoint.apply(this,arguments);var y=this;i=i||{},i.width=i.width||55,i.height=i.height||55,this.width=i.width,this.height=i.height,this._compute=function(S,T,D,p){var e=D.width||y.width,O=D.height||y.height,L=S[0]-e/2,G=S[1]-O/2;return[L,G,e,O]}};var h=c.Overlays.AbstractOverlay=function(i){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=i.component,this.loc=i.location==null?.5:i.location,this.endpointLoc=i.endpointLocation==null?[.5,.5]:i.endpointLocation,this.visible=i.visible!==!1};h.prototype={cleanup:function(i){i&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(i,y){},setVisible:function(i){this.visible=i,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(i){this.loc+=i,this.component.repaint()},setLocation:function(i){this.loc=i,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},c.Overlays.Arrow=function(i){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1,i=i||{};var y=this;this.length=i.length||20,this.width=i.width||20,this.id=i.id,this.direction=(i.direction||1)<0?-1:1;var S=i.paintStyle||{"stroke-width":1},T=i.foldback||.623;this.computeMaxSize=function(){return y.width*1.5},this.elementCreated=function(D,p){if(this.path=D,i.events)for(var e in i.events)c.on(D,e,i.events[e])},this.draw=function(D,p){var e,O,L,G,B;if(D.pointAlongPathFrom){if(V.isString(this.loc)||this.loc>1||this.loc<0){var w=parseInt(this.loc,10),j=this.loc<0?1:0;e=D.pointAlongPathFrom(j,w,!1),O=D.pointAlongPathFrom(j,w-this.direction*this.length/2,!1),L=nt.pointOnLine(e,O,this.length)}else if(this.loc===1){if(e=D.pointOnPath(this.loc),O=D.pointAlongPathFrom(this.loc,-this.length),L=nt.pointOnLine(e,O,this.length),this.direction===-1){var r=L;L=e,e=r}}else if(this.loc===0){if(L=D.pointOnPath(this.loc),O=D.pointAlongPathFrom(this.loc,this.length),e=nt.pointOnLine(L,O,this.length),this.direction===-1){var d=L;L=e,e=d}}else e=D.pointAlongPathFrom(this.loc,this.direction*this.length/2),O=D.pointOnPath(this.loc),L=nt.pointOnLine(e,O,this.length);G=nt.perpendicularLineTo(e,L,this.width),B=nt.pointOnLine(e,L,T*this.length);var u={hxy:e,tail:G,cxy:B},C=S.stroke||p.stroke,m=S.fill||p.stroke,a=S.strokeWidth||p.strokeWidth;return{component:D,d:u,"stroke-width":a,stroke:C,fill:m,minX:Math.min(e.x,G[0].x,G[1].x),maxX:Math.max(e.x,G[0].x,G[1].x),minY:Math.min(e.y,G[0].y,G[1].y),maxY:Math.max(e.y,G[0].y,G[1].y)}}else return{component:D,minX:0,maxX:0,minY:0,maxY:0}}},V.extend(c.Overlays.Arrow,h,{updateFrom:function(i){this.length=i.length||this.length,this.width=i.width||this.width,this.direction=i.direction!=null?i.direction:this.direction,this.foldback=i.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),c.Overlays.PlainArrow=function(i){i=i||{};var y=c.extend(i,{foldback:1});c.Overlays.Arrow.call(this,y),this.type="PlainArrow"},V.extend(c.Overlays.PlainArrow,c.Overlays.Arrow),c.Overlays.Diamond=function(i){i=i||{};var y=i.length||40,S=c.extend(i,{length:y/2,foldback:2});c.Overlays.Arrow.call(this,S),this.type="Diamond"},V.extend(c.Overlays.Diamond,c.Overlays.Arrow);var M=function(i,y){return(i._jsPlumb.cachedDimensions==null||y)&&(i._jsPlumb.cachedDimensions=i.getDimensions()),i._jsPlumb.cachedDimensions},l=function(i){c.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var y=this.fire;this.fire=function(){y.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=i.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=i.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=i.create,this._jsPlumb.initiallyInvisible=i.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var S=this._jsPlumb.div=c.getElement(this._jsPlumb.create(this._jsPlumb.component));S.style.position="absolute",jsPlumb.addClass(S,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:i.cssClass?i.cssClass:"")),this._jsPlumb.instance.appendElement(S),this._jsPlumb.instance.getId(S),this.canvas=S;var T="translate(-50%, -50%)";S.style.webkitTransform=T,S.style.mozTransform=T,S.style.msTransform=T,S.style.oTransform=T,S.style.transform=T,S._jsPlumb=this,i.visible===!1&&(S.style.display="none")}return this._jsPlumb.div},this.draw=function(S,T,D){var p=M(this);if(p!=null&&p.length===2){var e={x:0,y:0};if(D)e={x:D[0],y:D[1]};else if(S.pointOnPath){var O=this.loc,L=!1;(V.isString(this.loc)||this.loc<0||this.loc>1)&&(O=parseInt(this.loc,10),L=!0),e=S.pointOnPath(O,L)}else{var G=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:G[0]*S.w,y:G[1]*S.h}}var B=e.x-p[0]/2,w=e.y-p[1]/2;return{component:S,d:{minx:B,miny:w,td:p,cxy:e},minX:B,maxX:B+p[0],minY:w,maxY:w+p[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};V.extend(l,[c.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(i){this._jsPlumb.div&&(this._jsPlumb.div.style.display=i?"block":"none",i&&this._jsPlumb.initiallyInvisible&&(M(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(i){i?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(i,y){this._jsPlumb.div!=null&&i.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var i=M(this);return Math.max(i[0],i[1])},paint:function(i,y){this._jsPlumb.initialised||(this.getElement(),i.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=i.component.x+i.d.minx+"px",this._jsPlumb.div.style.top=i.component.y+i.d.miny+"px"}}),c.Overlays.Custom=function(i){this.type="Custom",l.apply(this,arguments)},V.extend(c.Overlays.Custom,l),c.Overlays.GuideLines=function(){var i=this;i.length=50,i.strokeWidth=5,this.type="GuideLines",h.apply(this,arguments),c.jsPlumbUIComponent.apply(this,arguments),this.draw=function(y,S){var T=y.pointAlongPathFrom(i.loc,i.length/2),D=y.pointOnPath(i.loc),p=nt.pointOnLine(T,D,i.length),e=nt.perpendicularLineTo(T,p,40),O=nt.perpendicularLineTo(p,T,20);return{connector:y,head:T,tail:p,headLine:O,tailLine:e,minX:Math.min(T.x,p.x,O[0].x,O[1].x),minY:Math.min(T.y,p.y,O[0].y,O[1].y),maxX:Math.max(T.x,p.x,O[0].x,O[1].x),maxY:Math.max(T.y,p.y,O[0].y,O[1].y)}}},c.Overlays.Label=function(i){this.labelStyle=i.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var y=c.extend({create:function(){return c.createElement("div")}},i);if(c.Overlays.Custom.call(this,y),this.type="Label",this.label=i.label||"",this.labelText=null,this.labelStyle){var S=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",S.style.font=this.labelStyle.font,S.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(S.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var T=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";S.style.border=this.labelStyle.borderWidth+"px solid "+T}this.labelStyle.padding&&(S.style.padding=this.labelStyle.padding)}},V.extend(c.Overlays.Label,c.Overlays.Custom,{cleanup:function(i){i&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(i){this.label=i,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var i=this.label(this);this.getElement().innerHTML=i.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(i){i.label!=null&&this.setLabel(i.label)}})}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumbUtil,V=K.jsPlumbInstance,nt="jtk-group-collapsed",Z="jtk-group-expanded",W="[jtk-group-content]",h="elementDraggable",M="stop",l="revert",i="_groupManager",y="_jsPlumbGroup",S="_jsPlumbGroupDrag",T="group:addMember",D="group:removeMember",p="group:add",e="group:remove",O="group:expand",L="group:collapse",G="groupDragStop",B="connectionMoved",w="internal.connectionDetached",j="removeAll",r="orphanAll",d="show",u="hide",C=function(a){var P={},v={},E={},f=this;function x(t,g){for(var b=a.getContainer(),I=!1;!I;){if(t==null||t===b)return!1;if(t===g)return!0;t=t.parentNode}}a.bind("connection",function(t){var g=a.getGroupFor(t.source),b=a.getGroupFor(t.target);g!=null&&b!=null&&g===b?(v[t.connection.id]=g,E[t.connection.id]=g):(g!=null&&(c.suggest(g.connections.source,t.connection),v[t.connection.id]=g),b!=null&&(c.suggest(b.connections.target,t.connection),E[t.connection.id]=b))});function N(t){delete t.proxies;var g=v[t.id],b;g!=null&&(b=function(I){return I.id===t.id},c.removeWithFunction(g.connections.source,b),c.removeWithFunction(g.connections.target,b),delete v[t.id]),g=E[t.id],g!=null&&(b=function(I){return I.id===t.id},c.removeWithFunction(g.connections.source,b),c.removeWithFunction(g.connections.target,b),delete E[t.id])}a.bind(w,function(t){N(t.connection)}),a.bind(B,function(t){var g=t.index===0?v:E,b=g[t.connection.id];if(b){var I=b.connections[t.index===0?"source":"target"],F=I.indexOf(t.connection);F!==-1&&I.splice(F,1)}}),this.addGroup=function(t){a.addClass(t.getEl(),Z),P[t.id]=t,t.manager=this,o(t),a.fire(p,{group:t})},this.addToGroup=function(t,g,b){if(t=this.getGroup(t),t){var I=t.getEl();if(g._isJsPlumbGroup)return;var F=g._jsPlumbGroup;if(F!==t){a.removeFromDragSelection(g);var X=a.getOffset(g,!0),R=t.collapsed?a.getOffset(I,!0):a.getOffset(t.getDragArea(),!0);F!=null&&(F.remove(g,!1,b,!1,t),f.updateConnectionsForGroup(F)),t.add(g,b);var z=function(rt,pt){var dt=pt===0?1:0;rt.each(function(lt){lt.setVisible(!1),lt.endpoints[dt].element._jsPlumbGroup===t?(lt.endpoints[dt].setVisible(!1),n(lt,dt,t)):(lt.endpoints[pt].setVisible(!1),Y(lt,pt,t))})};t.collapsed&&(z(a.select({source:g}),0),z(a.select({target:g}),1));var at=a.getId(g);a.dragManager.setParent(g,at,I,a.getId(I),X);var st={left:X.left-R.left,top:X.top-R.top};if(a.setPosition(g,st),a.dragManager.revalidateParent(g,at,X),f.updateConnectionsForGroup(t),a.revalidate(at),!b){var it={group:t,el:g,pos:st};F&&(it.sourceGroup=F),a.fire(T,it)}}}},this.removeFromGroup=function(t,g,b){if(t=this.getGroup(t),t){if(t.collapsed){var I=function(F,X){for(var R=0;R<F.length;R++){var z=F[R];if(z.proxies){for(var at=0;at<z.proxies.length;at++)if(z.proxies[at]!=null){var st=z.proxies[at].originalEp.element;(st===g||x(st,g))&&n(z,X,t)}}}};I(t.connections.source.slice(),0),I(t.connections.target.slice(),1)}t.remove(g,null,b)}},this.getGroup=function(t){var g=t;if(c.isString(t)&&(g=P[t],g==null))throw new TypeError("No such group ["+t+"]");return g},this.getGroups=function(){var t=[];for(var g in P)t.push(P[g]);return t},this.removeGroup=function(t,g,b,I){t=this.getGroup(t),this.expandGroup(t,!0);var F=t[g?j:r](b,I);return a.remove(t.getEl()),delete P[t.id],delete a._groups[t.id],a.fire(e,{group:t}),F},this.removeAllGroups=function(t,g,b){for(var I in P)this.removeGroup(P[I],t,g,b)};function U(t,g){for(var b=t.getEl().querySelectorAll(".jtk-managed"),I=0;I<b.length;I++)a[g?d:u](b[I],!0)}var Y=function(t,g,b){var I=t.endpoints[g===0?1:0].element;if(!(I[y]&&!I[y].shouldProxy()&&I[y].collapsed)){var F=b.getEl(),X=a.getId(F);a.proxyConnection(t,g,F,X,function(R,z){return b.getEndpoint(R,z)},function(R,z){return b.getAnchor(R,z)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var g=t.getEl();if(U(t,!1),t.shouldProxy()){var b=function(I,F){for(var X=0;X<I.length;X++){var R=I[X];Y(R,F,t)}};b(t.connections.source,0),b(t.connections.target,1)}t.collapsed=!0,a.removeClass(g,Z),a.addClass(g,nt),a.revalidate(g),a.fire(L,{group:t})}};var n=function(t,g,b){a.unproxyConnection(t,g,a.getId(b.getEl()))};this.expandGroup=function(t,g){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var b=t.getEl();if(U(t,!0),t.shouldProxy()){var I=function(F,X){for(var R=0;R<F.length;R++){var z=F[R];n(z,X,t)}};I(t.connections.source,0),I(t.connections.target,1)}t.collapsed=!1,a.addClass(b,Z),a.removeClass(b,nt),a.revalidate(b),this.repaintGroup(t),g||a.fire(O,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var g=t.getMembers(),b=0;b<g.length;b++)a.revalidate(g[b])};function o(t){for(var g=t.getMembers().slice(),b=[],I=0;I<g.length;I++)Array.prototype.push.apply(b,g[I].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(g,b);var F=a.getConnections({source:g,scope:"*"},!0),X=a.getConnections({target:g,scope:"*"},!0),R={};t.connections.source.length=0,t.connections.target.length=0;var z=function(at){for(var st=0;st<at.length;st++)if(!R[at[st].id]){R[at[st].id]=!0;var it=a.getGroupFor(at[st].source),rt=a.getGroupFor(at[st].target);it===t?(rt!==t&&t.connections.source.push(at[st]),v[at[st].id]=t):rt===t&&(t.connections.target.push(at[st]),E[at[st].id]=t)}};z(F),z(X)}this.updateConnectionsForGroup=o,this.refreshAllGroups=function(){for(var t in P)o(P[t]),a.dragManager.updateOffsets(a.getId(P[t].getEl()))}},m=function(a,P){var v=this,E=P.el;this.getEl=function(){return E},this.id=P.id||c.uuid(),E._isJsPlumbGroup=!0;var f=this.getDragArea=function(){var rt=a.getSelector(E,W);return rt&&rt.length>0?rt[0]:E},x=P.ghost===!0,N=x||P.constrain===!0,U=P.revert!==!1,Y=P.orphan===!0,n=P.prune===!0,o=P.dropOverride===!0,t=P.proxied!==!1,g=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(rt,pt){return P.anchor||"Continuous"},this.getEndpoint=function(rt,pt){return P.endpoint||["Dot",{radius:10}]},this.collapsed=!1,P.draggable!==!1){var b={drag:function(){for(var rt=0;rt<g.length;rt++)a.draw(g[rt])},stop:function(rt){a.fire(G,jsPlumb.extend(rt,{group:v}))},scope:S};P.dragOptions&&K.jsPlumb.extend(b,P.dragOptions),a.draggable(P.el,b)}P.droppable!==!1&&a.droppable(P.el,{drop:function(rt){var pt=rt.drag.el;if(!pt._isJsPlumbGroup){var dt=pt._jsPlumbGroup;if(dt!==v){if(dt!=null&&dt.overrideDrop(pt,v))return;a.getGroupManager().addToGroup(v,pt,!1)}}}});var I=function(rt,pt){for(var dt=rt.nodeType==null?rt:[rt],lt=0;lt<dt.length;lt++)pt(dt[lt])};this.overrideDrop=function(rt,pt){return o&&(U||n||Y)},this.add=function(rt,pt){var dt=f();I(rt,function(lt){if(lt._jsPlumbGroup!=null){if(lt._jsPlumbGroup===v)return;lt._jsPlumbGroup.remove(lt,!0,pt,!1)}lt._jsPlumbGroup=v,g.push(lt),a.isAlreadyDraggable(lt)&&it(lt),lt.parentNode!==dt&&dt.appendChild(lt)}),a.getGroupManager().updateConnectionsForGroup(v)},this.remove=function(rt,pt,dt,lt,bt){I(rt,function(gt){if(gt._jsPlumbGroup===v){if(delete gt._jsPlumbGroup,c.removeWithFunction(g,function($){return $===gt}),pt)try{v.getDragArea().removeChild(gt)}catch($){jsPlumbUtil.log("Could not remove element from Group "+$)}if(st(gt),!dt){var J={group:v,el:gt};bt&&(J.targetGroup=bt),a.fire(D,J)}}}),lt||a.getGroupManager().updateConnectionsForGroup(v)},this.removeAll=function(rt,pt){for(var dt=0,lt=g.length;dt<lt;dt++){var bt=g[0];v.remove(bt,rt,pt,!0),a.remove(bt,!0)}g.length=0,a.getGroupManager().updateConnectionsForGroup(v)},this.orphanAll=function(){for(var rt={},pt=0;pt<g.length;pt++){var dt=R(g[pt]);rt[dt[0]]=dt[1]}return g.length=0,rt},this.getMembers=function(){return g},E[y]=this,a.bind(h,function(rt){rt.el._jsPlumbGroup===this&&it(rt.el)}.bind(this));function F(rt){return rt.offsetParent}function X(rt,pt){var dt=F(rt),lt=a.getSize(dt),bt=a.getSize(rt),gt=pt[0],J=gt+bt[0],$=pt[1],Q=$+bt[1];return J>0&&gt<lt[0]&&Q>0&&$<lt[1]}function R(rt){var pt=a.getId(rt),dt=a.getOffset(rt);return rt.parentNode.removeChild(rt),a.getContainer().appendChild(rt),a.setPosition(rt,dt),st(rt),a.dragManager.clearParent(rt,pt),[pt,dt]}function z(rt){var pt=[];function dt(bt,gt,J){var $=null;if(!X(bt,[gt,J])){var Q=bt._jsPlumbGroup;n?a.remove(bt):$=R(bt),Q.remove(bt)}return $}for(var lt=0;lt<rt.selection.length;lt++)pt.push(dt(rt.selection[lt][0],rt.selection[lt][1].left,rt.selection[lt][1].top));return pt.length===1?pt[0]:pt}function at(rt){var pt=a.getId(rt);a.revalidate(rt),a.dragManager.revalidateParent(rt,pt)}function st(rt){!rt._katavorioDrag||((n||Y)&&rt._katavorioDrag.off(M,z),!n&&!Y&&U&&(rt._katavorioDrag.off(l,at),rt._katavorioDrag.setRevert(null)))}function it(rt){!rt._katavorioDrag||((n||Y)&&rt._katavorioDrag.on(M,z),N&&rt._katavorioDrag.setConstrain(!0),x&&rt._katavorioDrag.setUseGhostProxy(!0),!n&&!Y&&U&&(rt._katavorioDrag.on(l,at),rt._katavorioDrag.setRevert(function(pt,dt){return!X(pt,dt)})))}this.shouldProxy=function(){return t},a.getGroupManager().addGroup(this)};V.prototype.addGroup=function(a){var P=this;if(P._groups=P._groups||{},P._groups[a.id]!=null)throw new TypeError("cannot create Group ["+a.id+"]; a Group with that ID exists");if(a.el[y]!=null)throw new TypeError("cannot create Group ["+a.id+"]; the given element is already a Group");var v=new m(P,a);return P._groups[v.id]=v,a.collapsed&&this.collapseGroup(v),v},V.prototype.addToGroup=function(a,P,v){var E=function(x){var N=this.getId(x);this.manage(N,x),this.getGroupManager().addToGroup(a,x,v)}.bind(this);if(Array.isArray(P))for(var f=0;f<P.length;f++)E(P[f]);else E(P)},V.prototype.removeFromGroup=function(a,P,v){this.getGroupManager().removeFromGroup(a,P,v),this.getContainer().appendChild(P)},V.prototype.removeGroup=function(a,P,v,E){return this.getGroupManager().removeGroup(a,P,v,E)},V.prototype.removeAllGroups=function(a,P,v){this.getGroupManager().removeAllGroups(a,P,v)},V.prototype.getGroup=function(a){return this.getGroupManager().getGroup(a)},V.prototype.getGroups=function(){return this.getGroupManager().getGroups()},V.prototype.expandGroup=function(a){this.getGroupManager().expandGroup(a)},V.prototype.collapseGroup=function(a){this.getGroupManager().collapseGroup(a)},V.prototype.repaintGroup=function(a){this.getGroupManager().repaintGroup(a)},V.prototype.toggleGroup=function(a){a=this.getGroupManager().getGroup(a),a!=null&&this.getGroupManager()[a.collapsed?"expandGroup":"collapseGroup"](a)},V.prototype.getGroupManager=function(){var a=this[i];return a==null&&(a=this[i]=new C(this)),a},V.prototype.removeGroupManager=function(){delete this[i]},V.prototype.getGroupFor=function(a){if(a=this.getElement(a),a){for(var P=this.getContainer(),v=!1,E=null;!v;)a==null||a===P?v=!0:a[y]?(E=a[y],v=!0):a=a.parentNode;return E}}}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt="Straight",Z="Arc",W=function(h){this.type="Flowchart",h=h||{},h.stub=h.stub==null?30:h.stub;var M,l=c.Connectors.AbstractConnector.apply(this,arguments),i=h.midpoint==null||isNaN(h.midpoint)?.5:h.midpoint,y=h.alwaysRespectStubs===!0,S=null,T=null,D=h.cornerRadius!=null?h.cornerRadius:0;h.loopbackRadius;var p=function(w){return w<0?-1:w===0?0:1},e=function(w){return[p(w[2]-w[0]),p(w[3]-w[1])]},O=function(w,j,r,d){if(!(S===j&&T===r)){var u=S==null?d.sx:S,C=T==null?d.sy:T,m=u===j?"v":"h";S=j,T=r,w.push([u,C,j,r,m])}},L=function(w){return Math.sqrt(Math.pow(w[0]-w[2],2)+Math.pow(w[1]-w[3],2))},G=function(w){var j=[];return j.push.apply(j,w),j},B=function(w,j,r){for(var d=null,u,C,m,a=0;a<j.length-1;a++){if(d=d||G(j[a]),u=G(j[a+1]),C=e(d),m=e(u),D>0&&d[4]!==u[4]){var P=Math.min(L(d),L(u)),v=Math.min(D,P/2);d[2]-=C[0]*v,d[3]-=C[1]*v,u[0]+=m[0]*v,u[1]+=m[1]*v;var E=C[1]===m[0]&&m[0]===1||C[1]===m[0]&&m[0]===0&&C[0]!==m[1]||C[1]===m[0]&&m[0]===-1,f=u[1]>d[3]?1:-1,x=u[0]>d[2]?1:-1,N=f===x,U=N&&E||!N&&!E?u[0]:d[2],Y=N&&E||!N&&!E?d[3]:u[1];l.addSegment(w,nt,{x1:d[0],y1:d[1],x2:d[2],y2:d[3]}),l.addSegment(w,Z,{r:v,x1:d[2],y1:d[3],x2:u[0],y2:u[1],cx:U,cy:Y,ac:E})}else{var n=d[2]===d[0]?0:d[2]>d[0]?r.lw/2:-(r.lw/2),o=d[3]===d[1]?0:d[3]>d[1]?r.lw/2:-(r.lw/2);l.addSegment(w,nt,{x1:d[0]-n,y1:d[1]-o,x2:d[2]+n,y2:d[3]+o})}d=u}u!=null&&l.addSegment(w,nt,{x1:u[0],y1:u[1],x2:u[2],y2:u[3]})};this.midpoint=i,this._compute=function(w,j){M=[],S=null,T=null;var r=function(){return[w.startStubX,w.startStubY,w.endStubX,w.endStubY]},d={perpendicular:r,orthogonal:r,opposite:function(o){var t=w,g=o==="x"?0:1,b={x:function(){return t.so[g]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[g]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[g]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[g]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!y&&b[o]()?{x:[(w.sx+w.tx)/2,w.startStubY,(w.sx+w.tx)/2,w.endStubY],y:[w.startStubX,(w.sy+w.ty)/2,w.endStubX,(w.sy+w.ty)/2]}[o]:[w.startStubX,w.startStubY,w.endStubX,w.endStubY]}},u=d[w.anchorOrientation](w.sourceAxis),C=w.sourceAxis==="x"?0:1,m=w.sourceAxis==="x"?1:0,a=u[C],P=u[m],v=u[C+2],E=u[m+2];O(M,u[0],u[1],w);var f=w.startStubX+(w.endStubX-w.startStubX)*i,x=w.startStubY+(w.endStubY-w.startStubY)*i,N={x:[0,1],y:[1,0]},U={perpendicular:function(o){var t=w,g={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},b={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},I={x:[[f,t.startStubY],[f,t.endStubY]],y:[[t.startStubX,x],[t.endStubX,x]]},F={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},X={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},R={x:[[t.startStubX,x],[t.endStubX,x],[t.endStubX,t.endStubY]],y:[[f,t.startStubY],[f,t.endStubY],[t.endStubX,t.endStubY]]},z={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},at=N[o][0],st=N[o][1],it=t.so[at]+1,rt=t.to[st]+1,pt=t.to[st]===-1&&z[o][1]<z[o][0]||t.to[st]===1&&z[o][1]>z[o][0],dt=b[o][it][0],lt=b[o][it][1],bt=g[o][it][rt];if(t.segment===bt[3]||t.segment===bt[2]&&pt)return I[o];if(t.segment===bt[2]&&lt<dt)return F[o];if(t.segment===bt[2]&&lt>=dt||t.segment===bt[1]&&!pt)return R[o];if(t.segment===bt[0]||t.segment===bt[1]&&pt)return X[o]},orthogonal:function(o,t,g,b,I){var F=w,X={x:F.so[0]===-1?Math.min(t,b):Math.max(t,b),y:F.so[1]===-1?Math.min(t,b):Math.max(t,b)}[o];return{x:[[X,g],[X,I],[b,I]],y:[[g,X],[I,X],[I,b]]}[o]},opposite:function(o,t,g,b){var I=w,F={x:"y",y:"x"}[o],X={x:"height",y:"width"}[o],R=I["is"+o.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId===j.targetEndpoint.elementId){var z=g+(1-j.sourceEndpoint.anchor[F])*j.sourceInfo[X]+l.maxStub;return{x:[[t,z],[b,z]],y:[[z,t],[z,b]]}[o]}else{if(!R||I.so[C]===1&&t>b||I.so[C]===-1&&t<b)return{x:[[t,x],[b,x]],y:[[f,t],[f,b]]}[o];if(I.so[C]===1&&t<b||I.so[C]===-1&&t>b)return{x:[[f,I.sy],[f,I.ty]],y:[[I.sx,x],[I.tx,x]]}[o]}}},Y=U[w.anchorOrientation](w.sourceAxis,a,P,v,E);if(Y)for(var n=0;n<Y.length;n++)O(M,Y[n][0],Y[n][1],w);O(M,u[2],u[3],w),O(M,w.tx,w.ty,w),B(this,M,w)}};c.Connectors.Flowchart=W,V.extend(c.Connectors.Flowchart,c.Connectors.AbstractConnector)}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil;c.Connectors.AbstractBezierConnector=function(Z){Z=Z||{};var W=Z.showLoopback!==!1;Z.curviness;var h=Z.margin||5;Z.proximityLimit;var M=Z.orientation&&Z.orientation==="clockwise",l=Z.loopbackRadius||25,i;return this._compute=function(y,S){var T=S.sourcePos,D=S.targetPos,p=Math.abs(T[0]-D[0]),e=Math.abs(T[1]-D[1]);if(!W||S.sourceEndpoint.elementId!==S.targetEndpoint.elementId)this._computeBezier(y,S,T,D,p,e);else{var O=S.sourcePos[0],L=S.sourcePos[1]-h,G=O,B=L-l,w=G-l,j=B-l;p=2*l,e=2*l,y.points[0]=w,y.points[1]=j,y.points[2]=p,y.points[3]=e,i.addSegment(this,"Arc",{loopback:!0,x1:O-w+4,y1:L-j,startAngle:0,endAngle:2*Math.PI,r:l,ac:!M,x2:O-w-4,y2:L-j,cx:G-w,cy:B-j})}},i=c.Connectors.AbstractConnector.apply(this,arguments),i},V.extend(c.Connectors.AbstractBezierConnector,c.Connectors.AbstractConnector);var nt=function(Z){Z=Z||{},this.type="Bezier";var W=c.Connectors.AbstractBezierConnector.apply(this,arguments),h=Z.curviness||150,M=10;this.getCurviness=function(){return h},this._findControlPoint=function(l,i,y,S,T,D,p){var e=D[0]!==p[0]||D[1]===p[1],O=[];return e?(p[0]===0?O.push(y[0]<i[0]?l[0]+M:l[0]-M):O.push(l[0]+h*p[0]),p[1]===0?O.push(y[1]<i[1]?l[1]+M:l[1]-M):O.push(l[1]+h*D[1])):(D[0]===0?O.push(i[0]<y[0]?l[0]+M:l[0]-M):O.push(l[0]-h*D[0]),D[1]===0?O.push(i[1]<y[1]?l[1]+M:l[1]-M):O.push(l[1]+h*p[1])),O},this._computeBezier=function(l,i,y,S,T,D){var p,e,O=y[0]<S[0]?T:0,L=y[1]<S[1]?D:0,G=y[0]<S[0]?0:T,B=y[1]<S[1]?0:D;p=this._findControlPoint([O,L],y,S,i.sourceEndpoint,i.targetEndpoint,l.so,l.to),e=this._findControlPoint([G,B],S,y,i.targetEndpoint,i.sourceEndpoint,l.to,l.so),W.addSegment(this,"Bezier",{x1:O,y1:L,x2:G,y2:B,cp1x:p[0],cp1y:p[1],cp2x:e[0],cp2y:e[1]})}};c.Connectors.Bezier=nt,V.extend(nt,c.Connectors.AbstractBezierConnector)}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt=function(h,M,l,i){return h<=l&&i<=M?1:h<=l&&M<=i?2:l<=h&&i>=M?3:4},Z=function(h,M,l,i,y,S,T,D,p){if(D<=p)return[h,M];if(l===1)return i[3]<=0&&y[3]>=1?[h+(i[2]<.5?-1*S:S),M]:i[2]>=1&&y[2]<=0?[h,M+(i[3]<.5?-1*T:T)]:[h+-1*S,M+-1*T];if(l===2)return i[3]>=1&&y[3]<=0?[h+(i[2]<.5?-1*S:S),M]:i[2]>=1&&y[2]<=0?[h,M+(i[3]<.5?-1*T:T)]:[h+S,M+-1*T];if(l===3)return i[3]>=1&&y[3]<=0?[h+(i[2]<.5?-1*S:S),M]:i[2]<=0&&y[2]>=1?[h,M+(i[3]<.5?-1*T:T)]:[h+-1*S,M+-1*T];if(l===4)return i[3]<=0&&y[3]>=1?[h+(i[2]<.5?-1*S:S),M]:i[2]<=0&&y[2]>=1?[h,M+(i[3]<.5?-1*T:T)]:[h+S,M+-1*T]},W=function(h){h=h||{},this.type="StateMachine";var M=c.Connectors.AbstractBezierConnector.apply(this,arguments),l=h.curviness||10,i=h.margin||5,y=h.proximityLimit||80;h.orientation&&h.orientation;var S;this._computeBezier=function(T,D,p,e,O,L){var G=D.sourcePos[0]<D.targetPos[0]?0:O,B=D.sourcePos[1]<D.targetPos[1]?0:L,w=D.sourcePos[0]<D.targetPos[0]?O:0,j=D.sourcePos[1]<D.targetPos[1]?L:0;D.sourcePos[2]===0&&(G-=i),D.sourcePos[2]===1&&(G+=i),D.sourcePos[3]===0&&(B-=i),D.sourcePos[3]===1&&(B+=i),D.targetPos[2]===0&&(w-=i),D.targetPos[2]===1&&(w+=i),D.targetPos[3]===0&&(j-=i),D.targetPos[3]===1&&(j+=i);var r=(G+w)/2,d=(B+j)/2,u=nt(G,B,w,j),C=Math.sqrt(Math.pow(w-G,2)+Math.pow(j-B,2)),m,a,P,v;S=Z(r,d,u,D.sourcePos,D.targetPos,l,l,C,y),m=S[0],a=S[0],P=S[1],v=S[1],M.addSegment(this,"Bezier",{x1:w,y1:j,x2:G,y2:B,cp1x:m,cp1y:P,cp2x:a,cp2y:v})}};c.Connectors.StateMachine=W,V.extend(W,c.Connectors.AbstractBezierConnector)}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt="Straight",Z=function(W){this.type=nt;var h=c.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(M,l){h.addSegment(this,nt,{x1:M.sx,y1:M.sy,x2:M.startStubX,y2:M.startStubY}),h.addSegment(this,nt,{x1:M.startStubX,y1:M.startStubY,x2:M.endStubX,y2:M.endStubY}),h.addSegment(this,nt,{x1:M.endStubX,y1:M.endStubY,x2:M.tx,y2:M.ty})}};c.Connectors.Straight=Z,V.extend(Z,c.Connectors.AbstractConnector)}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Z="stroke-dasharray",W="dashstyle",h="linearGradient",M="radialGradient",l="defs",i="fill",y="stop",S="stroke",T="stroke-width",D="style",p="none",e="jsplumb_gradient_",O="strokeWidth",L={svg:"http://www.w3.org/2000/svg"},G=function(v,E){for(var f in E)v.setAttribute(f,""+E[f])},B=function(v,E){return E=E||{},E.version="1.1",E.xmlns=L.svg,c.createElementNS(L.svg,v,null,null,E)},w=function(v){return"position:absolute;left:"+v[0]+"px;top:"+v[1]+"px"},j=function(v){for(var E=v.querySelectorAll(" defs,linearGradient,radialGradient"),f=0;f<E.length;f++)E[f].parentNode.removeChild(E[f])},r=function(v,E,f,x,N){var U=e+N._jsPlumb.instance.idstamp();j(v);var Y;f.gradient.offset?Y=B(M,{id:U}):Y=B(h,{id:U,gradientUnits:"userSpaceOnUse"});var n=B(l);v.appendChild(n),n.appendChild(Y);for(var o=0;o<f.gradient.stops.length;o++){var t=N.segment===1||N.segment===2?o:f.gradient.stops.length-1-o,g=f.gradient.stops[t][1],b=B(y,{offset:Math.floor(f.gradient.stops[o][0]*100)+"%","stop-color":g});Y.appendChild(b)}var I=f.stroke?S:i;E.setAttribute(I,"url(#"+U+")")},d=function(v,E,f,x,N){if(E.setAttribute(i,f.fill?f.fill:p),E.setAttribute(S,f.stroke?f.stroke:p),f.gradient?r(v,E,f,x,N):(j(v),E.setAttribute(D,"")),f.strokeWidth&&E.setAttribute(T,f.strokeWidth),f[W]&&f[O]&&!f[Z]){var U=f[W].indexOf(",")===-1?" ":",",Y=f[W].split(U),n="";Y.forEach(function(t){n+=Math.floor(t*f.strokeWidth)+U}),E.setAttribute(Z,n)}else f[Z]&&E.setAttribute(Z,f[Z]);for(var o in nt)f[o]&&E.setAttribute(nt[o],f[o])},u=function(v,E,f){v.childNodes.length>f?v.insertBefore(E,v.childNodes[f]):v.appendChild(E)};V.svg={node:B,attr:G,pos:w};var C=function(v){var E=v.pointerEventsSpec||"all",f={};c.jsPlumbUIComponent.apply(this,v.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var x=v.cssClass+" "+(v.originalArgs[0].cssClass||""),N={style:"",width:0,height:0,"pointer-events":E,position:"absolute"};this.svg=B("svg",N),v.useDivWrapper?(this.canvas=c.createElement("div",{position:"absolute"}),V.sizeElement(this.canvas,0,0,1,1),this.canvas.className=x):(G(this.svg,{class:x}),this.canvas=this.svg),v._jsPlumb.appendElement(this.canvas,v.originalArgs[0].parent),v.useDivWrapper&&this.canvas.appendChild(this.svg);var U=[this.canvas];return this.getDisplayElements=function(){return U},this.appendDisplayElement=function(Y){U.push(Y)},this.paint=function(Y,n,o){if(Y!=null){var t=[this.x,this.y],g=[this.w,this.h],b;o!=null&&(o.xmin<0&&(t[0]+=o.xmin),o.ymin<0&&(t[1]+=o.ymin),g[0]=o.xmax+(o.xmin<0?-o.xmin:0),g[1]=o.ymax+(o.ymin<0?-o.ymin:0)),v.useDivWrapper?(V.sizeElement(this.canvas,t[0],t[1],g[0]>0?g[0]:1,g[1]>0?g[1]:1),t[0]=0,t[1]=0,b=w([0,0])):b=w([t[0],t[1]]),f.paint.apply(this,arguments),G(this.svg,{style:b,width:g[0]||1,height:g[1]||1})}},{renderer:f}};V.extend(C,c.jsPlumbUIComponent,{cleanup:function(v){v||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(v){var E=v.getContainer();this.canvas&&this.canvas.parentNode==null&&E.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&E.appendChild(this.bgCanvas)},setVisible:function(v){this.canvas&&(this.canvas.style.display=v?"block":"none")}}),c.ConnectorRenderers.svg=function(v){var E=this,f=C.apply(this,[{cssClass:v._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:v._jsPlumb}]);f.renderer.paint=function(x,N,U){var Y=E.getSegments(),n="",o=[0,0];if(U.xmin<0&&(o[0]=-U.xmin),U.ymin<0&&(o[1]=-U.ymin),Y.length>0){n=E.getPathData();var t={d:n,transform:"translate("+o[0]+","+o[1]+")","pointer-events":v["pointer-events"]||"visibleStroke"},g=null,b=[E.x,E.y,E.w,E.h];if(x.outlineStroke){var I=x.outlineWidth||1,F=x.strokeWidth+2*I;g=c.extend({},x),delete g.gradient,g.stroke=x.outlineStroke,g.strokeWidth=F,E.bgPath==null?(E.bgPath=B("path",t),c.addClass(E.bgPath,c.connectorOutlineClass),u(E.svg,E.bgPath,0)):G(E.bgPath,t),d(E.svg,E.bgPath,g,b,E)}E.path==null?(E.path=B("path",t),u(E.svg,E.path,x.outlineStroke?1:0)):G(E.path,t),d(E.svg,E.path,x,b,E)}}},V.extend(c.ConnectorRenderers.svg,C);var m=c.SvgEndpoint=function(v){var E=C.apply(this,[{cssClass:v._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:v._jsPlumb}]);E.renderer.paint=function(f){var x=c.extend({},f);x.outlineStroke&&(x.stroke=x.outlineStroke),this.node==null?(this.node=this.makeNode(x),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),d(this.svg,this.node,x,[this.x,this.y,this.w,this.h],this),w(this.node,[this.x,this.y])}.bind(this)};V.extend(m,C),c.Endpoints.svg.Dot=function(){c.Endpoints.Dot.apply(this,arguments),m.apply(this,arguments),this.makeNode=function(v){return B("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(v){G(v,{cx:this.w/2,cy:this.h/2,r:this.radius})}},V.extend(c.Endpoints.svg.Dot,[c.Endpoints.Dot,m]),c.Endpoints.svg.Rectangle=function(){c.Endpoints.Rectangle.apply(this,arguments),m.apply(this,arguments),this.makeNode=function(v){return B("rect",{width:this.w,height:this.h})},this.updateNode=function(v){G(v,{width:this.w,height:this.h})}},V.extend(c.Endpoints.svg.Rectangle,[c.Endpoints.Rectangle,m]),c.Endpoints.svg.Image=c.Endpoints.Image,c.Endpoints.svg.Blank=c.Endpoints.Blank,c.Overlays.svg.Label=c.Overlays.Label,c.Overlays.svg.Custom=c.Overlays.Custom;var a=function(v,E){v.apply(this,E),c.jsPlumbUIComponent.apply(this,E),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(x,N){if(x.component.svg&&N){this.path==null&&(this.path=B("path",{"pointer-events":"all"}),x.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,x.component),this.canvas=x.component.svg);var U=E&&E.length===1&&E[0].cssClass||"",Y=[0,0];N.xmin<0&&(Y[0]=-N.xmin),N.ymin<0&&(Y[1]=-N.ymin),G(this.path,{d:f(x.d),class:U,stroke:x.stroke?x.stroke:null,fill:x.fill?x.fill:null,transform:"translate("+Y[0]+","+Y[1]+")"})}};var f=function(x){return isNaN(x.cxy.x)||isNaN(x.cxy.y)?"":"M"+x.hxy.x+","+x.hxy.y+" L"+x.tail[0].x+","+x.tail[0].y+" L"+x.cxy.x+","+x.cxy.y+" L"+x.tail[1].x+","+x.tail[1].y+" L"+x.hxy.x+","+x.hxy.y};this.transfer=function(x){x.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),x.canvas.appendChild(this.path))}},P={cleanup:function(v){this.path!=null&&(v?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(v,E){this.path&&E.canvas&&E.canvas.appendChild(this.path)},setVisible:function(v){this.path!=null&&(this.path.style.display=v?"block":"none")}};V.extend(a,[c.jsPlumbUIComponent,c.Overlays.AbstractOverlay]),c.Overlays.svg.Arrow=function(){a.apply(this,[c.Overlays.Arrow,arguments])},V.extend(c.Overlays.svg.Arrow,[c.Overlays.Arrow,a],P),c.Overlays.svg.PlainArrow=function(){a.apply(this,[c.Overlays.PlainArrow,arguments])},V.extend(c.Overlays.svg.PlainArrow,[c.Overlays.PlainArrow,a],P),c.Overlays.svg.Diamond=function(){a.apply(this,[c.Overlays.Diamond,arguments])},V.extend(c.Overlays.svg.Diamond,[c.Overlays.Diamond,a],P),c.Overlays.svg.GuideLines=function(){var v=null,E=this,f,x;c.Overlays.GuideLines.apply(this,arguments),this.paint=function(U,Y){v==null&&(v=B("path"),U.connector.svg.appendChild(v),E.attachListeners(v,U.connector),E.attachListeners(v,E),f=B("path"),U.connector.svg.appendChild(f),E.attachListeners(f,U.connector),E.attachListeners(f,E),x=B("path"),U.connector.svg.appendChild(x),E.attachListeners(x,U.connector),E.attachListeners(x,E));var n=[0,0];Y.xmin<0&&(n[0]=-Y.xmin),Y.ymin<0&&(n[1]=-Y.ymin),G(v,{d:N(U.head,U.tail),stroke:"red",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),G(f,{d:N(U.tailLine[0],U.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),G(x,{d:N(U.headLine[0],U.headLine[1]),stroke:"green",fill:null,transform:"translate("+n[0]+","+n[1]+")"})};var N=function(U,Y){return"M "+U.x+","+U.y+" L"+Y.x+","+Y.y}},V.extend(c.Overlays.svg.GuideLines,c.Overlays.GuideLines)}.call(typeof window!="undefined"?window:kt),function(){var K=this,c=K.jsPlumb,V=K.jsPlumbUtil,nt=K.Katavorio,Z=K.Biltong,W=function(r){var d=r._mottle;return d||(d=r._mottle=new K.Mottle),d},h=function(r,d){d=d||"main";var u="_katavorio_"+d,C=r[u],m=r.getEventManager();return C||(C=new nt({bind:m.on,unbind:m.off,getSize:c.getSize,getConstrainingRectangle:function(a){return[a.parentNode.scrollWidth,a.parentNode.scrollHeight]},getPosition:function(a,P){var v=r.getOffset(a,P,a._katavorioDrag?a.offsetParent:null);return[v.left,v.top]},setPosition:function(a,P){a.style.left=P[0]+"px",a.style.top=P[1]+"px"},addClass:c.addClass,removeClass:c.removeClass,intersects:Z.intersects,indexOf:function(a,P){return a.indexOf(P)},scope:r.getDefaultScope(),css:{noSelect:r.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),C.setZoom(r.getZoom()),r[u]=C,r.bind("zoom",C.setZoom)),C},M=function(r){var d=r.el._jsPlumbDragOptions,u=!0;return d.canDrag&&(u=d.canDrag()),u&&(this.setHoverSuspended(!0),this.select({source:r.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:r.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),u},l=function(r){var d=this.getUIPosition(arguments,this.getZoom());if(d!=null){var u=r.el._jsPlumbDragOptions;this.draw(r.el,d,null,!0),u._dragging&&this.addClass(r.el,"jtk-dragged"),u._dragging=!0}},i=function(r){for(var d=r.selection,u,C=function(a){var P;a[1]!=null&&(u=this.getUIPosition([{el:a[2].el,pos:[a[1].left,a[1].top]}]),P=this.draw(a[2].el,u)),a[0]._jsPlumbDragOptions!=null&&delete a[0]._jsPlumbDragOptions._dragging,this.removeClass(a[0],"jtk-dragged"),this.select({source:a[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:a[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),r.e._drawResult=r.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(r.e._drawResult.c,P.c),Array.prototype.push.apply(r.e._drawResult.e,P.e),Array.prototype.push.apply(r.e._drawResult.a,P.a),this.getDragManager().dragEnded(a[2].el)}.bind(this),m=0;m<d.length;m++)C(d[m]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},y=function(r,d){var u=function(C){if(d[C]!=null)if(V.isString(d[C])){var m=d[C].match(/-=/)?-1:1,a=d[C].substring(2);return r[C]+m*a}else return d[C];else return r[C]};return[u("left"),u("top")]},S=function(r,d){if(d==null)return[0,0];var u=O(d),C=e(u,0);return[C[r+"X"],C[r+"Y"]]},T=S.bind(this,"page"),D=S.bind(this,"screen"),p=S.bind(this,"client"),e=function(r,d){return r.item?r.item(d):r[d]},O=function(r){return r.touches&&r.touches.length>0?r.touches:r.changedTouches&&r.changedTouches.length>0?r.changedTouches:r.targetTouches&&r.targetTouches.length>0?r.targetTouches:[r]},L=function(r){var d={},u=[],C={},m={},a={};this.register=function(P){var v=r.getId(P),E;d[v]||(d[v]=P,u.push(P),C[v]={});var f=function(x){if(x){for(var N=0;N<x.childNodes.length;N++)if(x.childNodes[N].nodeType!==3&&x.childNodes[N].nodeType!==8){var U=jsPlumb.getElement(x.childNodes[N]),Y=r.getId(x.childNodes[N],null,!0);if(Y&&m[Y]&&m[Y]>0){E||(E=r.getOffset(P));var n=r.getOffset(U);C[v][Y]={id:Y,offset:{left:n.left-E.left,top:n.top-E.top}},a[Y]=v}f(x.childNodes[N])}}};f(P)},this.updateOffsets=function(P,v){if(P!=null){v=v||{};var E=jsPlumb.getElement(P),f=r.getId(E),x=C[f],N;if(x){for(var U in x)if(x.hasOwnProperty(U)){var Y=jsPlumb.getElement(U),n=v[U]||r.getOffset(Y);if(Y.offsetParent==null&&C[f][U]!=null)continue;N||(N=r.getOffset(E)),C[f][U]={id:U,offset:{left:n.left-N.left,top:n.top-N.top}},a[U]=f}}}},this.endpointAdded=function(P,v){v=v||r.getId(P);var E=document.body,f=P.parentNode;for(m[v]=m[v]?m[v]+1:1;f!=null&&f!==E;){var x=r.getId(f,null,!0);if(x&&d[x]){var N=r.getOffset(f);if(C[x][v]==null){var U=r.getOffset(P);C[x][v]={id:v,offset:{left:U.left-N.left,top:U.top-N.top}},a[v]=x}break}f=f.parentNode}},this.endpointDeleted=function(P){if(m[P.elementId]&&(m[P.elementId]--,m[P.elementId]<=0))for(var v in C)C.hasOwnProperty(v)&&C[v]&&(delete C[v][P.elementId],delete a[P.elementId])},this.changeId=function(P,v){C[v]=C[P],C[P]={},a[v]=a[P],a[P]=null},this.getElementsForDraggable=function(P){return C[P]},this.elementRemoved=function(P){var v=a[P];v&&(C[v]&&delete C[v][P],delete a[P])},this.reset=function(){d={},u=[],C={},m={}},this.dragEnded=function(P){if(P.offsetParent!=null){var v=r.getId(P),E=a[v];E&&this.updateOffsets(E)}},this.setParent=function(P,v,E,f,x){var N=a[v];C[f]||(C[f]={});var U=r.getOffset(E),Y=x||r.getOffset(P);N&&C[N]&&delete C[N][v],C[f][v]={id:v,offset:{left:Y.left-U.left,top:Y.top-U.top}},a[v]=f},this.clearParent=function(P,v){var E=a[v];E&&(delete C[E][v],delete a[v])},this.revalidateParent=function(P,v,E){var f=a[v];if(f){var x={};x[v]=E,this.updateOffsets(f,x),r.revalidate(f)}},this.getDragAncestor=function(P){var v=jsPlumb.getElement(P),E=r.getId(v),f=a[E];return f?jsPlumb.getElement(f):null}},G=function(r,d,u){d=V.fastTrim(d),typeof r.className.baseVal!="undefined"?r.className.baseVal=d:r.className=d;try{var C=r.classList;if(C!=null){for(;C.length>0;)C.remove(C.item(0));for(var m=0;m<u.length;m++)u[m]&&C.add(u[m])}}catch(a){V.log("JSPLUMB: cannot set class list",a)}},B=function(r){return typeof r.className.baseVal=="undefined"?r.className:r.className.baseVal},w=function(r,d,u){d=d==null?[]:V.isArray(d)?d:d.split(/\s+/),u=u==null?[]:V.isArray(u)?u:u.split(/\s+/);var C=B(r),m=C.split(/\s+/),a=function(P,v){for(var E=0;E<v.length;E++)if(P)m.indexOf(v[E])===-1&&m.push(v[E]);else{var f=m.indexOf(v[E]);f!==-1&&m.splice(f,1)}};a(!0,d),a(!1,u),G(r,m.join(" "),m)};K.jsPlumb.extend(K.jsPlumbInstance.prototype,{headless:!1,pageLocation:T,screenLocation:D,clientLocation:p,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new L(this)),this.dragManager},recalculateOffsets:function(r){this.getDragManager().updateOffsets(r)},createElement:function(r,d,u,C){return this.createElementNS(null,r,d,u,C)},createElementNS:function(r,d,u,C,m){var a=r==null?document.createElement(d):document.createElementNS(r,d),P;u=u||{};for(P in u)a.style[P]=u[P];C&&(a.className=C),m=m||{};for(P in m)a.setAttribute(P,""+m[P]);return a},getAttribute:function(r,d){return r.getAttribute!=null?r.getAttribute(d):null},setAttribute:function(r,d,u){r.setAttribute!=null&&r.setAttribute(d,u)},setAttributes:function(r,d){for(var u in d)d.hasOwnProperty(u)&&r.setAttribute(u,d[u])},appendToRoot:function(r){document.body.appendChild(r)},getRenderModes:function(){return["svg"]},getClass:B,addClass:function(r,d){jsPlumb.each(r,function(u){w(u,d)})},hasClass:function(r,d){return r=jsPlumb.getElement(r),r.classList?r.classList.contains(d):B(r).indexOf(d)!==-1},removeClass:function(r,d){jsPlumb.each(r,function(u){w(u,null,d)})},toggleClass:function(r,d){jsPlumb.hasClass(r,d)?jsPlumb.removeClass(r,d):jsPlumb.addClass(r,d)},updateClasses:function(r,d,u){jsPlumb.each(r,function(C){w(C,d,u)})},setClass:function(r,d){d!=null&&jsPlumb.each(r,function(u){G(u,d,d.split(/\s+/))})},setPosition:function(r,d){r.style.left=d.left+"px",r.style.top=d.top+"px"},getPosition:function(r){var d=function(u){var C=r.style[u];return C?C.substring(0,C.length-2):0};return{left:d("left"),top:d("top")}},getStyle:function(r,d){return typeof window.getComputedStyle!="undefined"?getComputedStyle(r,null).getPropertyValue(d):r.currentStyle[d]},getSelector:function(r,d){var u=null;return arguments.length===1?u=r.nodeType!=null?r:document.querySelectorAll(r):u=r.querySelectorAll(d),u},getOffset:function(r,d,u){r=jsPlumb.getElement(r),u=u||this.getContainer();for(var C={left:r.offsetLeft,top:r.offsetTop},m=d||u!=null&&r!==u&&r.offsetParent!==u?r.offsetParent:null,a=function(E){E!=null&&E!==document.body&&(E.scrollTop>0||E.scrollLeft>0)&&(C.left-=E.scrollLeft,C.top-=E.scrollTop)}.bind(this);m!=null;)C.left+=m.offsetLeft,C.top+=m.offsetTop,a(m),m=d?m.offsetParent:m.offsetParent===u?null:m.offsetParent;if(u!=null&&!d&&(u.scrollTop>0||u.scrollLeft>0)){var P=r.offsetParent!=null?this.getStyle(r.offsetParent,"position"):"static",v=this.getStyle(r,"position");v!=="absolute"&&v!=="fixed"&&P!=="absolute"&&P!=="fixed"&&(C.left-=u.scrollLeft,C.top-=u.scrollTop)}return C},getPositionOnElement:function(r,d,u){var C=typeof d.getBoundingClientRect!="undefined"?d.getBoundingClientRect():{left:0,top:0,width:0,height:0},m=document.body,a=document.documentElement,P=window.pageYOffset||a.scrollTop||m.scrollTop,v=window.pageXOffset||a.scrollLeft||m.scrollLeft,E=a.clientTop||m.clientTop||0,f=a.clientLeft||m.clientLeft||0,x=0,N=0,U=C.top+P-E+x*u,Y=C.left+v-f+N*u,n=jsPlumb.pageLocation(r),o=C.width||d.offsetWidth*u,t=C.height||d.offsetHeight*u,g=(n[0]-Y)/o,b=(n[1]-U)/t;return[g,b]},getAbsolutePosition:function(r){var d=function(u){var C=r.style[u];if(C)return parseFloat(C.substring(0,C.length-2))};return[d("left"),d("top")]},setAbsolutePosition:function(r,d,u,C){u?this.animate(r,{left:"+="+(d[0]-u[0]),top:"+="+(d[1]-u[1])},C):(r.style.left=d[0]+"px",r.style.top=d[1]+"px")},getSize:function(r){return[r.offsetWidth,r.offsetHeight]},getWidth:function(r){return r.offsetWidth},getHeight:function(r){return r.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(r,d){var u;return r=V.isArray(r)||r.length!=null&&!V.isString(r)?r:[r],Array.prototype.slice.call(r).forEach(function(C){u=this.info(C),u.el&&this._initDraggableIfNecessary(u.el,!0,d,u.id,!0)}.bind(this)),this},snapToGrid:function(r,d,u){var C=[],m=function(v){var E=this.info(v);if(E.el!=null&&E.el._katavorioDrag){var f=E.el._katavorioDrag.snap(d,u);this.revalidate(E.el),C.push([E.el,f])}}.bind(this);if(arguments.length===1||arguments.length===3)m(r,d,u);else{var a=this.getManagedElements();for(var P in a)m(P,arguments[0],arguments[1])}return C},initDraggable:function(r,d,u){h(this,u).draggable(r,d),r._jsPlumbDragOptions=d},destroyDraggable:function(r,d){h(this,d).destroyDraggable(r),r._jsPlumbDragOptions=null,r._jsPlumbRelatedElement=null},unbindDraggable:function(r,d,u,C){h(this,C).destroyDraggable(r,d,u)},setDraggable:function(r,d){return jsPlumb.each(r,function(u){this.isDragSupported(u)&&(this._draggableStates[this.getAttribute(u,"id")]=d,this.setElementDraggable(u,d))}.bind(this))},_draggableStates:{},toggleDraggable:function(r){var d;return jsPlumb.each(r,function(u){var C=this.getAttribute(u,"id");return d=this._draggableStates[C]==null?!1:this._draggableStates[C],d=!d,this._draggableStates[C]=d,this.setDraggable(u,d),d}.bind(this)),d},_initDraggableIfNecessary:function(r,d,u,C,m){if(!jsPlumb.headless){var a=d==null?!1:d;if(a&&jsPlumb.isDragSupported(r,this)){var P=u||this.Defaults.DragOptions;if(P=jsPlumb.extend({},P),jsPlumb.isAlreadyDraggable(r,this))u.force&&this.initDraggable(r,P);else{var v=jsPlumb.dragEvents.drag,E=jsPlumb.dragEvents.stop,f=jsPlumb.dragEvents.start;this.manage(C,r),P[f]=V.wrap(P[f],M.bind(this)),P[v]=V.wrap(P[v],l.bind(this)),P[E]=V.wrap(P[E],i.bind(this));var x=this.getId(r);this._draggableStates[x]=!0;var N=this._draggableStates[x];P.disabled=N==null?!1:!N,this.initDraggable(r,P),this.getDragManager().register(r),m&&this.fire("elementDraggable",{el:r,options:P})}}}},animationSupported:!0,getElement:function(r){return r==null?null:(r=typeof r=="string"?r:r.tagName==null&&r.length!=null&&r.enctype==null?r[0]:r,typeof r=="string"?document.getElementById(r):r)},removeElement:function(r){h(this).elementRemoved(r),this.getEventManager().remove(r)},doAnimate:function(r,d,u){u=u||{};var C=this.getOffset(r),m=y(C,d),a=m[0]-C.left,P=m[1]-C.top,v=u.duration||250,E=15,f=v/E,x=E/v*a,N=E/v*P,U=0,Y=setInterval(function(){c.setPosition(r,{left:C.left+x*(U+1),top:C.top+N*(U+1)}),u.step!=null&&u.step(U,Math.ceil(f)),U++,U>=f&&(window.clearInterval(Y),u.complete!=null&&u.complete())},E)},destroyDroppable:function(r,d){h(this,d).destroyDroppable(r)},unbindDroppable:function(r,d,u,C){h(this,C).destroyDroppable(r,d,u)},droppable:function(r,d){r=V.isArray(r)||r.length!=null&&!V.isString(r)?r:[r];var u;return d=d||{},d.allowLoopback=!1,Array.prototype.slice.call(r).forEach(function(C){u=this.info(C),u.el&&this.initDroppable(u.el,d)}.bind(this)),this},initDroppable:function(r,d,u){h(this,u).droppable(r,d)},isAlreadyDraggable:function(r){return r._katavorioDrag!=null},isDragSupported:function(r,d){return!0},isDropSupported:function(r,d){return!0},isElementDraggable:function(r){return r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.isEnabled()},getDragObject:function(r){return r[0].drag.getDragElement()},getDragScope:function(r){return r._katavorioDrag&&r._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(r){return r[0].e},getUIPosition:function(r,d){var u=r[0].el;if(u.offsetParent==null)return null;var C=r[0].finalPos||r[0].pos,m={left:C[0],top:C[1]};if(u._katavorioDrag&&u.offsetParent!==this.getContainer()){var a=this.getOffset(u.offsetParent);m.left+=a.left,m.top+=a.top}return m},setDragFilter:function(r,d,u){r._katavorioDrag&&r._katavorioDrag.setFilter(d,u)},setElementDraggable:function(r,d){r=c.getElement(r),r._katavorioDrag&&r._katavorioDrag.setEnabled(d)},setDragScope:function(r,d){r._katavorioDrag&&r._katavorioDrag.k.setDragScope(r,d)},setDropScope:function(r,d){r._katavorioDrop&&r._katavorioDrop.length>0&&r._katavorioDrop[0].k.setDropScope(r,d)},addToPosse:function(r,d){var u=Array.prototype.slice.call(arguments,1),C=h(this);c.each(r,function(m){m=[c.getElement(m)],m.push.apply(m,u),C.addToPosse.apply(C,m)})},setPosse:function(r,d){var u=Array.prototype.slice.call(arguments,1),C=h(this);c.each(r,function(m){m=[c.getElement(m)],m.push.apply(m,u),C.setPosse.apply(C,m)})},removeFromPosse:function(r,d){var u=Array.prototype.slice.call(arguments,1),C=h(this);c.each(r,function(m){m=[c.getElement(m)],m.push.apply(m,u),C.removeFromPosse.apply(C,m)})},removeFromAllPosses:function(r){var d=h(this);c.each(r,function(u){d.removeFromAllPosses(c.getElement(u))})},setPosseState:function(r,d,u){var C=h(this);c.each(r,function(m){C.setPosseState(c.getElement(m),d,u)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(r){r._katavorioDrag&&r._katavorioDrag.abort()},addToDragSelection:function(r){var d=this.getElement(r);d!=null&&(d._isJsPlumbGroup||d._jsPlumbGroup==null)&&h(this).select(r)},removeFromDragSelection:function(r){h(this).deselect(r)},getDragSelection:function(){return h(this).getSelection()},clearDragSelection:function(){h(this).deselectAll()},trigger:function(r,d,u,C){this.getEventManager().trigger(r,d,u,C)},doReset:function(){for(var r in this)r.indexOf("_katavorio_")===0&&this[r].reset()},getEventManager:function(){return W(this)},on:function(r,d,u){return this.getEventManager().on.apply(this,arguments),this},off:function(r,d,u){return this.getEventManager().off.apply(this,arguments),this}});var j=function(r){var d=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body!="undefined"&&document.body!=null?r():setTimeout(d,9)};d()};j(c.init)}.call(typeof window!="undefined"?window:kt)})(Ee);const tn=[{title:"\u5DE5\u4F5C\u6D41",icon:"iconfont icon-shouye",isOpen:!0,id:"1",children:[{icon:"iconfont icon-gongju",name:"\u5F15\u64CE",id:"11",form:[{type:"input",label:"\u5BA2\u6237\u59D3\u540D",prop:"name",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D",required:!0,disabled:!1},{type:"select",label:"\u6027\u522B",prop:"sex",placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",required:!0,disabled:!1,options:[{value:"0",label:"\u5973"},{value:"1",label:"\u7537"}]},{type:"input",label:"\u5458\u5DE5\u7F16\u53F7",prop:"number",placeholder:"\u8BF7\u8F93\u5165\u5458\u5DE5\u7F16\u53F7",required:!0,disabled:!1},{type:"input",label:"\u529E\u516C\u7535\u8BDD",prop:"mobile",placeholder:"\u8BF7\u8F93\u5165\u529E\u516C\u7535\u8BDD",required:!0,disabled:!1},{type:"select",label:"\u6743\u9650\u5206\u914D",prop:"role",placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",required:!0,disabled:!1,options:[{value:"0",label:"\u7F16\u8F91\u6743\u9650"},{value:"1",label:"\u5220\u9664\u6743\u9650"}]},{type:"checkbox",label:"\u6A21\u5757\u9009\u62E9",prop:"module",placeholder:"\u8BF7\u9009\u62E9\u6A21\u5757",required:!0,disabled:!1}]},{icon:"iconfont icon-shouye_dongtaihui",name:"\u6A21\u7248",id:"12",form:[{type:"input",label:"\u7B49\u7EA7",prop:"grade",placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7",required:!0,disabled:!1},{type:"input",label:"\u767B\u8BB0\u5BC6\u7801",prop:"password",placeholder:"\u8BF7\u8F93\u5165\u767B\u8BB0\u5BC6\u7801",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshuchaxun",name:"\u540D\u79F0",id:"13",form:[{type:"input",label:"\u6570\u636E\u8868",prop:"dataSheet",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u8868",required:!0,disabled:!1},{type:"input",label:"\u5B57\u6BB5\u914D\u7F6E",prop:"field",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u914D\u7F6E",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshu",name:"\u7248\u672C",id:"14",form:[{type:"input",label:"\u53D1\u5E03\u6A21\u677F",prop:"publish",placeholder:"\u8BF7\u8F93\u5165\u53D1\u5E03\u6A21\u677F",required:!0,disabled:!1}]},{icon:"iconfont icon-bolangnengshiyanchang",name:"\u5EFA\u6A21",id:"15",form:[{type:"input",label:"\u5185\u5BB9\u6A21\u677F",prop:"content",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9\u6A21\u677F",required:!0,disabled:!1}]},{icon:"iconfont icon-xingqiu",name:"\u8282\u70B9",id:"16",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F06",prop:"name16"}]}]},{title:"\u6D41\u7A0B",isOpen:!0,icon:"iconfont icon-caijian",id:"2",children:[{icon:"iconfont icon-fuwenben",name:"\u5B9E\u4F8B",id:"21",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F07",prop:"name21"}]},{icon:"iconfont icon-fuwenbenkuang",name:"\u8F68\u8FF9",id:"22",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F08",prop:"name22"}]},{icon:"iconfont icon-shangchuan",name:"\u6570\u636E",id:"23",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F09",prop:"name23"}]}]},{title:"\u4EFB\u52A1",isOpen:!0,icon:"iconfont icon-shuju",id:"3",children:[{icon:"iconfont icon-icon-",name:"\u53C2\u4E0E\u4EBA",id:"31",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F01",prop:"name31"}]},{icon:"iconfont icon-gerenzhongxin",name:"\u6267\u884C\u4EBA",id:"32",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F02",prop:"name32"}]},{icon:"iconfont icon-fangkuang",name:"\u5DE5\u5355",id:"33",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F03",prop:"name33"}]}]}],en={Anchors:["Top","TopCenter","TopRight","TopLeft","Right","RightMiddle","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Container:"workflow-right",Connector:["Bezier",{curviness:100}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoint:["Blank",{Overlays:""}],EndpointStyle:{fill:"#1879ffa1",outlineWidth:1},LogEnabled:!0,PaintStyle:{stroke:"#E0E3E7",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},DragOptions:{cursor:"pointer",zIndex:2e3},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}],["Label",{label:"",location:.5,cssClass:"aLabel"}]],RenderMode:"svg",HoverPaintStyle:{stroke:"#b0b2b5",strokeWidth:1},EndpointHoverStyle:{fill:"red"},Scope:"jsPlumb_DefaultScope"},nn={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,maxConnections:-1},sn={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,dropOptions:{hoverClass:"ef-drop-hover"}},Ce={isSource:!0,isTarget:!0,anchor:"Continuous"};const rn=Ie({name:"pagesWorkflow",components:{Tool:Ke,Contextmenu:Je,Drawer:Qe,Help:Ze},setup(){const xt=ve(),K=ve(),c=ve(),V=ve(),nt=We(),{copyText:Z}=ze(),W=Re({leftNavList:[],dropdownNode:{x:"",y:""},dropdownLine:{x:"",y:""},isShow:!1,jsPlumb:null,jsPlumbNodeIndex:null,jsplumbDefaults:en,jsplumbMakeSource:nn,jsplumbMakeTarget:sn,jsplumbConnect:Ce,jsplumbData:{nodeList:[],lineList:[]}}),h=Ne(()=>{let{isTagsview:m}=nt.state.themeConfig.themeConfig,{isTagsViewCurrenFull:a}=nt.state.tagsViewRoutes;return a?"30px":m?"114px":"80px"}),M=()=>{document.body.clientWidth<768?W.isShow=!0:W.isShow=!1},l=()=>{W.leftNavList=tn,W.jsplumbData={nodeList:[{nodeId:"huej738hbji",left:"148px",top:"93px",class:"workflow-right-clone",icon:"iconfont icon-gongju",name:"\u5F15\u64CE",id:"11"},{nodeId:"52kcszzyxrd",left:"458px",top:"203px",class:"workflow-right-clone",icon:"iconfont icon-shouye_dongtaihui",name:"\u6A21\u7248",id:"12"},{nodeId:"nltskl6k4me",left:"164px",top:"350px",class:"workflow-right-clone",icon:"iconfont icon-zhongduancanshuchaxun",name:"\u540D\u79F0",id:"13"}],lineList:[{sourceId:"huej738hbji",targetId:"52kcszzyxrd",label:"\u4F20\u9001"},{sourceId:"huej738hbji",targetId:"nltskl6k4me",label:""}]}},i=()=>{W.leftNavList.forEach((m,a)=>{$e.create(document.getElementById(`left${a}`),{group:{name:"vue-next-admin-1",pull:"clone",put:!1},animation:0,sort:!1,draggable:".workflow-left-item",forceFallback:!0,onEnd:function(P){const{name:v,icon:E,id:f}=P.clone.dataset,{layerX:x,layerY:N,clientX:U,clientY:Y}=P.originalEvent,n=document.querySelector("#workflow-right"),{x:o,y:t,width:g,height:b}=n.getBoundingClientRect();if(U<o||U>g+o||Y<t||t>t+b)ae.warning("\u8BF7\u628A\u8282\u70B9\u62D6\u5165\u5230\u753B\u5E03\u4E2D");else{const I=Math.random().toString(36).substr(2,12),F={nodeId:I,left:`${x-40}px`,top:`${N-15}px`,class:"workflow-right-clone",name:v,icon:E,id:f};W.jsplumbData.nodeList.push(F),me(()=>{W.jsPlumb.makeSource(I,W.jsplumbMakeSource),W.jsPlumb.makeTarget(I,W.jsplumbMakeTarget,Ce),W.jsPlumb.draggable(I,{containment:"parent",stop:X=>{W.jsplumbData.nodeList.forEach(R=>{R.nodeId===X.el.id&&(R.left=`${X.pos[0]}px`,R.top=`${X.pos[1]}px`)})}})})}}})})},y=()=>{Ee.jsPlumb.ready(()=>{W.jsPlumb=Ee.jsPlumb.getInstance({detachable:!1,Container:"workflow-right"}),W.jsPlumb.fire("jsPlumbDemoLoaded",W.jsPlumb),W.jsPlumb.importDefaults(W.jsplumbDefaults),W.jsPlumb.setSuspendDrawing(!1,!0),S(),W.jsPlumb.bind("contextmenu",(m,a)=>{a.preventDefault();const{sourceId:P,targetId:v}=m,{clientX:E,clientY:f}=a;W.dropdownLine.x=E,W.dropdownLine.y=f;const x=W.jsplumbData.nodeList.find(U=>U.nodeId===v),N=W.jsplumbData.lineList.find(U=>U.sourceId===P&&U.targetId===v);x.type="line",x.label=N.label,K.value.openContextmenu(x,m)}),W.jsPlumb.bind("beforeDrop",m=>{const{sourceId:a,targetId:P}=m;return W.jsplumbData.lineList.find(E=>E.sourceId===a&&E.targetId===P)?(ae.warning("\u5173\u7CFB\u5DF2\u5B58\u5728\uFF0C\u4E0D\u53EF\u91CD\u590D\u8FDE\u63A5"),!1):!0}),W.jsPlumb.bind("connection",m=>{const{sourceId:a,targetId:P}=m;W.jsplumbData.lineList.push({sourceId:a,targetId:P,label:""})}),W.jsPlumb.bind("connectionDetached",m=>{const{sourceId:a,targetId:P}=m;W.jsplumbData.lineList=W.jsplumbData.lineList.filter(v=>!(v.sourceId==a&&v.targetId==P))})})},S=()=>{W.jsplumbData.nodeList.forEach(m=>{W.jsPlumb.makeSource(m.nodeId,W.jsplumbMakeSource),W.jsPlumb.makeTarget(m.nodeId,W.jsplumbMakeTarget,Ce),W.jsPlumb.draggable(m.nodeId,{containment:"parent",stop:a=>{W.jsplumbData.nodeList.forEach(P=>{P.nodeId===a.el.id&&(P.left=`${a.pos[0]}px`,P.top=`${a.pos[1]}px`)})}})}),W.jsplumbData.lineList.forEach(m=>{W.jsPlumb.connect({source:m.sourceId,target:m.targetId,label:m.label},W.jsplumbConnect)})},T=m=>{m.isOpen=!m.isOpen},D=m=>{W.jsPlumbNodeIndex=m},p=(m,a,P)=>{W.jsPlumbNodeIndex=a;const{clientX:v,clientY:E}=P;W.dropdownNode.x=v,W.dropdownNode.y=E,m.type="node",m.label="";let f={};W.leftNavList.forEach(x=>{x.children&&x.children.find(N=>N.id===m.id)&&(f=x.children.find(N=>N.id===m.id))}),m.from=f.form,xt.value.openContextmenu(m)},e=m=>{const{contextMenuClickId:a,nodeId:P}=m;if(a===0){const v=W.jsplumbData.nodeList.findIndex(E=>E.nodeId===P);W.jsplumbData.nodeList.splice(v,1),W.jsPlumb.removeAllEndpoints(P),W.jsPlumbNodeIndex=null}else a===1&&c.value.open(m)},O=(m,a)=>{const{contextMenuClickId:P}=m,{endpoints:v}=a,E=[];v.forEach(f=>{E.push({id:f.element.id,innerText:f.element.innerText})}),m.contact=`${E[0].innerText}(${E[0].id}) => ${E[1].innerText}(${E[1].id})`,P===0?W.jsPlumb.deleteConnection(a):P===1&&c.value.open(m,a)},L=m=>{const{sourceId:a,targetId:P,label:v}=m,E=W.jsPlumb.getConnections({source:a,target:P})[0];E.setLabel(v),!v||v===""?E.addClass("workflow-right-empty-label"):(E.removeClass("workflow-right-empty-label"),E.addClass("workflow-right-label")),W.jsplumbData.lineList.forEach(f=>{f.sourceId===a&&f.targetId===P&&(f.label=v)})},G=m=>{const{nodeId:a,name:P,icon:v}=m;W.jsplumbData.nodeList.forEach(E=>{E.nodeId===a&&(E.name=P,E.icon=v)}),me(()=>{W.jsPlumb.setSuspendDrawing(!1,!0)})},B=m=>{switch(m){case"help":w();break;case"download":j();break;case"submit":r();break;case"copy":d();break;case"del":u();break;case"fullscreen":C();break}},w=()=>{me(()=>{V.value.open()})},j=()=>{const{globalTitle:m}=nt.state.themeConfig.themeConfig,a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(W.jsplumbData,null,"	")),P=document.createElement("a");P.setAttribute("href",a),P.setAttribute("download",`${m}\u5DE5\u4F5C\u6D41.json`),P.click(),P.remove(),ae.success("\u4E0B\u8F7D\u6210\u529F")},r=()=>{ae.success("\u6570\u636E\u63D0\u4EA4\u6210\u529F")},d=()=>{Z(JSON.stringify(W.jsplumbData))},u=()=>{qe.confirm("\u6B64\u64CD\u4F5C\u5C06\u6E05\u7A7A\u753B\u5E03\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","\u63D0\u793A",{confirmButtonText:"\u6E05\u7A7A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{W.jsplumbData.nodeList.forEach(m=>{W.jsPlumb.removeAllEndpoints(m.nodeId)}),me(()=>{W.jsplumbData={nodeList:[],lineList:[]},ae.success("\u6E05\u7A7A\u753B\u5E03\u6210\u529F")})}).catch(()=>{})},C=()=>{nt.dispatch("tagsViewRoutes/setCurrenFullscreen",!0)};return Be(async()=>{await l(),i(),y(),M(),window.addEventListener("resize",M)}),Ge(()=>{window.removeEventListener("resize",M)}),ke({setViewHeight:h,setClientWidth:M,setLineLabel:L,setNodeContent:G,onTitleClick:T,onItemCloneClick:D,onContextmenu:p,onCurrentNodeClick:e,onCurrentLineClick:O,contextmenuNodeRef:xt,contextmenuLineRef:K,drawerRef:c,helpRef:V,onToolClick:B},He(W))}}),on={class:"workflow-container"},an={key:0,class:"workflow-mask"},ln={class:"workflow"},un={class:"workflow-content"},hn={id:"workflow-left"},cn=["id"],fn=["onClick"],dn=["data-name","data-icon","data-id"],pn={class:"workflow-left-item-icon"},gn={class:"font10 pl5 name"},vn={id:"workflow-right"},mn=["id","onClick","onContextmenu"],bn={class:"workflow-left-item-icon"},yn={class:"font10 pl5 name"};function _n(xt,K,c,V,nt,Z){const W=ne("Tool"),h=ne("SvgIcon"),M=ne("el-scrollbar"),l=ne("Contextmenu"),i=ne("Drawer"),y=ne("Help");return Qt(),Jt("div",on,[xt.isShow?(Qt(),Jt("div",an)):Ue("",!0),Nt("div",{class:"layout-view-bg-white flex",style:_e({height:`calc(100vh - ${xt.setViewHeight}`})},[Nt("div",ln,[qt(W,{onTool:xt.onToolClick},null,8,["onTool"]),Nt("div",un,[Nt("div",hn,[qt(M,null,{default:Ye(()=>[(Qt(!0),Jt(be,null,ye(xt.leftNavList,(S,T)=>(Qt(),Jt("div",{id:`left${T}`,key:S.id,style:_e({height:S.isOpen?"auto":"50px",overflow:"hidden"}),class:"workflow-left-id"},[Nt("div",{class:"workflow-left-title",onClick:D=>xt.onTitleClick(S)},[Nt("span",null,Pe(S.title),1),qt(h,{name:S.isOpen?"ele-ArrowDown":"ele-ArrowRight"},null,8,["name"])],8,fn),(Qt(!0),Jt(be,null,ye(S.children,(D,p)=>(Qt(),Jt("div",{class:"workflow-left-item",key:p,"data-name":D.name,"data-icon":D.icon,"data-id":D.id},[Nt("div",pn,[qt(h,{name:D.icon,class:"workflow-icon-drag"},null,8,["name"]),Nt("div",gn,Pe(D.name),1)])],8,dn))),128))],12,cn))),128))]),_:1})]),Nt("div",vn,[(Qt(!0),Jt(be,null,ye(xt.jsplumbData.nodeList,(S,T)=>(Qt(),Jt("div",{key:S.nodeId,id:S.nodeId,class:Te(S.class),style:_e({left:S.left,top:S.top}),onClick:D=>xt.onItemCloneClick(T),onContextmenu:Xe(D=>xt.onContextmenu(S,T,D),["prevent"])},[Nt("div",{class:Te(["workflow-right-box",{"workflow-right-active":xt.jsPlumbNodeIndex===T}])},[Nt("div",bn,[qt(h,{name:S.icon,class:"workflow-icon-drag"},null,8,["name"]),Nt("div",yn,Pe(S.name),1)])],2)],46,mn))),128))])])])],4),qt(l,{dropdown:xt.dropdownNode,ref:"contextmenuNodeRef",onCurrent:xt.onCurrentNodeClick},null,8,["dropdown","onCurrent"]),qt(l,{dropdown:xt.dropdownLine,ref:"contextmenuLineRef",onCurrent:xt.onCurrentLineClick},null,8,["dropdown","onCurrent"]),qt(i,{ref:"drawerRef",onLabel:xt.setLineLabel,onNode:xt.setNodeContent},null,8,["onLabel","onNode"]),qt(y,{ref:"helpRef"},null,512)])}var On=Ve(rn,[["render",_n],["__scopeId","data-v-6edf7286"]]);export{On as default};
