var j=Object.defineProperty;var O=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var B=(e,i,o)=>i in e?j(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,M=(e,i)=>{for(var o in i||(i={}))z.call(i,o)&&B(e,o,i[o]);if(O)for(var o of O(i))E.call(i,o)&&B(e,o,i[o]);return e};import{u as D,_ as P}from"./index.1646669190947.js";import{A as U}from"./aside.1646669190947.js";import{H as J,M as W}from"./main.1646669190947.js";import{d as T,h as F,aA as Z,aE as q,a0 as G,z as L,l as K,k as Q,ad as X,aF as Y,ac as ee,j as te,n as se,Z as c,o as p,a as y,W as m,P as g,b as h,F as ne,a5 as oe,J as C,V as R,O as b,T as N}from"./vue.1646669190947.js";import"./logo-mini.1646669190947.js";import"./sortable.esm.1646669190947.js";import"./parent.1646669190947.js";const le=T({name:"layoutColumnsAside",setup(){const e=F([]),i=F(),{proxy:o}=te(),d=D(),v=Z(),H=q(),t=G({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[],isNavHover:!1}),_=L(()=>d.state.themeConfig.themeConfig.columnsAsideStyle),n=L(()=>d.state.themeConfig.themeConfig.columnsAsideLayout),r=s=>{t.liIndex=s,i.value.style.top=`${e.value[s].offsetTop+t.difference}px`},f=(s,l)=>{r(l);let{path:a,redirect:u}=s;u?H.push(u):H.push(a)},$=(s,l)=>{let{path:a}=s;t.liOldPath=a,t.liOldIndex=l,t.liHoverIndex=l,o.mittBus.emit("setSendColumnsChildren",A(a)),d.dispatch("routesList/setColumnsMenuHover",!1),d.dispatch("routesList/setColumnsNavHover",!0),t.isNavHover=!0},k=async()=>{await d.dispatch("routesList/setColumnsNavHover",!1),setTimeout(()=>{const{isColumnsMenuHover:s,isColumnsNavHover:l}=d.state.routesList;!s&&!l&&o.mittBus.emit("restoreDefault")},100)},S=s=>{se(()=>{r(s)})},w=()=>{t.columnsAsideList=I(d.state.routesList.routesList);const s=A(v.path);if(Object.keys(s).length<=0)return!1;S(s.item[0].k),o.mittBus.emit("setSendColumnsChildren",s)},A=s=>{const l=s.split("/");let a={};return t.columnsAsideList.map((u,V)=>{u.path===`/${l[1]}`&&(u.k=V,a.item=[M({},u)],a.children=[M({},u)],u.children&&(a.children=u.children))}),a},I=s=>s.filter(l=>!l.meta.isHide).map(l=>(l=Object.assign({},l),l.children&&(l.children=I(l.children)),l)),x=s=>{t.routeSplit=s.split("/"),t.routeSplit.shift();const l=`/${t.routeSplit[0]}`,a=t.columnsAsideList.find(u=>u.path===l);if(!a)return!1;setTimeout(()=>{S(a.k)},0)};return K(d.state,s=>{if(s.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!s.routesList.isColumnsMenuHover&&!s.routesList.isColumnsNavHover)t.liHoverIndex=null,o.mittBus.emit("setSendColumnsChildren",A(v.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;o.mittBus.emit("setSendColumnsChildren",A(t.liOldPath))}}),Q(()=>{w(),o.mittBus.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),X(()=>{o.mittBus.off("restoreDefault",()=>{})}),Y(s=>{x(s.path),o.mittBus.emit("setSendColumnsChildren",A(s.path))}),M({columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:i,onColumnsAsideDown:S,setColumnsAsideStyle:_,setColumnsAsidelayout:n,onColumnsAsideMenuClick:f,onColumnsAsideMenuMouseenter:$,onColumnsAsideMenuMouseleave:k},ee(t))}}),ie={class:"layout-columns-aside"},ae=["onClick","onMouseenter","title"],re={class:"columns-vertical-title font12"},ue=["href"],de={class:"columns-vertical-title font12"};function ce(e,i,o,d,v,H){const t=c("SvgIcon"),_=c("el-scrollbar");return p(),y("div",ie,[m(_,null,{default:g(()=>[h("ul",{onMouseleave:i[0]||(i[0]=n=>e.onColumnsAsideMenuMouseleave())},[(p(!0),y(ne,null,oe(e.columnsAsideList,(n,r)=>(p(),y("li",{key:r,onClick:f=>e.onColumnsAsideMenuClick(n,r),onMouseenter:f=>e.onColumnsAsideMenuMouseenter(n,r),ref_for:!0,ref:f=>{f&&(e.columnsAsideOffsetTopRefs[r]=f)},class:C({"layout-columns-active":e.liIndex===r,"layout-columns-hover":e.liHoverIndex===r}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(p(),y("div",{key:0,class:C(e.setColumnsAsidelayout)},[m(t,{name:n.meta.icon},null,8,["name"]),h("div",re,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.setColumnsAsidelayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(p(),y("div",{key:1,class:C(e.setColumnsAsidelayout)},[h("a",{href:n.meta.isLink,target:"_blank"},[m(t,{name:n.meta.icon},null,8,["name"]),h("div",de,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.setColumnsAsidelayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,ue)],2))],42,ae))),128)),h("div",{ref:"columnsAsideActiveRef",class:C(e.setColumnsAsideStyle)},null,2)],32)]),_:1})])}var me=P(le,[["render",ce],["__scopeId","data-v-7f425eb8"]]);const fe=T({name:"layoutColumns",components:{Aside:U,Header:J,Main:W,ColumnsAside:me},setup(){const e=D();return{isFixedHeader:L(()=>e.state.themeConfig.themeConfig.isFixedHeader)}}}),pe={class:"layout-columns-warp"};function he(e,i,o,d,v,H){const t=c("ColumnsAside"),_=c("Aside"),n=c("Header"),r=c("Main"),f=c("el-scrollbar"),$=c("el-container"),k=c("el-backtop");return p(),b($,{class:"layout-container"},{default:g(()=>[m(t),h("div",pe,[m(_),m($,{class:C(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:g(()=>[e.isFixedHeader?(p(),b(n,{key:0})):N("",!0),m(f,{class:C({"layout-backtop":e.isFixedHeader})},{default:g(()=>[e.isFixedHeader?N("",!0):(p(),b(n,{key:0})),m(r)]),_:1},8,["class"])]),_:1},8,["class"])]),m(k,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var ge=P(fe,[["render",he]]);export{ge as default};
